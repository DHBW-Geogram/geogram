{"version":3,"sources":["../node_modules/@ionic/core/dist/esm-es5 lazy /^/.*/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object","../node_modules/@ionic/pwa-elements/dist/esm-es5 lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object","components/LocationMap/LocationMap.tsx","helper/firebase.ts","pages/Upload/Upload.tsx","hooks/usePhotoGallery.ts","components/ProfilePicSelectionModal/ProfilePicSelectionModal.tsx","pages/Profile/checkUsername.ts","pages/Profile/Profile.tsx","components/UploadSelectionModal/UploadSelectionModal.tsx","hooks/evaluateDistance.ts","components/ExploreCard/ExploreCard.tsx","pages/Search/Search.tsx","hooks/alert.ts","hooks/checkUsername.ts","hooks/login/signInWithUsernameAndPassword.ts","hooks/login/checkLogin.ts","pages/auth/Login.tsx","hooks/pw-check.ts","hooks/register/emailVerify.ts","hooks/register/register.ts","hooks/register/checkRegister.ts","pages/auth/Register.tsx","hooks/sortImageArray.ts","hooks/evaluateLocation.ts","pages/Exploration/Exploration.tsx","pages/ProfilePic/ProfilePic.tsx","App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","index.tsx"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","LocationMap","location","MapContainer","center","coords","latitude","longitude","zoom","scrollWheelZoom","style","height","width","TileLayer","attribution","url","Marker","position","Popup","fb","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","firestore","auth","onAuthStateChanged","user","uid","localStorage","setItem","console","log","removeItem","Geolocation","Plugins","Filesystem","Upload","props","useContext","UserContext","useState","image","setImage","title","setTitle","description","setDescription","setLocation","setPosition","toast","setToast","redirect","setRedirect","useEffect","undefined","state","getCurrentPosition","accuracy","altitude","altitudeAccuracy","heading","speed","timestamp","axios","get","res","data","results","formatted","setLoading","upload","a","Date","now","webviewPath","isPlatform","file","base64FromPath","toString","split","readFile","path","filepath","directory","FilesystemDirectory","Data","encoding","FilesystemEncoding","UTF8","post","process","collection","doc","item","imageId","uuidv4","set","username","email","setTimeout","catch","err","fullscreen","collapse","size","src","type","value","onIonChange","detail","expand","shape","fill","color","onClick","isOpen","onDidDismiss","message","duration","to","PHOTO_STORAGE","usePhotoGallery","photo","setPhoto","getPhoto","useCamera","useFilesystem","deleteFile","writeFile","useStorage","takePhoto","resultType","CameraResultType","Uri","source","CameraSource","Camera","quality","cameraPhoto","fileName","getTime","savePicture","savedFileImage","JSON","stringify","convertBlobToBase64","blob","reject","reader","FileReader","onerror","onload","result","readAsDataURL","takePhotoFromGalerie","Photos","base64Data","webPath","savedFile","uri","Capacitor","convertFileSrc","ProfilePicSelectionModal","active","setShowActionSheet","selectedRoute","setSelectedRoute","pathname","buttons","text","icon","cameraOutline","handler","imageOutline","closeOutline","checkUsername","userName","usernameCheck","typedDocs","docs","forEach","push","len","length","currentUsername","where","currentUser","querySnapshot","i","Profile","profileSelectionModal","setProfileSelectionModal","EditProfile","setEditProfile","setUsername","firstName","setFirstName","lastName","setLastName","setEmail","bio","setBio","showAlert","setShowAlert","verified","setVerified","profilepic","setProfilepic","errorUsernameLabel","setErrorUsernameLabel","errorUsernameText","setErrorUsernameText","isUsernameCorrect","errorEmailLabel","setErrorEmailLabel","errorEmailText","setErrorEmailText","setEmailCorrect","userFirstName","userLastName","biography","emailVerified","slot","textAlign","paddingLeft","fontSize","className","display","String","sendEmailVerification","cssClass","header","check","updateEmail","error","signOut","UploadSelectionModal","degreesToRadians","degrees","Math","PI","distanceInKm","lat1","lon1","lat2","lon2","dLat","dLon","sin","cos","atan2","sqrt","ExploreCard","pin","distance","slice","Search","filter","setFilter","images","setImages","showPopup","setShowPopup","popPic","setPopPic","fetchImages","ref","t","element","searchText","target","includes","showCancelButton","backgroundColor","p","objectFit","bottom","right","borderRadius","toPrecision","backdropDismiss","showBackdrop","presentAlert","alert","document","createElement","body","appendChild","present","role","presentAlertWithHeader","signInWithUsernameAndPassword","password","signInWithEmailAndPassword","checkLogin","PasswordCheckStrength","Login","setPassword","alertPasswordForgotenText","setalertPasswordForgotenText","onUsernameNameChange","useCallback","onPasswordChange","onLoginClick","class","logInOutline","routerLink","inputs","name","placeholder","sendPasswordResetEmail","emailPasswordForgoten","PasswordCheckService","commonPasswordPatterns","this","test","numberOfElements","Short","MinimumLength","isPasswordCommon","Common","Weak","Ok","Strong","sendEmailVerify","register","createUserWithEmailAndPassword","userCredential","checkRegister","confirmPassword","Register","setuserFirstName","setuserLastName","setConfirmPassword","setUserName","setAlertText","pwStrength","setpwStrength","checker","onEmailNameChange","checkPasswordStrength","onConfirmPasswordChange","onFirstNameChange","onLastNameChange","onUsernameChange","onSignUpClick","chevronBackOutline","personAddOutline","sortImageArray","b","evaluateLocation","range","lat","long","pictures","sort","Explore","open","event","marginRight","nativeEvent","margin","funnel","min","max","snaps","step","onLostPointerCapture","onIonRefresh","complete","pullFactor","pullMin","pullMax","ProfilePic","oldImage","setOldImage","merge","s","justifyContent","alignItems","arrowForward","offset","PublicRoutes","component","exact","render","PrivateRoutes","showActionSheet","loading","Exploration","tab","href","home","search","personCircleOutline","marginBottom","vertical","horizontal","md","cameraSharp","ios","App","Boolean","window","hostname","match","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","defineCustomElements","createContext","UserProvider","children","setUser","userAuth","Provider","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"qFAAA,IAAIA,EAAM,CACT,8BAA+B,CAC9B,IACA,GAED,uBAAwB,CACvB,IACA,GAED,uBAAwB,CACvB,IACA,GAED,0BAA2B,CAC1B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,sBAAuB,CACtB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,mCAAoC,CACnC,IACA,IAED,uBAAwB,CACvB,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,sBAAuB,CACtB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,gCAAiC,CAChC,IACA,KAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,KAIR,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B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","file":"static/js/main.b9282fcc.chunk.js","sourcesContent":["var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t150,\n\t\t7\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t151,\n\t\t8\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t152,\n\t\t9\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t153,\n\t\t19\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t154,\n\t\t20\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t155,\n\t\t45\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t156,\n\t\t21\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t157,\n\t\t22\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t158,\n\t\t23\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t159,\n\t\t24\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t160,\n\t\t46\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t161,\n\t\t12\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t162,\n\t\t25\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t163,\n\t\t47\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t164,\n\t\t48\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t165,\n\t\t26\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t166,\n\t\t27\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t167,\n\t\t28\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t168,\n\t\t29\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t169,\n\t\t30\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t170,\n\t\t10\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t171,\n\t\t16\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t172,\n\t\t11\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t173,\n\t\t31\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t174,\n\t\t32\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t175,\n\t\t33\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t176,\n\t\t13\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t177,\n\t\t18\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t178,\n\t\t49\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t179,\n\t\t34\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t180,\n\t\t35\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t181,\n\t\t36\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t182,\n\t\t37\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t183,\n\t\t50\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t184,\n\t\t15\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t185,\n\t\t51\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t186,\n\t\t38\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t187,\n\t\t17\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t188,\n\t\t39\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t189,\n\t\t40\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t190,\n\t\t41\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t191,\n\t\t14\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t192,\n\t\t52\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 101;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t193,\n\t\t67\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 103;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./pwa-action-sheet.entry.js\": [\n\t\t197,\n\t\t59\n\t],\n\t\"./pwa-camera-modal-instance.entry.js\": [\n\t\t198,\n\t\t60\n\t],\n\t\"./pwa-camera-modal.entry.js\": [\n\t\t199,\n\t\t61\n\t],\n\t\"./pwa-camera.entry.js\": [\n\t\t200,\n\t\t62\n\t],\n\t\"./pwa-toast.entry.js\": [\n\t\t201,\n\t\t63\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 147;\nmodule.exports = webpackAsyncContext;","import React, { Dispatch, SetStateAction, useEffect, useState } from \"react\";\r\nimport {MapContainer, TileLayer, Marker, Popup} from \"react-leaflet\";\r\nimport { GeogramPosition } from \"../../model/GeogramPosition\";\r\nimport 'leaflet/dist/leaflet.css';\r\nimport './LocationMap.css'\r\n\r\nconst LocationMap: React.FC<{location: GeogramPosition}> = ({location}) => {\r\n\r\n  return (\r\n    <MapContainer center={[location.coords.latitude, location.coords.longitude]} zoom={13} scrollWheelZoom={false} style={{height: \"20vh\", width: \"100vh\"}}>\r\n    <TileLayer\r\n      attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n      url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n    />\r\n    <Marker position={[location.coords.latitude, location.coords.longitude]}>\r\n      <Popup>\r\n        Current Position.\r\n      </Popup>\r\n    </Marker>\r\n  </MapContainer>\r\n    );\r\n};\r\n\r\nexport default LocationMap;\r\n","import firebase from \"firebase\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyCuOUn1kd_QKs91UYx2Pv015QYAwNfpkWg\",\r\n    authDomain: \"geogram-4906f.firebaseapp.com\",\r\n    projectId: \"geogram-4906f\",\r\n    storageBucket: \"geogram-4906f.appspot.com\",\r\n    messagingSenderId: \"293875577588\",\r\n    appId: \"1:293875577588:web:d286bacade6e4850bfa4a1\"\r\n};\r\n// Configure\r\nlet fb = firebase.initializeApp(firebaseConfig);\r\nlet db = fb.firestore();\r\n\r\n// AUTH //\r\nexport const auth = fb.auth();\r\n\r\nexport default firebase;\r\n\r\n\r\n// [START auth_state_listener]\r\nauth.onAuthStateChanged((user: any) => {\r\n    if (user) {\r\n        var uid: any = user.uid;\r\n        localStorage.setItem(\"uid\", uid);\r\n        console.log(\"RES:\",auth)\r\n    } else {\r\n        localStorage.removeItem(\"uid\");\r\n    }\r\n});\r\n// [END auth_state_listener]\r\n\r\n\r\nexport { db, fb };\r\n\r\n","/* eslint-disable react/jsx-no-undef */\r\nimport {\r\n  IonButton,\r\n  IonCol,\r\n  IonContent,\r\n  IonFab,\r\n  IonFabButton,\r\n  IonGrid,\r\n  IonHeader,\r\n  IonIcon,\r\n  IonImg,\r\n  IonInput,\r\n  IonItem,\r\n  IonLabel,\r\n  IonPage,\r\n  IonRow,\r\n  IonTextarea,\r\n  IonTitle,\r\n  IonToast,\r\n  IonToolbar,\r\n  isPlatform,\r\n} from \"@ionic/react\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport { Photo, usePhotoGallery } from \"../../hooks/usePhotoGallery\";\r\nimport { useFilesystem, base64FromPath } from \"@ionic/react-hooks/filesystem\";\r\nimport {\r\n  FilesystemDirectory,\r\n  FilesystemEncoding,\r\n  Plugins,\r\n} from \"@capacitor/core\";\r\nimport { GeogramPosition } from \"../../model/GeogramPosition\";\r\nimport LocationMap from \"../../components/LocationMap/LocationMap\";\r\nimport axios from \"axios\";\r\nimport { db } from \"../../helper/firebase\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { Redirect } from \"react-router\";\r\nimport { useStorage } from \"@ionic/react-hooks/storage\";\r\nimport { UserContext } from \"../..\";\r\n\r\nconst { Geolocation, Filesystem } = Plugins;\r\n\r\nconst Upload: React.FC<any> = (props) => {\r\n  const user = useContext(UserContext);\r\n\r\n\r\n  // image provided by props\r\n  const [image, setImage] = useState<Photo>();\r\n\r\n  // Form data\r\n  const [title, setTitle] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n\r\n  // Geoinformation\r\n  const [location, setLocation] = useState<GeogramPosition>();\r\n  const [position, setPosition] = useState(\"\");\r\n\r\n  // Toast message\r\n  const [toast, setToast] = useState(\"\");\r\n\r\n  // Redirect\r\n  const [redirect, setRedirect] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (props.location.state !== undefined) {\r\n      setImage(props.location.state.image);\r\n    }\r\n\r\n    // get current geolocation\r\n    Geolocation.getCurrentPosition().then((location) => {\r\n      setLocation({\r\n        coords: {\r\n          accuracy: location.coords.accuracy,\r\n          altitude: location.coords.altitude,\r\n          altitudeAccuracy: location.coords.altitudeAccuracy,\r\n          heading: location.coords.heading,\r\n          latitude: location.coords.latitude,\r\n          longitude: location.coords.longitude,\r\n          speed: location.coords.speed,\r\n        },\r\n        timestamp: location.timestamp,\r\n      });\r\n      // reverse geolocating\r\n      axios\r\n        .get(\r\n          `https://api.opencagedata.com/geocode/v1/json?q=${location?.coords.latitude}+${location?.coords.longitude}&key=bb44e70b618844faba7cb23b580419e0`\r\n        )\r\n        .then((res) => {\r\n          setPosition(res.data.results[0].formatted);\r\n          setLocation((state: any) => {\r\n            return {\r\n              ...state,\r\n              position: res.data.results[0].formatted,\r\n            };\r\n          });\r\n        });\r\n    });\r\n\r\n    //disable set Loading\r\n    props.setLoading(false);\r\n  }, [props.location.state]);\r\n\r\n  const upload = async () => {\r\n    props.setLoading(true);\r\n\r\n    if (location === undefined) {\r\n      setLocation({\r\n        coords: {\r\n          accuracy: 0,\r\n          altitude: 0,\r\n          altitudeAccuracy: 0,\r\n          heading: 0,\r\n          latitude: 0,\r\n          longitude: 0,\r\n          speed: 0,\r\n        },\r\n        timestamp: Date.now(),\r\n      });\r\n    }\r\n\r\n    if (title !== \"\" && description !== \"\" && image !== undefined) {\r\n      if (image.webviewPath !== undefined) {\r\n        let file: any;\r\n        // get image data when on android or ios\r\n        if (isPlatform(\"android\") || isPlatform(\"ios\")) {\r\n          file = {\r\n            ...file,\r\n            data: (await base64FromPath(image.webviewPath!))\r\n              .toString()\r\n              .split(\",\")[1],\r\n          };\r\n        } else {\r\n          file = await Filesystem.readFile({\r\n            path: image.filepath,\r\n            directory: FilesystemDirectory.Data,\r\n            encoding: FilesystemEncoding.UTF8,\r\n          });\r\n        }\r\n\r\n        let res: any = await axios.post(\r\n          `${process.env.REACT_APP_IMAGE_SERVER_URL}/upload1`,\r\n          { data: file.data }\r\n        );\r\n\r\n        if (res.data.file !== undefined) {\r\n          db.collection(\"users\")\r\n            .doc(user?.uid)\r\n            .get()\r\n            .then((item) => {\r\n              let imageId: string = uuidv4();\r\n\r\n              db.collection(\"images\")\r\n                .doc(imageId)\r\n                .set({\r\n                  id: imageId,\r\n                  timestamp: Date.now(),\r\n                  user: item.data()?.username || user?.email,\r\n                  location: location,\r\n                  url: `${process.env.REACT_APP_IMAGE_SERVER_URL}/${res.data.file}`,\r\n                  title: title,\r\n                  description: description,\r\n                })\r\n                .then((res) => {\r\n                  setToast(\"Successfully added item to firebase\");\r\n\r\n                  // Set back everything\r\n                  setTitle(\"\");\r\n                  setDescription(\"\");\r\n                  setImage(undefined);\r\n                  setLocation(undefined);\r\n\r\n                  setTimeout(() => {\r\n                    setRedirect(\"explore\");\r\n                    props.setLoading(false);\r\n                  }, 1000);\r\n                })\r\n                .catch((err) =>\r\n                  setToast(\"Error while adding data to firebase\")\r\n                );\r\n            });\r\n        } else {\r\n          setToast(\r\n            \"Error while adding data to image server: \" +\r\n              process.env.REACT_APP_IMAGE_SERVER_URL\r\n          );\r\n        }\r\n      }\r\n\r\n      // wait for api\r\n      // cleanup of input fields\r\n    } else {\r\n      if (title === \"\") {\r\n        setToast(\"Please fill out the title field!\");\r\n      } else if (description === \"\") {\r\n        setToast(\"Please fill out the description field!\");\r\n      } else {\r\n        setToast(\"Error occured!\");\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonTitle>Upload</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent fullscreen>\r\n        <IonHeader collapse=\"condense\">\r\n          <IonToolbar>\r\n            <IonTitle size=\"large\">Upload</IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n\r\n        {/* Upload Form with image view */}\r\n        {image && (\r\n          <>\r\n            <IonImg src={image.webviewPath} />\r\n            <IonGrid>\r\n              <IonRow>\r\n                <IonCol size=\"12\">\r\n                  <IonItem>\r\n                    <IonLabel position=\"floating\">Title</IonLabel>\r\n                    <IonInput\r\n                      type=\"text\"\r\n                      value={title}\r\n                      onIonChange={(e) => {\r\n                        setTitle(e.detail.value!);\r\n                      }}\r\n                    />\r\n                  </IonItem>\r\n                </IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol size=\"12\">\r\n                  <IonItem>\r\n                    <IonLabel position=\"floating\">Description</IonLabel>\r\n                    <IonTextarea\r\n                      value={description}\r\n                      onIonChange={(e) => {\r\n                        setDescription(e.detail.value!);\r\n                      }}\r\n                    />\r\n                  </IonItem>\r\n                </IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol size=\"12\">\r\n                  Current Position: Latitude:{\" \"}\r\n                  {location?.coords.latitude.toString()}, Longitude:{\" \"}\r\n                  {location?.coords.longitude.toString()}\r\n                </IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol size=\"12\">City: {position}</IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol size=\"12\">\r\n                  {location && <LocationMap location={location} />}\r\n                </IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol>\r\n                  <IonButton\r\n                    expand=\"block\"\r\n                    shape=\"round\"\r\n                    fill=\"outline\"\r\n                    color=\"primary\"\r\n                    onClick={upload}\r\n                  >\r\n                    Submit\r\n                  </IonButton>\r\n                </IonCol>\r\n                <IonCol>\r\n                  <IonButton\r\n                    expand=\"block\"\r\n                    shape=\"round\"\r\n                    fill=\"outline\"\r\n                    color=\"danger\"\r\n                    onClick={() => {\r\n\r\n                      // Set back everything\r\n                      setTitle(\"\");\r\n                      setDescription(\"\");\r\n                      setImage(undefined);\r\n                      setLocation(undefined);\r\n                      setRedirect(\"explore\");\r\n                      \r\n                    }}\r\n                  >\r\n                    Cancel\r\n                  </IonButton>\r\n                </IonCol>\r\n              </IonRow>\r\n            </IonGrid>\r\n          </>\r\n        )}\r\n\r\n        {/* Toast */}\r\n        <IonToast\r\n          isOpen={toast !== \"\"}\r\n          onDidDismiss={() => setToast(\"\")}\r\n          message={toast}\r\n          duration={1500}\r\n        />\r\n        {/* Redirect */}\r\n        {redirect !== \"\" && <Redirect to={`/${redirect}`}></Redirect>}\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Upload;\r\n","import { useState, useEffect } from \"react\";\r\nimport { useCamera } from '@ionic/react-hooks/camera';\r\nimport { useFilesystem, base64FromPath } from '@ionic/react-hooks/filesystem';\r\nimport { useStorage } from '@ionic/react-hooks/storage';\r\nimport { isPlatform } from '@ionic/react';\r\nimport { CameraResultType, CameraSource, CameraPhoto, Capacitor, FilesystemDirectory } from \"@capacitor/core\";\r\nimport { Plugins } from '@capacitor/core';\r\n\r\nconst { Filesystem } = Plugins;\r\n\r\nconst PHOTO_STORAGE = \"photos\";\r\n\r\nexport function usePhotoGallery() {\r\n\r\n  const [photo, setPhoto] = useState<Photo>();\r\n  const { getPhoto } = useCamera();\r\n  const { deleteFile, readFile, writeFile } = useFilesystem();\r\n  const { get, set } = useStorage();\r\n\r\n  useEffect(() => {\r\n\r\n\r\n  }, [get, readFile]);\r\n  \r\n\r\n  const takePhoto = async (): Promise<Photo> => {\r\n    // Access camera photo\r\n    const cameraPhoto = await getPhoto({\r\n      resultType: CameraResultType.Uri,\r\n      source: CameraSource.Camera,\r\n      quality: 25\r\n    });\r\n    // Create filename based on date\r\n    const fileName = new Date().getTime() + '.jpeg';\r\n    // Save image\r\n    const savedFileImage = await savePicture(cameraPhoto, fileName);\r\n    // Set image into state\r\n    setPhoto(savedFileImage);\r\n    // Store Image to storage\r\n    set(PHOTO_STORAGE, JSON.stringify(savedFileImage));\r\n    // return result\r\n    return savedFileImage;\r\n  };\r\n\r\n  const convertBlobToBase64 = async(blob: Blob): Promise<string>  => {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.onerror = reject;\r\n      reader.onload = () => resolve(reader.result as string);\r\n      reader.readAsDataURL(blob);\r\n    });\r\n  }\r\n\r\n  const takePhotoFromGalerie = async(): Promise<Photo> => {\r\n      // Access galerie photo\r\n      const cameraPhoto = await getPhoto({\r\n        resultType: CameraResultType.Uri,\r\n        source: CameraSource.Photos,\r\n        quality: 25\r\n      });\r\n      // Create filename based on date\r\n      const fileName = new Date().getTime() + '.jpeg';\r\n      // Save image\r\n      const savedFileImage = await savePicture(cameraPhoto, fileName);\r\n      // Set image into state\r\n      setPhoto(savedFileImage);\r\n      // Store Image to storage\r\n      set(PHOTO_STORAGE, JSON.stringify(savedFileImage));\r\n      // return result\r\n      return savedFileImage;\r\n  }\r\n\r\n  const savePicture = async (photo: CameraPhoto, fileName: string): Promise<Photo> => {\r\n    let base64Data: string;\r\n    // \"hybrid\" will detect Cordova or Capacitor;\r\n    if (isPlatform('hybrid')) {\r\n      const file = await readFile({\r\n        path: photo.path!\r\n      });\r\n      base64Data = file.data;\r\n    } else {\r\n      base64Data = await base64FromPath(photo.webPath!);\r\n    }\r\n    const savedFile = await writeFile({\r\n      path: fileName,\r\n      data: base64Data,\r\n      directory: FilesystemDirectory.Data\r\n    });\r\n\r\n    if (isPlatform('hybrid')) {\r\n      // Display the new image by rewriting the 'file://' path to HTTP\r\n      // Details: https://ionicframework.com/docs/building/webview#file-protocol\r\n      return {\r\n        filepath: savedFile.uri,\r\n        webviewPath: Capacitor.convertFileSrc(savedFile.uri), \r\n      };\r\n    }\r\n    else {\r\n      // Use webPath to display the new image instead of base64 since it's \r\n      // already loaded into memory\r\n      return {\r\n        filepath: fileName,\r\n        webviewPath: photo.webPath,\r\n        data: base64Data\r\n      };\r\n    }\r\n  };\r\n\r\n\r\n  // const download = async(path:string) => {\r\n  //   const base64Data = await _readAsBase64(path);\r\n  //   const fileName = `${new Date().getTime()}.jpeg`;\r\n  //   // const image = await Filesystem.writeFile({\r\n  //   //   path: fileName,\r\n  //   //   data: base64Data,\r\n  //   //   directory: FilesystemDirectory.Documents\r\n  //   // });\r\n  //   return base64Data;\r\n  // }\r\n  // const _readAsBase64 = async(url: string): Promise<string> => {\r\n  //   const response = await fetch(url);\r\n  //   const blob = await response.blob();\r\n  //   return await _convertBlobToBase64(blob);\r\n  // }\r\n  // const _convertBlobToBase64 = async(blob: Blob): Promise<string> => {\r\n  //   return new Promise((resolve, reject) => {\r\n  //     const reader = new FileReader();\r\n  //     reader.onerror = () => reject();\r\n  //     reader.onload = () => resolve(reader.result as string);\r\n  //     reader.readAsDataURL(blob);\r\n  //   });\r\n  // }\r\n\r\n  return {\r\n    photo,\r\n    takePhoto,\r\n    takePhotoFromGalerie,\r\n    convertBlobToBase64\r\n  };\r\n}\r\n\r\nexport interface Photo {\r\n  filepath: string;\r\n  webviewPath?: string;\r\n  data?: string;\r\n}","import {\r\n  IonActionSheet\r\n} from \"@ionic/react\";\r\nimport { cameraOutline, closeOutline, imageOutline } from \"ionicons/icons\";\r\nimport React, { Dispatch, SetStateAction, useState } from \"react\";\r\nimport { Redirect } from \"react-router\";\r\nimport { Photo, usePhotoGallery } from \"../../hooks/usePhotoGallery\";\r\n\r\n\r\nconst ProfilePicSelectionModal: React.FC<{active: boolean, setShowActionSheet: Dispatch<SetStateAction<boolean>>, setLoading: Dispatch<SetStateAction<boolean>>}> = ({active, setShowActionSheet, setLoading}) => {\r\n\r\n  const [selectedRoute, setSelectedRoute] = useState(\"\");\r\n  const [image, setImage] = useState<Photo>();\r\n  \r\n  const { takePhoto, takePhotoFromGalerie } = usePhotoGallery();\r\n\r\n  return (\r\n      <>\r\n\r\n        {\r\n            selectedRoute === \"profile-pic\" && <Redirect to={{\r\n                pathname: \"/profile-pic\",\r\n                state: { image }\r\n            }}/>\r\n        }\r\n\r\n        <IonActionSheet\r\n            isOpen={active}\r\n            onDidDismiss={() => setShowActionSheet(false)}\r\n            buttons={[\r\n            {\r\n                text: \"Camera\",\r\n                icon: cameraOutline,\r\n                handler: () => {\r\n                    takePhoto()\r\n                    .then(image => {\r\n                        // User took image\r\n                        setLoading(true);\r\n                        setImage(image);\r\n                        setSelectedRoute(\"profile-pic\")\r\n                    })\r\n                    .catch(err => {\r\n                        // User Aborted Camera\r\n                        console.log(err)\r\n                    })\r\n                },\r\n            },\r\n            {\r\n                text: \"Galerie\",\r\n                icon: imageOutline,\r\n                handler: () => {\r\n                    takePhotoFromGalerie()\r\n                    .then(image => {\r\n                        setLoading(true)\r\n                        setImage(image);\r\n                        setSelectedRoute(\"profile-pic\");\r\n                    })\r\n                },\r\n            },\r\n            {\r\n                text: \"Close\",\r\n                icon: closeOutline,\r\n                handler: () => {\r\n                setShowActionSheet(false)\r\n                },\r\n            }\r\n            ]}\r\n        ></IonActionSheet>\r\n      </>\r\n  );\r\n};\r\n\r\nexport default ProfilePicSelectionModal;\r\n","import { auth, db } from \"../../helper/firebase\";\r\nimport { User } from \"../../model/User\";\r\n\r\n//Check Username\r\nexport async function checkUsername(userName: any): Promise<boolean> {\r\n   \r\n  var usernameCheck = db.collection(\"users\");\r\n\r\n  const data = await usernameCheck.get();\r\n  let typedDocs: User[] = [];\r\n  data.docs.forEach((doc: any) => typedDocs.push(doc.data().username));\r\n  var len = typedDocs.length;\r\n  let currentUsername:string = \"\";\r\n\r\n  await db.collection(\"users\")\r\n                  .where(\"email\", \"==\", auth.currentUser?.email)\r\n                  .get()\r\n                  .then((querySnapshot) => {\r\n                    querySnapshot.forEach((doc) => {\r\n                      currentUsername = doc.data().username;\r\n                    })\r\n                  });\r\n \r\n  for (var i = 0; i < len; i++) {\r\n    if ((typedDocs[i] === userName && !(currentUsername == userName)) || userName == \"\") {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\n","import {\r\n  IonContent,\r\n  IonHeader,\r\n  IonPage,\r\n  IonTitle,\r\n  IonToolbar,\r\n  IonItem,\r\n  IonAvatar,\r\n  IonImg,\r\n  IonLabel,\r\n  IonGrid,\r\n  IonRow,\r\n  IonCol,\r\n  IonButton,\r\n  IonModal,\r\n  IonButtons,\r\n  IonInput,\r\n  IonTextarea,\r\n  IonAlert,\r\n} from \"@ionic/react\";\r\nimport React, { Dispatch, SetStateAction, useContext, useEffect, useState } from \"react\";\r\nimport ProfilePicSelectionModal from \"../../components/ProfilePicSelectionModal/ProfilePicSelectionModal\";\r\nimport { auth, db } from \"../../helper/firebase\";\r\nimport { checkUsername } from \"./checkUsername\";\r\n\r\nconst Profile: React.FC<{ setLoading: Dispatch<SetStateAction<boolean>> }> = ({setLoading}) => {\r\n\r\n  // modal to change profile picture\r\n  const [profileSelectionModal, setProfileSelectionModal] = useState(false);\r\n\r\n  const [EditProfile, setEditProfile] = useState<boolean>(false);\r\n  const [username, setUsername] = useState<string>();\r\n  const [firstName, setFirstName] = useState<string>();\r\n  const [lastName, setLastName] = useState<string>();\r\n  const [email, setEmail] = useState<string>();\r\n  const [bio, setBio] = useState<string>();\r\n  const [showAlert, setShowAlert] = useState<boolean>(false);\r\n  const [verified, setVerified] = useState<string>(\"\");\r\n  const [profilepic, setProfilepic] = useState(undefined)\r\n\r\n  const [errorUsernameLabel, setErrorUsernameLabel] = useState<string>(\"\");\r\n  const [errorUsernameText, setErrorUsernameText] = useState<string>(\"\");\r\n\r\n  //const [isUsernameCorrect, setUsernameCorrect] = useState<boolean>(true);\r\n  let isUsernameCorrect: boolean = true;\r\n\r\n  const [errorEmailLabel, setErrorEmailLabel] = useState<string>(\"\");\r\n  const [errorEmailText, setErrorEmailText] = useState<string>(\"\");\r\n\r\n  const [isEmailCorrect, setEmailCorrect] = useState<boolean>(true);\r\n\r\n  useEffect(() => {\r\n    db.collection(\"users\")\r\n      .where(\"email\", \"==\", auth.currentUser?.email)\r\n      .get()\r\n      .then((querySnapshot) => {\r\n        querySnapshot.forEach((doc) => {\r\n          setProfilepic(doc.data().profilepic);\r\n          setUsername(doc.data().username);\r\n          setEmail(doc.data().email);\r\n          setFirstName(doc.data().userFirstName);\r\n          setLastName(doc.data().userLastName);\r\n          setBio(doc.data().biography);\r\n\r\n        });\r\n      });\r\n  }, [EditProfile]);\r\n\r\n  useEffect(() => {\r\n    if (auth.currentUser?.emailVerified) {\r\n      setVerified(\"none\");\r\n    } else {\r\n      setVerified(\"\");\r\n    }\r\n  });\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonTitle>Profile</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent fullscreen>\r\n        <IonGrid>\r\n          <IonRow>\r\n            <IonCol>\r\n              <IonItem>\r\n                <IonAvatar\r\n                  slot=\"start\"\r\n                  style={{ height: \"100px\", width: \"100px\" }}\r\n                  onClick={() => {\r\n                    setProfileSelectionModal(true);\r\n                  }}\r\n                >\r\n                  <IonImg src={ profilepic ? profilepic : \"https://im-coder.com/images4/15590312779219.png\" } />\r\n                </IonAvatar>\r\n\r\n                <ProfilePicSelectionModal\r\n                  active={profileSelectionModal}\r\n                  setShowActionSheet={setProfileSelectionModal}\r\n                  setLoading={setLoading}\r\n                />\r\n\r\n                <IonGrid>\r\n                  <IonRow>\r\n                    <IonCol style={{ textAlign: \"center\" }}>14</IonCol>\r\n                    <IonCol style={{ textAlign: \"center\" }}>3</IonCol>\r\n                  </IonRow>\r\n                  <IonRow>\r\n                    <IonCol style={{ textAlign: \"center\" }}>Likes</IonCol>\r\n                    <IonCol style={{ textAlign: \"center\" }}>Beiträge</IonCol>\r\n                  </IonRow>\r\n                </IonGrid>\r\n              </IonItem>\r\n            </IonCol>\r\n          </IonRow>\r\n          <IonRow>\r\n            <IonCol>\r\n              <IonItem>\r\n                <IonGrid style={{ paddingLeft: \"0px\" }}>\r\n                  <IonRow>\r\n                    <IonCol>\r\n                      <IonLabel style={{ fontSize: \"20px\" }}>\r\n                        {username}\r\n                      </IonLabel>\r\n                    </IonCol>\r\n                  </IonRow>\r\n                  <IonRow>\r\n                    <IonCol>\r\n                      <IonLabel\r\n                        className=\"ion-text-wrap\"\r\n                        style={{ fontSize: \"15px\" }}\r\n                      >\r\n                        {bio}\r\n                      </IonLabel>\r\n                    </IonCol>\r\n                  </IonRow>\r\n                </IonGrid>\r\n              </IonItem>\r\n            </IonCol>\r\n          </IonRow>\r\n          <IonRow>\r\n            <IonCol style={{ textAlign: \"center\" }}>\r\n              <IonButton\r\n                shape=\"round\"\r\n                fill=\"outline\"\r\n                color=\"primary\"\r\n                onClick={() => setEditProfile(true)}\r\n              >\r\n                Edit Profile\r\n              </IonButton>\r\n            </IonCol>\r\n            <IonCol style={{ textAlign: \"center\", display: String(verified) }}>\r\n              <IonButton\r\n                shape=\"round\"\r\n                fill=\"outline\"\r\n                color=\"danger\"\r\n                onClick={async () => {\r\n                  setShowAlert(true);\r\n                  await auth.currentUser?.sendEmailVerification();\r\n                }}\r\n              >\r\n                Verify Email\r\n              </IonButton>\r\n            </IonCol>\r\n          </IonRow>\r\n        </IonGrid>\r\n        <IonAlert\r\n          isOpen={showAlert}\r\n          onDidDismiss={() => setShowAlert(false)}\r\n          cssClass=\"my-custom-class\"\r\n          header={\"Verify E-Mail\"}\r\n          message={\"Email was sent to you to verify your email.\"}\r\n          buttons={[\"OK\"]}\r\n        />\r\n        <IonModal isOpen={EditProfile}>\r\n          <IonHeader>\r\n            <IonToolbar>\r\n              <IonButtons slot=\"end\">\r\n                <IonButton\r\n                  color=\"primary\"\r\n                  onClick={() => {\r\n                    setEditProfile(false);\r\n                    setErrorEmailLabel(\"\");\r\n                    setErrorEmailText(\"\");\r\n                    setErrorUsernameLabel(\"\");\r\n                    setErrorUsernameText(\"\");\r\n                  }}\r\n                >\r\n                  Close\r\n                </IonButton>\r\n              </IonButtons>\r\n              <IonTitle>Edit Profile</IonTitle>\r\n            </IonToolbar>\r\n          </IonHeader>\r\n          <IonContent fullscreen>\r\n            <IonItem>\r\n              <IonLabel color={errorUsernameLabel} position=\"floating\">\r\n                Username\r\n              </IonLabel>\r\n              <IonInput\r\n                color={errorUsernameText}\r\n                value={username}\r\n                type=\"text\"\r\n                onIonChange={async (e) => setUsername(e.detail.value!)}\r\n              ></IonInput>\r\n            </IonItem>\r\n            <IonItem>\r\n              <IonLabel position=\"floating\">First Name</IonLabel>\r\n              <IonInput\r\n                value={firstName}\r\n                type=\"text\"\r\n                onIonChange={(e) => setFirstName(e.detail.value!)}\r\n              ></IonInput>\r\n            </IonItem>\r\n            <IonItem>\r\n              <IonLabel position=\"floating\">Last Name</IonLabel>\r\n              <IonInput\r\n                value={lastName}\r\n                type=\"text\"\r\n                onIonChange={(e) => setLastName(e.detail.value!)}\r\n              ></IonInput>\r\n            </IonItem>\r\n            <IonItem>\r\n              <IonLabel color={errorEmailLabel} position=\"floating\">\r\n                E-Mail\r\n              </IonLabel>\r\n              <IonInput\r\n                color={errorEmailText}\r\n                value={email}\r\n                type=\"email\"\r\n                onIonChange={(e) => setEmail(e.detail.value!)}\r\n              ></IonInput>\r\n            </IonItem>\r\n            <IonItem>\r\n              <IonLabel position=\"stacked\">Biography</IonLabel>\r\n              <IonTextarea\r\n                value={bio}\r\n                onIonChange={(e) => setBio(e.detail.value!)}\r\n              ></IonTextarea>\r\n            </IonItem>\r\n            <IonGrid>\r\n              <IonRow>\r\n                <IonCol style={{ textAlign: \"center\" }}>\r\n                  <IonButton\r\n                    expand=\"block\"\r\n                    shape=\"round\"\r\n                    fill=\"outline\"\r\n                    color=\"primary\"\r\n                    onClick={() => {\r\n                      setEditProfile(false);\r\n                      setErrorEmailLabel(\"\");\r\n                      setErrorEmailText(\"\");\r\n                      setErrorUsernameLabel(\"\");\r\n                      setErrorUsernameText(\"\");\r\n                    }}\r\n                  >\r\n                    Cancel\r\n                  </IonButton>\r\n                </IonCol>\r\n                <IonCol style={{ textAlign: \"center\" }}>\r\n                  <IonButton\r\n                    expand=\"block\"\r\n                    shape=\"round\"\r\n                    fill=\"outline\"\r\n                    color=\"primary\"\r\n                    onClick={async () => {\r\n                      isUsernameCorrect = true;\r\n                      setEmailCorrect(true);\r\n\r\n                      const data = {\r\n                        username: username,\r\n                        userFirstName: firstName,\r\n                        userLastName: lastName,\r\n                        email: email,\r\n                        biography: bio,\r\n                        profilepic: profilepic\r\n                      };\r\n\r\n                      await checkUsername(username)\r\n                        .then(async (check) => {\r\n                          if (check) {\r\n                            setErrorUsernameLabel(\"danger\");\r\n                            setErrorUsernameText(\"danger\");\r\n                            isUsernameCorrect = false;\r\n                          } else {\r\n                            setErrorUsernameLabel(\"\");\r\n                            setErrorUsernameText(\"\");\r\n                            isUsernameCorrect = true;\r\n                          }\r\n                        })\r\n                        .then(async () => {\r\n                          if (email != auth.currentUser?.email) {\r\n                            await auth.currentUser\r\n                              ?.updateEmail(String(email))\r\n                              .then(async function () {\r\n                                console.log(\"Email-Update successfull!\");\r\n                                setEmailCorrect(true);\r\n                                await auth.currentUser\r\n                                  ?.sendEmailVerification()\r\n                                  .then(async function () {\r\n                                    console.log(\"Send Email successfull!\");\r\n                                    setErrorEmailLabel(\"\");\r\n                                    setErrorEmailText(\"\");\r\n                                    if (isUsernameCorrect) {\r\n                                      setErrorUsernameLabel(\"\");\r\n                                      setErrorUsernameText(\"\");\r\n                                      await db\r\n                                        .collection(\"users\")\r\n                                        .doc(auth.currentUser?.uid)\r\n                                        .set(data);\r\n                                      setEditProfile(false);\r\n                                    }\r\n                                  })\r\n                                  .catch(function (error) {\r\n                                    console.log(\"Send Email ERROR!\");\r\n                                  });\r\n                              })\r\n                              .catch(function (error) {\r\n                                console.log(\"Email-Update ERROR!\");\r\n                                setErrorEmailLabel(\"danger\");\r\n                                setErrorEmailText(\"danger\");\r\n                                setEmailCorrect(false);\r\n                              });\r\n                          } else if (isUsernameCorrect) {\r\n                            setErrorUsernameLabel(\"\");\r\n                            setErrorUsernameText(\"\");\r\n                            setErrorEmailLabel(\"\");\r\n                            setErrorEmailText(\"\");\r\n                            await db\r\n                              .collection(\"users\")\r\n                              .doc(auth.currentUser?.uid)\r\n                              .set(data);\r\n                            setEditProfile(false);\r\n                          }\r\n                        });\r\n                    }}\r\n                  >\r\n                    Save\r\n                  </IonButton>\r\n                </IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol style={{ textAlign: \"center\" }}>\r\n                  <IonButton\r\n                    shape=\"round\"\r\n                    fill=\"outline\"\r\n                    color=\"danger\"\r\n                    onClick={() => auth.signOut()}\r\n                  >\r\n                    Logout\r\n                  </IonButton>\r\n                </IonCol>\r\n              </IonRow>\r\n            </IonGrid>\r\n          </IonContent>\r\n        </IonModal>\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import {\r\n  IonActionSheet\r\n} from \"@ionic/react\";\r\nimport { cameraOutline, closeOutline, imageOutline } from \"ionicons/icons\";\r\nimport React, { Dispatch, SetStateAction, useState } from \"react\";\r\nimport { Redirect } from \"react-router\";\r\nimport { Photo, usePhotoGallery } from \"../../hooks/usePhotoGallery\";\r\n\r\n\r\nconst UploadSelectionModal: React.FC<{active: boolean, setShowActionSheet: Dispatch<SetStateAction<boolean>>, setLoading: Dispatch<SetStateAction<boolean>>}> = ({active, setShowActionSheet, setLoading}) => {\r\n\r\n  const [selectedRoute, setSelectedRoute] = useState(\"\");\r\n  const [image, setImage] = useState<Photo>();\r\n  \r\n  const { takePhoto, takePhotoFromGalerie } = usePhotoGallery();\r\n\r\n  return (\r\n      <>\r\n\r\n        {\r\n            selectedRoute === \"upload\" && <Redirect to={{\r\n                pathname: \"/upload\",\r\n                state: { image }\r\n            }}/>\r\n        }\r\n\r\n        <IonActionSheet\r\n            isOpen={active}\r\n            onDidDismiss={() => setShowActionSheet(false)}\r\n            buttons={[\r\n            {\r\n                text: \"Camera\",\r\n                icon: cameraOutline,\r\n                handler: () => {\r\n                    takePhoto()\r\n                    .then(image => {\r\n                        // User took image\r\n                        setLoading(true);\r\n                        setImage(image);\r\n                        setSelectedRoute(\"upload\")\r\n                    })\r\n                    .catch(err => {\r\n                        // User Aborted Camera\r\n                        console.log(err)\r\n                    })\r\n                },\r\n            },\r\n            {\r\n                text: \"Galerie\",\r\n                icon: imageOutline,\r\n                handler: () => {\r\n                    takePhotoFromGalerie()\r\n                    .then(image => {\r\n                        setLoading(true)\r\n                        setImage(image);\r\n                        setSelectedRoute(\"upload\");\r\n                    })\r\n                },\r\n            },\r\n            {\r\n                text: \"Close\",\r\n                icon: closeOutline,\r\n                handler: () => {\r\n                setShowActionSheet(false)\r\n                },\r\n            }\r\n            ]}\r\n        ></IonActionSheet>\r\n      </>\r\n  );\r\n};\r\n\r\nexport default UploadSelectionModal;\r\n","function degreesToRadians(degrees: number) {\r\n  return (degrees * Math.PI) / 180;\r\n}\r\n\r\nexport function distanceInKm(lat1: number, lon1: number, lat2: number, lon2: number) {\r\n  var earthRadiusKm = 6371;\r\n\r\n  var dLat = degreesToRadians(lat2 - lat1);\r\n  var dLon = degreesToRadians(lon2 - lon1);\r\n\r\n  lat1 = degreesToRadians(lat1);\r\n  lat2 = degreesToRadians(lat2);\r\n\r\n  var a =\r\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n    Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);\r\n  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n  return earthRadiusKm * c;\r\n}","import {\r\n  IonCard,\r\n  IonCardContent,\r\n  IonCardHeader,\r\n  IonCardSubtitle,\r\n  IonCardTitle,\r\n  IonIcon,\r\n  IonImg,\r\n  IonItem,\r\n  IonLabel,\r\n  IonText,\r\n} from \"@ionic/react\";\r\nimport { pin } from \"ionicons/icons\";\r\nimport React from \"react\";\r\nimport { Image } from \"../../model/Image\";\r\n\r\ninterface ContainerProps {\r\n  image: Image;\r\n}\r\n\r\nconst ExploreCard: React.FC<ContainerProps> = ({ image }) => {\r\n  return (\r\n    <IonCard className=\"my-ion-card\">\r\n      {/* Coordinated */}\r\n      <IonItem>\r\n        <IonIcon icon={pin} slot=\"start\" />\r\n        <IonLabel>\r\n          {image.location.position\r\n            ? image.location.position\r\n            : image.location.coords.latitude +\r\n              \" \" +\r\n              image.location.coords.longitude}\r\n        </IonLabel>\r\n      </IonItem>\r\n\r\n      {/* Distance */}\r\n      {image.distance ? (\r\n        <IonItem>\r\n          <IonLabel>\r\n            {`${image.distance\r\n              .toString()\r\n              .slice(0, 4)} km away from you`}\r\n          </IonLabel>\r\n        </IonItem>\r\n      ) : (\r\n        <IonItem>\r\n          <IonLabel>{`Near you`}</IonLabel>\r\n        </IonItem>\r\n      )}\r\n\r\n      <IonCardHeader>\r\n        <IonCardSubtitle>{image.user}</IonCardSubtitle>\r\n        <IonCardTitle>{image.title}</IonCardTitle>\r\n      </IonCardHeader>\r\n\r\n      <IonCardContent>\r\n        <IonImg src={image.url}></IonImg>\r\n        <br />\r\n        <IonText style={{ fontSize: \"large\" }}>{image.description}</IonText>\r\n      </IonCardContent>\r\n    </IonCard>\r\n  );\r\n};\r\n\r\nexport default ExploreCard;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  IonContent,\r\n  IonHeader,\r\n  IonPage,\r\n  IonTitle,\r\n  IonToolbar,\r\n  IonSearchbar,\r\n  IonChip,\r\n  IonLabel,\r\n  IonListHeader,\r\n  IonRow,\r\n  IonCol,\r\n  IonGrid,\r\n  IonImg,\r\n  IonPopover,\r\n} from \"@ionic/react\";\r\nimport { db } from \"../../helper/firebase\";\r\nimport { Image } from \"../../model/Image\";\r\nimport { GeolocationPosition, Plugins } from \"@capacitor/core\";\r\nimport { distanceInKm } from \"../../hooks/evaluateDistance\";\r\nimport ExploreCard from \"../../components/ExploreCard/ExploreCard\";\r\nimport \"./Search.css\";\r\n\r\nconst { Geolocation } = Plugins;\r\n\r\nconst Search: React.FC = () => {\r\n  const [filter, setFilter] = useState(\"Location\");\r\n  const [images, setImages] = useState<Array<Image>>([]);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const [popPic, setPopPic] = useState<Image>();\r\n  // Geoinformation\r\n  const [location, setLocation] = useState<GeolocationPosition>();\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      // push location to state\r\n      setLocation(await Geolocation.getCurrentPosition());\r\n\r\n      console.log(\"Initial load...\");\r\n\r\n      setImages(await fetchImages());\r\n    })();\r\n  }, []);\r\n\r\n  async function fetchImages(): Promise<Image[]> {\r\n    // fetch images from firebase\r\n    const ref = db.collection(\"images\");\r\n    const data = await ref.get();\r\n\r\n    // load images to typed docs\r\n    let t: Image[] = [];\r\n    data.docs.forEach((doc: any) => t.push(doc.data()));\r\n    t.forEach((element: Image) => {\r\n      if (location !== undefined && element.distance == undefined) {\r\n        element.distance = distanceInKm(\r\n          location?.coords.latitude,\r\n          location?.coords.longitude,\r\n          element.location.coords.latitude,\r\n          element.location.coords.longitude\r\n        );\r\n      }\r\n    });\r\n\r\n    return t;\r\n  }\r\n\r\n  function filterItems(searchText: string) {\r\n    console.log(\"filtering\", searchText);\r\n\r\n    if (searchText === \"\" || searchText === null || searchText === undefined) {\r\n      fetchImages().then((res) => {\r\n        setImages(res);\r\n      });\r\n    } else if (filter === \"Location\") {\r\n      fetchImages().then((res) => {\r\n        let i: Image[] = [];\r\n        res.forEach((image) => {\r\n          if (image.location.position?.includes(searchText)) {\r\n            i.push(image);\r\n          }\r\n        });\r\n        setImages(i);\r\n      });\r\n    } else if (filter === \"Title\") {\r\n      fetchImages().then((res) => {\r\n        let i: Image[] = [];\r\n        res.forEach((image) => {\r\n          if (image.title.includes(searchText)) {\r\n            i.push(image);\r\n          }\r\n        });\r\n        setImages(i);\r\n      });\r\n    } else if (filter === \"User\") {\r\n      fetchImages().then((res) => {\r\n        let i: Image[] = [];\r\n        res.forEach((image) => {\r\n          if (image.user.includes(searchText)) {\r\n            i.push(image);\r\n          }\r\n        });\r\n        setImages(i);\r\n      });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonTitle>Search</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent fullscreen>\r\n        <IonSearchbar\r\n          onIonChange={(e) => {\r\n            filterItems((e.target as HTMLInputElement).value);\r\n          }}\r\n          showCancelButton=\"never\"\r\n        ></IonSearchbar>\r\n\r\n        <IonListHeader>Filter: {filter}</IonListHeader>\r\n        <IonChip\r\n          style={\r\n            filter === \"Location\"\r\n              ? { backgroundColor: \"lightgray\", color: \"black\" }\r\n              : {}\r\n          }\r\n          onClick={(e) => {\r\n            setFilter(\"Location\");\r\n          }}\r\n        >\r\n          <IonLabel>Location</IonLabel>\r\n        </IonChip>\r\n        <IonChip\r\n          style={\r\n            filter === \"User\"\r\n              ? { backgroundColor: \"lightgray\", color: \"black\" }\r\n              : {}\r\n          }\r\n          onClick={(e) => {\r\n            setFilter(\"User\");\r\n          }}\r\n        >\r\n          <IonLabel>User</IonLabel>\r\n        </IonChip>\r\n        <IonChip\r\n          style={\r\n            filter === \"Title\"\r\n              ? { backgroundColor: \"lightgray\", color: \"black\" }\r\n              : {}\r\n          }\r\n          onClick={(e) => {\r\n            setFilter(\"Title\");\r\n          }}\r\n        >\r\n          <IonLabel>Title</IonLabel>\r\n        </IonChip>\r\n\r\n        <IonGrid>\r\n          <IonRow>\r\n            {images.map((p: Image) => {\r\n              return (\r\n                <IonCol size=\"4\">\r\n                  <IonImg\r\n                    onClick={(e) => {\r\n                      setShowPopup(true);\r\n                      setPopPic(p);\r\n                    }}\r\n                    src={p.url}\r\n                    style={{\r\n                      objectFit: \"cover\",\r\n                      height: \"100%\",\r\n                      width: \"100%\",\r\n                    }}\r\n                  ></IonImg>\r\n                  <p\r\n                    style={{\r\n                      position: \"absolute\",\r\n                      bottom: \"-10px\",\r\n                      right: \"10px\",\r\n                      backgroundColor: \"rgba(0,0,0,0.5)\",\r\n                      borderRadius: \"5px\",\r\n                    }}\r\n                  >\r\n                    {p.distance?.toPrecision(4)}\r\n                    km\r\n                  </p>\r\n                </IonCol>\r\n              );\r\n            })}\r\n          </IonRow>\r\n        </IonGrid>\r\n        <IonPopover\r\n          cssClass=\"my-pop-over\"\r\n          backdropDismiss={true}\r\n          showBackdrop={false}\r\n          isOpen={showPopup}\r\n          onDidDismiss={(e) => setShowPopup(false)}\r\n        >\r\n          {popPic && <ExploreCard image={popPic} />}\r\n        </IonPopover>\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n","\r\nexport async function presentAlert(message:any) {\r\n    const alert = document.createElement('ion-alert'); \r\n    alert.message = message;\r\n    alert.buttons = ['OK'];\r\n  \r\n    document.body.appendChild(alert);\r\n    await alert.present();\r\n  \r\n    const { role } = await alert.onDidDismiss();\r\n    console.log('onDidDismiss resolved with role', role);\r\n  }\r\n\r\n  export async function presentAlertWithHeader(message:any, header:any) {\r\n    const alert = document.createElement('ion-alert'); \r\n    alert.header = header;\r\n    alert.message = message;\r\n    alert.buttons = ['OK'];\r\n  \r\n    document.body.appendChild(alert);\r\n    await alert.present();\r\n  \r\n    const { role } = await alert.onDidDismiss();\r\n    console.log('onDidDismiss resolved with role', role);\r\n  }","import { db } from \"../helper/firebase\";\r\nimport { User } from \"../model/User\";\r\n\r\n\r\n//Check Username\r\nexport async function checkUsername(userName: any): Promise<boolean> {\r\n   \r\n  var usernameCheck = db.collection(\"users\");\r\n\r\n  const data = await usernameCheck.get();\r\n  let typedDocs: User[] = [];\r\n  data.docs.forEach((doc: any) => typedDocs.push(doc.data().username));\r\n  var len = typedDocs.length; \r\n \r\n  for (var i = 0; i < len; i++) {\r\n    if (typedDocs[i] === userName) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\n","import { auth, db } from \"../../helper/firebase\";\r\nimport { presentAlert } from \"../alert\";\r\nimport { checkUsername } from \"../checkUsername\";\r\n\r\nexport async function signInWithUsernameAndPassword(\r\n  username: any,\r\n  password: any\r\n): Promise<any> {\r\n  \r\n  if (await checkUsername(username)) {\r\n    await db.collection(\"users\")\r\n      .where(\"username\", \"==\", username)\r\n      .get()\r\n      .then((querySnapshot) => {\r\n        querySnapshot.forEach(async (doc) => {\r\n         await auth\r\n            .signInWithEmailAndPassword(doc.data().email, password)\r\n            .catch((err) => presentAlert(\"Your Login credentials are incorrect\"));\r\n        });\r\n      });\r\n  } else {\r\n    await auth\r\n      .signInWithEmailAndPassword(username, password)\r\n      .catch((err) => presentAlert(\"Your Login credentials are incorrect\"));\r\n  }\r\n}\r\n","import { auth } from \"../../helper/firebase\";\r\nimport { presentAlert } from \"../alert\";\r\nimport { checkUsername } from \"../checkUsername\";\r\nimport { signInWithUsernameAndPassword } from \"./signInWithUsernameAndPassword\";\r\n\r\n\r\nexport async function checkLogin(username: any, password: any) {\r\n    \r\n    if (username.length === 0) presentAlert(\"Email or Username Required\");\r\n    else if (password.length === 0) presentAlert(\"Password Required\");   \r\n    else {\r\n        await signInWithUsernameAndPassword(username, password);      \r\n     }    \r\n}","import {\r\n  IonPage,\r\n  IonHeader,\r\n  IonToolbar,\r\n  IonTitle,\r\n  IonContent,\r\n  IonInput,\r\n  IonButton,\r\n  IonItem,\r\n  IonLabel,\r\n  IonIcon,\r\n  IonGrid,\r\n  IonAlert,\r\n  IonRouterLink,\r\n} from \"@ionic/react\";\r\nimport { \r\n  logInOutline  \r\n} from \"ionicons/icons\";\r\nimport React, { useCallback, useState } from \"react\";\r\nimport \"./Login.css\";\r\nimport { auth } from \"../../helper/firebase\";\r\n\r\nimport \"firebase/auth\";\r\nimport { checkLogin } from \"../../hooks/login/checkLogin\";\r\nimport { emailVerified } from \"../../hooks/register/emailVerify\";\r\n\r\nconst Login: React.FC = () => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");  \r\n  const [alertPasswordForgotenText, setalertPasswordForgotenText] = useState(\r\n    false\r\n  );  \r\n\r\n  const onUsernameNameChange = useCallback((e) => setUsername(e.detail?.value), []);\r\n  const onPasswordChange = useCallback((e) => setPassword(e.detail?.value), []);\r\n\r\n  const onLoginClick = useCallback(async () => {\r\n    \r\n    await checkLogin(username, password);   \r\n  \r\n\r\n  }, [username, password]);\r\n\r\n  \r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>          \r\n          <IonTitle>Login</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n\r\n      <IonContent fullscreen>\r\n        <IonGrid>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\">Email or Username</IonLabel>\r\n            <IonInput\r\n              onIonChange={onUsernameNameChange}\r\n              value={username}\r\n              class=\"input\"\r\n              type=\"text\"\r\n            ></IonInput>\r\n          </IonItem>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\">Password</IonLabel>\r\n            <IonInput\r\n              onIonChange={onPasswordChange}\r\n              value={password}\r\n              type=\"password\"\r\n            ></IonInput>\r\n          </IonItem>\r\n          <br />\r\n          <div className=\"LogInButton\">\r\n            <IonButton onClick={onLoginClick} expand=\"block\">\r\n              Login\r\n              <IonIcon icon={logInOutline} />\r\n            </IonButton>\r\n          </div>\r\n          <br />\r\n          <br />\r\n          <br />\r\n          <div className=\"LogInButton\">\r\n            <IonRouterLink routerLink={\"/register\"}>\r\n              CREATE A NEW ACCOUNT\r\n            </IonRouterLink>\r\n          </div>\r\n          <br />\r\n          <div className=\"LogInButton\">\r\n            <IonRouterLink onClick={() => setalertPasswordForgotenText(true)}>\r\n              I FORGOT MY PASSWORD\r\n            </IonRouterLink>\r\n          </div>\r\n        </IonGrid>\r\n      </IonContent>    \r\n      <IonAlert\r\n        isOpen={alertPasswordForgotenText}\r\n        onDidDismiss={() => setalertPasswordForgotenText(false)}\r\n        message={\"Please Type In your Email\"}\r\n        inputs={[\r\n          {\r\n            name: \"emailPasswordForgoten\",\r\n            type: \"email\",\r\n            placeholder: \"Email\",\r\n          },\r\n        ]}\r\n        buttons={[\r\n          {\r\n            text: \"Send\",\r\n            handler: (data) => {\r\n              auth.sendPasswordResetEmail(data.emailPasswordForgoten);\r\n            },\r\n          },\r\n        ]}\r\n      />\r\n    </IonPage>\r\n  );\r\n};\r\nexport default Login;\r\n","export enum PasswordCheckStrength {\r\n    Short,\r\n    Common,\r\n    Weak,\r\n    Ok,\r\n    Strong,\r\n};\r\n\r\n// Object to check password strengths and various properties\r\nexport class PasswordCheckService {\r\n\r\n    // Expected length of all passwords\r\n    public static get MinimumLength(): number {\r\n        return 5;\r\n    }\r\n\r\n    // Regex to check for a common password string - all based on 5+ length passwords\r\n    private commonPasswordPatterns = /passw.*|12345.*|09876.*|qwert.*|asdfg.*|zxcvb.*|footb.*|baseb.*|drago.*/;\r\n\r\n    //\r\n    // Checks if the given password matches a set of common password\r\n    //\r\n    public isPasswordCommon(password: string): boolean {\r\n        return this.commonPasswordPatterns.test(password);\r\n    }\r\n\r\n    //\r\n    // Returns the strength of the current password\r\n    //\r\n    public checkPasswordStrength(password: string): PasswordCheckStrength {\r\n\r\n        // Build up the strenth of our password\r\n        let numberOfElements = 0;\r\n        numberOfElements = /.*[a-z].*/.test(password) ? ++numberOfElements : numberOfElements;      // Lowercase letters\r\n        numberOfElements = /.*[A-Z].*/.test(password) ? ++numberOfElements : numberOfElements;      // Uppercase letters\r\n        numberOfElements = /.*[0-9].*/.test(password) ? ++numberOfElements : numberOfElements;      // Numbers\r\n        numberOfElements = /[^a-zA-Z0-9]/.test(password) ? ++numberOfElements : numberOfElements;   // Special characters (inc. space)\r\n\r\n        // Assume we have a poor password already\r\n        let currentPasswordStrength = PasswordCheckStrength.Short;\r\n\r\n        // Check then strenth of this password using some simple rules\r\n        if (password === null || password.length < PasswordCheckService.MinimumLength) {\r\n            currentPasswordStrength = PasswordCheckStrength.Short;\r\n        } else if (this.isPasswordCommon(password) === true) {\r\n            currentPasswordStrength = PasswordCheckStrength.Common;\r\n        } else if (numberOfElements === 0 || numberOfElements === 1 || numberOfElements === 2) {\r\n            currentPasswordStrength = PasswordCheckStrength.Weak;\r\n        } else if (numberOfElements === 3) {\r\n            currentPasswordStrength = PasswordCheckStrength.Ok;\r\n        } else {\r\n            currentPasswordStrength = PasswordCheckStrength.Strong;\r\n        }\r\n\r\n        // Return the strength of this password\r\n        return currentPasswordStrength;\r\n    }\r\n}","import { auth } from \"../../helper/firebase\";\r\nimport { presentAlert } from \"../alert\";\r\n\r\nexport async function emailVerified(): Promise<boolean> { \r\n    \r\n   \r\n  if (auth.currentUser?.emailVerified) {       \r\n    return true;\r\n  } else {       \r\n    return false;\r\n  }  \r\n}\r\n\r\nexport async function sendEmailVerify() {\r\n    auth.currentUser?.sendEmailVerification();    \r\n}","import { auth, db } from \"../../helper/firebase\";\r\nimport { presentAlert } from \"../alert\";\r\nimport { sendEmailVerify } from \"./emailVerify\";\r\n\r\n\r\n\r\n\r\nexport async function register(\r\n  password: any,\r\n  email: any,\r\n  userFirstName: any,\r\n  userLastName: any,\r\n  userName: any\r\n): Promise<any> {\r\n\r\n  await  auth\r\n    .createUserWithEmailAndPassword(email, password)\r\n    .then(async (userCredential) => {\r\n      var user = userCredential.user;\r\n\r\n      sendEmailVerify();    \r\n      const date: Date = new Date();\r\n\r\n      const data = {\r\n        username: userName,\r\n        userFirstName: userFirstName,\r\n        userLastName: userLastName,\r\n        email: email,       \r\n      };\r\n      await db.collection(\"users\")\r\n        .doc(auth.currentUser?.uid)\r\n        .set(data)\r\n        .catch((err) => presentAlert(err.message));\r\n    })    \r\n    .catch((err) => presentAlert(err.message));    \r\n  return \"\";\r\n}\r\n","import { presentAlert } from \"../alert\";\r\nimport { checkUsername } from \"../checkUsername\";\r\nimport { register } from \"./register\";\r\n\r\nexport async function checkRegister(\r\n  confirmPassword: any,\r\n  password: any,\r\n  email: any,\r\n  userFirstName: any,\r\n  userLastName: any,\r\n  userName: any\r\n): Promise<any> {\r\n  if (userName.length === 0) presentAlert(\"Username Required\");\r\n  else if (await checkUsername(userName)) presentAlert(\"Username already taken\");\r\n  else if (userFirstName.length === 0) presentAlert(\"Firstname Required\");\r\n  else if (userLastName.length === 0) presentAlert(\"Secondname Required\");\r\n  else if (email.length === 0) presentAlert(\"Email Required\");\r\n  else if (password.length === 0) presentAlert(\"Password Required\");\r\n  else if (password.length < 6) presentAlert(\"Password to short\");\r\n  else if (confirmPassword !== password) presentAlert(\"Password don't match\");\r\n  else {\r\n    await register(password, email, userFirstName, userLastName, userName);   \r\n  }\r\n}\r\n","import {\r\n  IonPage,\r\n  IonHeader,\r\n  IonToolbar,\r\n  IonTitle,\r\n  IonContent,\r\n  IonButtons,\r\n  IonButton,\r\n  IonIcon,\r\n  IonInput,\r\n  IonItem,\r\n  IonLabel,\r\n  IonGrid,\r\n  IonAlert,  \r\n} from \"@ionic/react\";\r\nimport { chevronBackOutline, personAddOutline } from \"ionicons/icons\";\r\nimport React, { useCallback, useState } from \"react\";\r\nimport { db, auth } from \"../../helper/firebase\";\r\nimport \"./Register.css\";\r\nimport \"firebase/auth\";\r\nimport { PasswordCheckService } from \"../../hooks/pw-check\";\r\n\r\nimport { User } from \"../../model/User\";\r\nimport { PasswordCheckStrength } from \"../../hooks/pw-check\";\r\nimport { checkUsername } from \"../../hooks/checkUsername\";\r\nimport { checkRegister } from \"../../hooks/register/checkRegister\";\r\nimport { presentAlertWithHeader } from \"../../hooks/alert\";\r\n\r\nconst Register: React.FC = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [userFirstName, setuserFirstName] = useState(\"\");\r\n  const [userLastName, setuserLastName] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [userName, setUserName] = useState(\"\");\r\n  const [alertText, setAlertText] = useState(\"\");\r\n  const [alertEmailVerify, setalertEmailVerify] = useState(false);\r\n  const [pwStrength, setpwStrength] = useState(PasswordCheckStrength.Short);\r\n\r\n  let checker: PasswordCheckService = new PasswordCheckService();\r\n\r\n  const onEmailNameChange = useCallback((e) => setEmail(e.detail?.value), []);\r\n  const onPasswordChange = useCallback((e) => {\r\n    setPassword(e.detail?.value);\r\n    setpwStrength(checker.checkPasswordStrength(e.detail?.value));\r\n  }, []);\r\n\r\n  const checkPw = () => {\r\n    setpwStrength(checker.checkPasswordStrength(\"tst_pw12\"));\r\n  };\r\n\r\n  const onConfirmPasswordChange = useCallback(\r\n    (e) => setConfirmPassword(e.detail?.value),\r\n    []\r\n  );\r\n  const onFirstNameChange = useCallback(\r\n    (e) => setuserFirstName(e.detail?.value),\r\n    []\r\n  );\r\n  const onLastNameChange = useCallback(\r\n    (e) => setuserLastName(e.detail?.value),\r\n    []\r\n  );\r\n  const onUsernameChange = useCallback((e) => setUserName(e.detail?.value), []);\r\n\r\n  const onDismiss = useCallback(() => setAlertText(\"\"), []);\r\n\r\n  const onSignUpClick = useCallback(async () => {\r\n    var alertMessage = await checkRegister(\r\n      confirmPassword,\r\n      password,\r\n      email,\r\n      userFirstName,\r\n      userLastName,\r\n      userName\r\n    );\r\n\r\n    if(auth.currentUser){\r\n    presentAlertWithHeader(\"Please verify your email address to finish signing up for Geogram\", \"Thank you for signing in.\");\r\n    }\r\n    \r\n  }, [confirmPassword, password, email, userFirstName, userLastName, userName]);\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonButtons slot=\"start\">\r\n            <IonButton color=\"primary\" routerLink=\"/login\">\r\n              <IonIcon icon={chevronBackOutline} />\r\n            </IonButton>\r\n          </IonButtons>\r\n          <IonTitle>Register</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n\r\n      <IonContent fullscreen>\r\n        <IonGrid>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\">Username</IonLabel>\r\n            <IonInput\r\n              onIonChange={onUsernameChange}\r\n              type=\"text\"\r\n              value={userName}\r\n            ></IonInput>\r\n          </IonItem>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\">First Name</IonLabel>\r\n            <IonInput\r\n              onIonChange={onFirstNameChange}\r\n              type=\"text\"\r\n              value={userFirstName}\r\n            ></IonInput>\r\n          </IonItem>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\">Second Name</IonLabel>\r\n            <IonInput\r\n              onIonChange={onLastNameChange}\r\n              type=\"text\"\r\n              value={userLastName}\r\n            ></IonInput>\r\n          </IonItem>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\">Email</IonLabel>\r\n            <IonInput\r\n              onIonChange={onEmailNameChange}\r\n              type=\"email\"\r\n              value={email}\r\n            ></IonInput>\r\n          </IonItem>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\">Password {pwStrength}</IonLabel>\r\n            <IonInput\r\n              onIonChange={onPasswordChange}\r\n              type=\"password\"\r\n              value={password}\r\n            ></IonInput>\r\n          </IonItem>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\">Confirm Password </IonLabel>\r\n            <IonInput\r\n              onIonChange={onConfirmPasswordChange}\r\n              value={confirmPassword}\r\n              type=\"password\"\r\n            ></IonInput>\r\n          </IonItem>\r\n          <br />\r\n          <div className=\"SignInButton\">\r\n            <IonButton onClick={onSignUpClick}>\r\n              Register\r\n              <IonIcon icon={personAddOutline} />\r\n            </IonButton>\r\n          </div>\r\n        </IonGrid>\r\n        {/* <IonAlert\r\n          isOpen={alertText.length > 0}\r\n          onDidDismiss={onDismiss}\r\n          message={alertText}\r\n          buttons={[\"OK\"]}\r\n        />\r\n        <IonAlert\r\n          isOpen={alertEmailVerify}\r\n          onDidDismiss={() => setalertEmailVerify(false)}\r\n          header={\"Thank you for signing in.\"}\r\n          message={\r\n            \"Please verify your email address to finish signing up for Geogram\"\r\n          }\r\n          buttons={[\"OK\"]}\r\n        /> */}\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","import { Image } from \"../model/Image\";\r\n\r\nexport function sortImageArray(a: Image, b: Image): number {\r\n  if (a.distance !== undefined && b.distance !== undefined) {\r\n    if (a.distance > b.distance) {\r\n      return 1;\r\n    } else if (a.distance < b.distance) {\r\n      return -1;\r\n    } else {\r\n      if (a.location.timestamp < b.location.timestamp) {\r\n        return -1;\r\n      } else if (a.location.timestamp > b.location.timestamp) {\r\n        return 1;\r\n      }\r\n    }\r\n  }\r\n  return 0;\r\n}\r\n","/* eslint-disable react/jsx-no-undef */\r\nimport {\r\n  IonButton,\r\n  IonCol,\r\n  IonContent,\r\n  IonFab,\r\n  IonFabButton,\r\n  IonGrid,\r\n  IonHeader,\r\n  IonIcon,\r\n  IonImg,\r\n  IonInput,\r\n  IonItem,\r\n  IonLabel,\r\n  IonPage,\r\n  IonRow,\r\n  IonTextarea,\r\n  IonTitle,\r\n  IonToast,\r\n  IonToolbar,\r\n} from \"@ionic/react\";\r\nimport axios from \"axios\";\r\nimport { list } from \"ionicons/icons\";\r\nimport { Image } from \"../model/Image\";\r\nimport { distanceInKm } from \"./evaluateDistance\";\r\nimport { sortImageArray } from \"./sortImageArray\";\r\n\r\nexport function evaluateLocation(\r\n  range: number,\r\n  images: Image[],\r\n  lat: number,\r\n  long: number\r\n): Image[] {\r\n  let pictures: Image[] = [];\r\n  console.log(range);\r\n\r\n  images.forEach((image) => {\r\n    let distance: number = distanceInKm(\r\n      lat,\r\n      long,\r\n      image.location.coords.latitude,\r\n      image.location.coords.longitude\r\n    );\r\n    image.distance = distance;\r\n\r\n    if (distance <= range) {\r\n      pictures.push(image);\r\n    }\r\n  });\r\n\r\n  pictures = pictures.sort((a, b) => {\r\n    return sortImageArray(a, b);\r\n  });\r\n\r\n  console.log(pictures);\r\n\r\n  return pictures;\r\n}\r\n","import {\r\n  IonContent,\r\n  IonHeader,\r\n  IonPage,\r\n  IonTitle,\r\n  IonToolbar,\r\n  IonItem,\r\n  IonIcon,\r\n  IonLabel,\r\n  IonRefresher,\r\n  IonRefresherContent,\r\n  IonText,\r\n  IonPopover,\r\n  IonList,\r\n  IonListHeader,\r\n  IonRange,\r\n} from \"@ionic/react\";\r\nimport { Dispatch, SetStateAction, useEffect, useState } from \"react\";\r\nimport { GeolocationPosition, Plugins } from \"@capacitor/core\";\r\nimport { funnel } from \"ionicons/icons\";\r\nimport React from \"react\";\r\nimport { RefresherEventDetail } from \"@ionic/core\";\r\nimport { Image } from \"../../model/Image\";\r\nimport { db } from \"../../helper/firebase\";\r\nimport { sortImageArray } from \"../../hooks/sortImageArray\";\r\nimport { evaluateLocation } from \"../../hooks/evaluateLocation\";\r\nimport ExploreCard from \"../../components/ExploreCard/ExploreCard\";\r\n\r\nconst { Geolocation } = Plugins;\r\n\r\nconst Explore: React.FC<{ setLoading: Dispatch<SetStateAction<boolean>> }> = ({\r\n  setLoading,\r\n}) => {\r\n  // Geoinformation\r\n  const [location, setLocation] = useState<GeolocationPosition | undefined>();\r\n\r\n  //images to display\r\n  const [images, setImages] = useState<Array<Image>>([]);\r\n\r\n  //filter\r\n  const [filter, setFilter] = useState(15);\r\n\r\n  //popup\r\n  const [showPopup, setShowPopup] = useState<{\r\n    open: boolean;\r\n    event: Event | undefined;\r\n  }>({\r\n    open: false,\r\n    event: undefined,\r\n  });\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      // push location to state\r\n      setLocation(await Geolocation.getCurrentPosition());\r\n\r\n      console.log(\"Initial load...\");\r\n\r\n      fetchImages(filter).then((images) => setImages(images));\r\n    })();\r\n  }, []);\r\n\r\n  async function fetchImages(i?: number): Promise<Image[]> {\r\n    // fetch images from firebase\r\n    const ref = db.collection(\"images\");\r\n    const data = await ref.get();\r\n\r\n    // load images to typed docs\r\n    let t: Image[] = [];\r\n    data.docs.forEach((doc: any) => t.push(doc.data()));\r\n\r\n    // sort image array\r\n    t = t.sort((a, b) => {\r\n      return sortImageArray(a, b);\r\n    });\r\n\r\n    if (location !== undefined) {\r\n      if (i) {\r\n        t = evaluateLocation(\r\n          i,\r\n          t,\r\n          location.coords.latitude,\r\n          location.coords.longitude\r\n        );\r\n      } else {\r\n        t = evaluateLocation(\r\n          filter,\r\n          t,\r\n          location.coords.latitude,\r\n          location.coords.longitude\r\n        );\r\n      }\r\n    }\r\n\r\n    return t;\r\n  }\r\n\r\n  function doRefresh(event: CustomEvent<RefresherEventDetail>) {\r\n    console.log(\"Begin async operation\");\r\n\r\n    fetchImages(filter).then((images) => setImages(images));\r\n\r\n    setTimeout(() => {\r\n      console.log(\"Async operation has ended\");\r\n      event.detail.complete();\r\n    }, 2000);\r\n  }\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonTitle>Explore</IonTitle>\r\n          <IonText\r\n            style={{ marginRight: \"0.25rem\" }}\r\n            slot=\"end\"\r\n            onClick={(e) => setShowPopup({ open: true, event: e.nativeEvent })}\r\n          >\r\n            {filter} km\r\n          </IonText>\r\n          <IonIcon\r\n            style={{ margin: \"0.5rem\" }}\r\n            icon={funnel}\r\n            slot=\"end\"\r\n            onClick={(e) => setShowPopup({ open: true, event: e.nativeEvent })}\r\n          />\r\n          <IonPopover\r\n            isOpen={showPopup.open}\r\n            event={showPopup.event}\r\n            onDidDismiss={(e) =>\r\n              setShowPopup({ open: false, event: undefined })\r\n            }\r\n          >\r\n            <IonList>\r\n              <IonListHeader>Range Filter</IonListHeader>\r\n\r\n              <IonItem>\r\n                <IonRange\r\n                  min={0}\r\n                  max={30}\r\n                  snaps={true}\r\n                  step={1}\r\n                  pin={true}\r\n                  value={filter}\r\n                  onIonChange={(e) => {\r\n                    setFilter(e.detail.value as number);\r\n                    setLoading(true);\r\n                    fetchImages(e.detail.value as number)\r\n                      .then((images) => {\r\n                        setImages(images);\r\n                        setLoading(false);\r\n                      })\r\n                      .catch((e) => setLoading(false));\r\n                  }}\r\n                  onLostPointerCapture={(e) => {\r\n                    setShowPopup({ open: false, event: undefined });\r\n                  }}\r\n                >\r\n                  <IonLabel slot=\"start\">0</IonLabel>\r\n                  <IonLabel slot=\"end\">30</IonLabel>\r\n                </IonRange>\r\n              </IonItem>\r\n            </IonList>\r\n          </IonPopover>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n\r\n      <IonContent fullscreen>\r\n        <IonRefresher\r\n          slot=\"fixed\"\r\n          onIonRefresh={doRefresh}\r\n          pullFactor={0.5}\r\n          pullMin={100}\r\n          pullMax={200}\r\n        >\r\n          <IonRefresherContent></IonRefresherContent>\r\n        </IonRefresher>\r\n        <IonHeader collapse=\"condense\">\r\n          <IonToolbar>\r\n            <IonTitle size=\"large\">Explore</IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        {images.length > 0 &&\r\n          images.map((image, id) => {\r\n            return <ExploreCard key={id} image={image} />;\r\n          })}\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Explore;\r\n","/* eslint-disable react/jsx-no-undef */\r\nimport {\r\n  IonButton,\r\n  IonCol,\r\n  IonContent,\r\n  IonGrid,\r\n  IonHeader,\r\n  IonIcon,\r\n  IonImg,\r\n  IonPage,\r\n  IonRow,\r\n  IonTitle,\r\n  IonToast,\r\n  IonToolbar,\r\n  isPlatform,\r\n} from \"@ionic/react\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport { Photo } from \"../../hooks/usePhotoGallery\";\r\nimport { base64FromPath } from \"@ionic/react-hooks/filesystem\";\r\nimport {\r\n  FilesystemDirectory,\r\n  FilesystemEncoding,\r\n  Plugins,\r\n} from \"@capacitor/core\";\r\nimport { GeogramPosition } from \"../../model/GeogramPosition\";\r\nimport axios from \"axios\";\r\nimport { db } from \"../../helper/firebase\";\r\nimport { Redirect } from \"react-router\";\r\nimport { UserContext } from \"../..\";\r\nimport {\r\n  arrowForward,\r\n  arrowForwardCircle,\r\n  arrowForwardCircleSharp,\r\n} from \"ionicons/icons\";\r\n\r\nconst { Filesystem } = Plugins;\r\n\r\nconst ProfilePic: React.FC<any> = (props) => {\r\n  const user = useContext(UserContext);\r\n\r\n  // image provided by props\r\n  const [image, setImage] = useState<Photo>();\r\n  const [oldImage, setOldImage] = useState<string>(\r\n    \"https://im-coder.com/images4/15590312779219.png\"\r\n  );\r\n\r\n  // Toast message\r\n  const [toast, setToast] = useState(\"\");\r\n\r\n  // Redirect\r\n  const [redirect, setRedirect] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (props.location.state !== undefined) {\r\n      setImage(props.location.state.image);\r\n    }\r\n\r\n    // get old picture from firebase and store it to state\r\n    db.collection(\"users\")\r\n      .doc(user?.uid)\r\n      .get()\r\n      .then((data) => {\r\n        if (data?.data()?.profilepic) {\r\n          setOldImage(data?.data()?.profilepic);\r\n        } else {\r\n          setOldImage(\"https://im-coder.com/images4/15590312779219.png\");\r\n        }\r\n      });\r\n\r\n    //disable set Loading\r\n    props.setLoading(false);\r\n  }, [props.location.state]);\r\n\r\n  const upload = async () => {\r\n    props.setLoading(true);\r\n\r\n    if (image !== undefined) {\r\n      if (image.webviewPath !== undefined) {\r\n        let file: any;\r\n        // get image data when on android or ios\r\n        if (isPlatform(\"android\") || isPlatform(\"ios\")) {\r\n          file = {\r\n            ...file,\r\n            data: (await base64FromPath(image.webviewPath!))\r\n              .toString()\r\n              .split(\",\")[1],\r\n          };\r\n        } else {\r\n          file = await Filesystem.readFile({\r\n            path: image.filepath,\r\n            directory: FilesystemDirectory.Data,\r\n            encoding: FilesystemEncoding.UTF8,\r\n          });\r\n        }\r\n\r\n        let res: any = await axios.post(\r\n          `${process.env.REACT_APP_IMAGE_SERVER_URL}/upload1`,\r\n          { data: file.data }\r\n        );\r\n\r\n        if (res.data.file !== undefined) {\r\n          db.collection(\"users\")\r\n            .doc(user?.uid)\r\n            .get()\r\n            .then((data) => {\r\n              db.collection(\"users\")\r\n                .doc(user?.uid)\r\n                .set(\r\n                  {\r\n                    ...data.data(),\r\n                    profilepic:\r\n                      `${process.env.REACT_APP_IMAGE_SERVER_URL}/` +\r\n                      res.data.file,\r\n                  },\r\n                  { merge: true }\r\n                )\r\n                .then((s) => {\r\n                  setToast(\"Successfully added item to firebase\");\r\n                  setTimeout(() => {\r\n                    setRedirect(\"profile\");\r\n                    props.setLoading(false);\r\n                  }, 100);\r\n                })\r\n                .catch((e) => {\r\n                  console.log(\"Error while changing profile picture\");\r\n                });\r\n            });\r\n        } else {\r\n          setToast(\r\n            \"Error while adding data to image server: \" +\r\n              process.env.REACT_APP_IMAGE_SERVER_URL\r\n          );\r\n        }\r\n      }\r\n\r\n      // wait for api\r\n      // cleanup of input fields\r\n    } else {\r\n      setToast(\"Error occured!\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonTitle>Upload</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent fullscreen>\r\n        <IonHeader collapse=\"condense\">\r\n          <IonToolbar>\r\n            <IonTitle size=\"large\">Upload</IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n\r\n        {/* Upload Form with image view */}\r\n        {image && (\r\n          <>\r\n            <IonGrid>\r\n              <IonRow>\r\n                <IonCol>\r\n                  <h1>Change Profile Picture</h1>\r\n                </IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol size=\"5\">\r\n                  <IonImg src={oldImage} />\r\n                </IonCol>\r\n                <IonCol\r\n                  size=\"2\"\r\n                  style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"center\",\r\n                    alignItems: \"center\",\r\n                  }}\r\n                >\r\n                  <IonIcon\r\n                    style={{ fontSize: \"3em\" }}\r\n                    icon={arrowForward}\r\n                  ></IonIcon>\r\n                </IonCol>\r\n                <IonCol size=\"5\">\r\n                  <IonImg src={image.webviewPath} />\r\n                </IonCol>\r\n              </IonRow>\r\n              <br />\r\n              <IonRow>\r\n                <IonCol size=\"2\" offset=\"4\">\r\n                  <IonButton\r\n                    expand=\"block\"\r\n                    shape=\"round\"\r\n                    fill=\"outline\"\r\n                    color=\"primary\"\r\n                    onClick={upload}\r\n                  >\r\n                    Submit\r\n                  </IonButton>\r\n                </IonCol>\r\n                <IonCol size=\"2\">\r\n                  <IonButton\r\n                    expand=\"block\"\r\n                    shape=\"round\"\r\n                    fill=\"outline\"\r\n                    color=\"danger\"\r\n                    onClick={() => {\r\n                      setOldImage(\r\n                        \"https://im-coder.com/images4/15590312779219.png\"\r\n                      );\r\n                      setImage(undefined);\r\n                      setRedirect(\"profile\");\r\n                    }}\r\n                  >\r\n                    Cancel\r\n                  </IonButton>\r\n                </IonCol>\r\n              </IonRow>\r\n            </IonGrid>\r\n          </>\r\n        )}\r\n\r\n        {/* Toast */}\r\n        <IonToast\r\n          isOpen={toast !== \"\"}\r\n          onDidDismiss={() => setToast(\"\")}\r\n          message={toast}\r\n          duration={1500}\r\n        />\r\n        {/* Redirect */}\r\n        {redirect !== \"\" && <Redirect to={`/${redirect}`}></Redirect>}\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default ProfilePic;\r\n","import { Redirect, Route } from \"react-router-dom\";\r\nimport React, { useContext, useState } from \"react\";\r\nimport Upload from \"./pages/Upload/Upload\";\r\nimport {\r\n  IonApp,\r\n  IonFab,\r\n  IonFabButton,\r\n  IonIcon,\r\n  IonLabel,\r\n  IonLoading,\r\n  IonRouterOutlet,\r\n  IonTabBar,\r\n  IonTabButton,\r\n  IonTabs,\r\n} from \"@ionic/react\";\r\nimport { IonReactRouter } from \"@ionic/react-router\";\r\nimport {\r\n  arrowForwardCircle,\r\n  cameraOutline,\r\n  cameraSharp,\r\n  ellipse,\r\n  square,\r\n  triangle,\r\n  personCircleOutline,\r\n  search,\r\n  home,\r\n  squareOutline,\r\n} from \"ionicons/icons\";\r\nimport Profile from \"./pages/Profile/Profile\";\r\n\r\n/* Core CSS required for Ionic components to work properly */\r\nimport \"@ionic/react/css/core.css\";\r\n\r\n/* Basic CSS for apps built with Ionic */\r\nimport \"@ionic/react/css/normalize.css\";\r\nimport \"@ionic/react/css/structure.css\";\r\nimport \"@ionic/react/css/typography.css\";\r\n\r\n/* Optional CSS utils that can be commented out */\r\nimport \"@ionic/react/css/padding.css\";\r\nimport \"@ionic/react/css/float-elements.css\";\r\nimport \"@ionic/react/css/text-alignment.css\";\r\nimport \"@ionic/react/css/text-transformation.css\";\r\nimport \"@ionic/react/css/flex-utils.css\";\r\nimport \"@ionic/react/css/display.css\";\r\n\r\n/* Theme variables */\r\nimport \"./theme/variables.css\";\r\n\r\nimport { UserContext } from \".\";\r\nimport UploadSelectionModal from \"./components/UploadSelectionModal/UploadSelectionModal\";\r\nimport Search from \"./pages/Search/Search\";\r\nimport Login from \"./pages/auth/Login\";\r\nimport Register from \"./pages/auth/Register\";\r\nimport Exploration from \"./pages/Exploration/Exploration\";\r\nimport ProfilePic from \"./pages/ProfilePic/ProfilePic\";\r\n\r\nconst PublicRoutes = () => {\r\n  return (\r\n    <IonReactRouter>\r\n      <Route path=\"/login\" component={Login} exact={true} />\r\n      <Route path=\"/register\" component={Register} exact={true} />\r\n      <Route path=\"/\" render={() => <Redirect to=\"/login\" />} />\r\n    </IonReactRouter>\r\n  );\r\n};\r\n\r\nconst PrivateRoutes = () => {\r\n  const [showActionSheet, setShowActionSheet] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  return (\r\n    <IonReactRouter>\r\n      <IonTabs>\r\n        <IonRouterOutlet>\r\n          <Route exact path=\"/explore\">\r\n            <Exploration setLoading={setLoading} />\r\n          </Route>\r\n          <Route exact path=\"/search\">\r\n            <Search />\r\n          </Route>\r\n          <Route path=\"/profile\">\r\n            <Profile setLoading={setLoading} />\r\n          </Route>\r\n          <Route exact path=\"/\">\r\n            <Redirect to=\"/explore\" />\r\n          </Route>\r\n\r\n          <Route\r\n            path=\"/upload\"\r\n            render={(props) => <Upload {...props} setLoading={setLoading} />}\r\n          />\r\n          <Route\r\n            path=\"/profile-pic\"\r\n            render={(props) => <ProfilePic {...props} setLoading={setLoading} />}\r\n          />\r\n\r\n          <Route exact path=\"/login\">\r\n            <Redirect to=\"/explore\" />\r\n          </Route>\r\n          <Route exact path=\"/register\">\r\n            <Redirect to=\"/explore\" />\r\n          </Route>\r\n        </IonRouterOutlet>\r\n        <IonTabBar slot=\"bottom\">\r\n          {/* Explore Tab - Benita */}\r\n          <IonTabButton tab=\"explore\" href=\"/explore\">\r\n            <IonIcon icon={home} />\r\n            <IonLabel>Explore</IonLabel>\r\n          </IonTabButton>\r\n          {/* Search Tab - Benita */}\r\n          <IonTabButton tab=\"search\" href=\"/search\">\r\n            <IonIcon icon={search} />\r\n            <IonLabel>Search</IonLabel>\r\n          </IonTabButton>\r\n          {/* Profile Tab - Jonas */}\r\n          <IonTabButton tab=\"profile\" href=\"/profile\">\r\n            <IonIcon icon={personCircleOutline} />\r\n            <IonLabel>Profile</IonLabel>\r\n          </IonTabButton>\r\n        </IonTabBar>\r\n      </IonTabs>\r\n\r\n      {/* Upload Component - Paul */}\r\n      {true && (\r\n        <>\r\n          <IonFab\r\n            style={{ marginBottom: \"4.5rem\", marginRight: \"0.5rem\" }}\r\n            vertical=\"bottom\"\r\n            horizontal=\"end\"\r\n            slot=\"fixed\"\r\n            onClick={() => {\r\n              setShowActionSheet(true);\r\n            }}\r\n          >\r\n            <IonFabButton>\r\n              <IonIcon md={cameraSharp} ios={cameraOutline} />\r\n            </IonFabButton>\r\n          </IonFab>\r\n          <UploadSelectionModal\r\n            active={showActionSheet}\r\n            setShowActionSheet={setShowActionSheet}\r\n            setLoading={setLoading}\r\n          />\r\n        </>\r\n      )}\r\n\r\n      <IonLoading\r\n        isOpen={loading}\r\n        onDidDismiss={() => setLoading(false)}\r\n        message={\"Please wait...\"}\r\n        duration={5000}\r\n      />\r\n    </IonReactRouter>\r\n  );\r\n};\r\n\r\nconst App: React.FC = () => {\r\n  const user = useContext(UserContext);\r\n\r\n  return <IonApp>{user ? <PrivateRoutes /> : <PublicRoutes />}</IonApp>;\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://cra.link/PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://cra.link/PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://cra.link/PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log('No internet connection found. App is running in offline mode.');\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then((registration) => {\r\n        registration.unregister();\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { defineCustomElements } from '@ionic/pwa-elements/loader';\r\nimport React, { createContext, useEffect, useState } from \"react\";\r\nimport firebase, { auth } from \"./helper/firebase\";\r\ndefineCustomElements(window);\r\n\r\nexport const UserContext = createContext<firebase.User | null>(null);\r\n\r\nexport const UserProvider: React.FC = ({ children }) => {\r\n    const [user, setUser] = useState<firebase.User | null>(null);\r\n    \r\nuseEffect(() => {\r\n    auth.onAuthStateChanged((userAuth) => setUser(userAuth));\r\n}, []);\r\n\r\nreturn  <UserContext.Provider value={user}> {children}    </UserContext.Provider>;\r\n};\r\n\r\n\r\nReactDOM.render(\r\n  <UserProvider>\r\n    <App />\r\n  </UserProvider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://cra.link/PWA\r\nserviceWorkerRegistration.unregister();\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}