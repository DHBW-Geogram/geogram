{"version":3,"sources":["../node_modules/@ionic/core/dist/esm-es5 lazy /^/.*/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object","../node_modules/@ionic/pwa-elements/dist/esm-es5 lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object","components/LocationMap/LocationMap.tsx","helper/firebase.ts","pages/Upload/Upload.tsx","hooks/usePhotoGallery.ts","components/ProfilePicSelectionModal/ProfilePicSelectionModal.tsx","pages/Profile/checkUsername.ts","pages/Profile/Profile.tsx","components/UploadSelectionModal/UploadSelectionModal.tsx","hooks/evaluateDistance.ts","hooks/alert.ts","hooks/like.ts","components/ExploreCard/ExploreCard.tsx","pages/Search/Search.tsx","assets/icon/icon.png","hooks/checkUsername.ts","hooks/login/signInWithUsernameAndPassword.ts","hooks/login/checkLogin.ts","hooks/hideShowPassword.ts","pages/auth/Login.tsx","hooks/pwcheck.ts","hooks/register/emailVerify.ts","hooks/register/register.ts","hooks/register/checkRegister.ts","pages/auth/Register.tsx","hooks/sortImageArray.ts","hooks/evaluateLocation.ts","pages/Exploration/Exploration.tsx","pages/ProfilePic/ProfilePic.tsx","App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","index.tsx"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","LocationMap","location","MapContainer","center","coords","latitude","longitude","zoom","scrollWheelZoom","style","height","width","TileLayer","attribution","url","Marker","position","Popup","fb","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","firestore","auth","onAuthStateChanged","user","uid","localStorage","setItem","removeItem","Geolocation","Plugins","Filesystem","Upload","props","useContext","UserContext","useState","image","setImage","title","setTitle","description","setDescription","setLocation","setPosition","toast","setToast","redirect","setRedirect","useEffect","undefined","state","getCurrentPosition","accuracy","altitude","altitudeAccuracy","heading","speed","timestamp","axios","get","res","data","results","formatted","setLoading","upload","a","Date","now","webviewPath","isPlatform","file","base64FromPath","toString","split","readFile","path","filepath","directory","FilesystemDirectory","Data","encoding","FilesystemEncoding","UTF8","post","process","collection","doc","item","imageId","uuidv4","set","username","email","setTimeout","catch","err","fullscreen","collapse","size","src","type","value","onIonChange","detail","expand","shape","fill","color","onClick","isOpen","onDidDismiss","message","duration","to","PHOTO_STORAGE","usePhotoGallery","photo","setPhoto","getPhoto","useCamera","useFilesystem","deleteFile","writeFile","useStorage","takePhoto","resultType","CameraResultType","Uri","source","CameraSource","Camera","quality","cameraPhoto","fileName","getTime","savePicture","savedFileImage","JSON","stringify","convertBlobToBase64","blob","reject","reader","FileReader","onerror","onload","result","readAsDataURL","takePhotoFromGalerie","Photos","base64Data","webPath","savedFile","uri","Capacitor","convertFileSrc","ProfilePicSelectionModal","active","setShowActionSheet","selectedRoute","setSelectedRoute","pathname","buttons","text","icon","cameraOutline","handler","console","log","imageOutline","closeOutline","checkUsername","userName","usernameCheck","typedDocs","docs","forEach","push","len","length","currentUsername","where","currentUser","querySnapshot","i","Profile","profileSelectionModal","setProfileSelectionModal","EditProfile","setEditProfile","setUsername","firstName","setFirstName","lastName","setLastName","fullName","setFullName","setEmail","bio","setBio","showAlertVerify","setShowAlertVerify","verified","setVerified","profilepic","setProfilepic","posts","setPosts","postsUsername","likes","setLikes","counterLikes","errorUsernameLabel","setErrorUsernameLabel","errorUsernameText","setErrorUsernameText","isUsernameCorrect","oldUsername","errorEmailLabel","setErrorEmailLabel","errorEmailText","setErrorEmailText","isEmailCorrect","useIonToast","presentToast","dismissToast","showAlertLogin","setShowAlertLogin","showAlertIncorrectPassword","setShowAlertIncorrectPassword","isShowAlertLogin","isLoginSuccessfull","setLoginSuccessfull","showLoading","setShowLoading","event","emailVerified","userFirstName","userLastName","biography","complete","slot","textAlign","paddingLeft","fontSize","className","display","String","sendEmailVerification","cssClass","header","pullFactor","pullMin","pullMax","onIonRefresh","check","fetchSignInMethodsForEmail","error","updateEmail","update","imageData","inputs","name","placeholder","role","signInWithEmailAndPassword","Password","signOut","UploadSelectionModal","degreesToRadians","degrees","Math","PI","distanceInKm","lat1","lon1","lat2","lon2","dLat","dLon","sin","cos","atan2","sqrt","presentAlert","alert","document","createElement","body","appendChild","present","presentAlertWithHeader","likeFunction","likeNumber","likedImage","FieldValue","arrayUnion","like","delikeFunction","arrayRemove","ExploreCard","setLikeNumber","heartOutline","likeIcon","setLikeIcon","likeColor","setLikeColor","flag","setFlag","documentSnapshot","likedImages","bol","find","heart","onLikeClick","useCallback","pin","distance","slice","Search","filter","setFilter","images","setImages","showPopup","setShowPopup","popPic","setPopPic","fetchImages","ref","t","element","searchText","target","includes","showCancelButton","backgroundColor","p","objectFit","bottom","right","borderRadius","toPrecision","backdropDismiss","showBackdrop","signInWithUsernameAndPassword","password","checkLogin","hideShowPassword","passwordType","arr","eyeOffOutline","eyeOutline","PasswordCheckStrength","Login","setPassword","passwordShowHideIcon","setPasswordShowHideIcon","setpasswordType","alertPasswordForgotenText","setalertPasswordForgotenText","onUsernameNameChange","onPasswordChange","onhideShowPasswordClick","onLoginClick","justifyContent","alignItems","lines","class","logInOutline","routerLink","sendPasswordResetEmail","emailPasswordForgoten","PasswordCheckService","commonPasswordPatterns","this","test","numberOfElements","Short","Notset","MinimumLength","isPasswordCommon","Common","Weak","Ok","Strong","sendEmailVerify","register","createUserWithEmailAndPassword","userCredential","checkRegister","confirmPassword","Register","setuserFirstName","setuserLastName","setConfirmPassword","setUserName","indColor","setindColor","passwordConfirmShowHideIcon","setPasswordConfirmShowHideIcon","passwordConfirmType","setpasswordConfirmType","pwStrength","setpwStrength","checker","onEmailNameChange","pwsec","checkPasswordStrength","onConfirmPasswordChange","onFirstNameChange","onLastNameChange","onUsernameChange","onhideShowPasswordConfirmClick","onSignUpClick","chevronBackOutline","personAddOutline","sortImageArray","b","evaluateLocation","range","lat","long","pictures","sort","Explore","open","marginRight","nativeEvent","margin","funnel","min","max","snaps","step","onLostPointerCapture","ProfilePic","oldImage","setOldImage","merge","s","arrowForward","offset","PublicRoutes","component","exact","render","PrivateRoutes","showActionSheet","loading","Exploration","tab","href","home","search","personCircleOutline","marginBottom","vertical","horizontal","md","cameraSharp","ios","App","Boolean","window","hostname","match","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","defineCustomElements","createContext","UserProvider","children","setUser","userAuth","Provider","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"qFAAA,IAAIA,EAAM,CACT,8BAA+B,CAC9B,IACA,GAED,uBAAwB,CACvB,IACA,GAED,uBAAwB,CACvB,IACA,GAED,0BAA2B,CAC1B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,sBAAuB,CACtB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,mCAAoC,CACnC,IACA,IAED,uBAAwB,CACvB,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,sBAAuB,CACtB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,gCAAiC,CAChC,IACA,KAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,KAIR,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B,OAAOR,EAAoBK,EAAEG,EAAI,IAAIJ,MAAK,WACzC,OAAOJ,EAAoBS,MAG7BX,EAAoBY,KAAO,WAC1B,OAAOC,OAAOD,KAAKb,IAEpBC,EAAoBW,GAAK,IACzBG,EAAOC,QAAUf,G,oBChMjB,IAAID,EAAM,CACT,sBAAuB,CACtB,IACA,KAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,KAIR,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B,OAAOR,EAAoBK,EAAEG,EAAI,IAAIJ,MAAK,WACzC,OAAOJ,EAAoBS,MAG7BX,EAAoBY,KAAO,WAC1B,OAAOC,OAAOD,KAAKb,IAEpBC,EAAoBW,GAAK,IACzBG,EAAOC,QAAUf,G,kICxBjB,IAAID,EAAM,CACT,8BAA+B,CAC9B,IACA,IAED,uCAAwC,CACvC,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,uBAAwB,CACvB,IACA,KAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,KAIR,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B,OAAOR,EAAoBK,EAAEG,EAAI,IAAIJ,MAAK,WACzC,OAAOJ,EAAoBS,MAG7BX,EAAoBY,KAAO,WAC1B,OAAOC,OAAOD,KAAKb,IAEpBC,EAAoBW,GAAK,IACzBG,EAAOC,QAAUf,G,+RCjBFgB,EAjB4C,SAAC,GAAgB,IAAfC,EAAc,EAAdA,SAE3D,OACE,eAACC,EAAA,EAAD,CAAcC,OAAQ,CAACF,EAASG,OAAOC,SAAUJ,EAASG,OAAOE,WAAYC,KAAM,GAAIC,iBAAiB,EAAOC,MAAO,CAACC,OAAQ,OAAQC,MAAO,SAA9I,UACA,cAACC,EAAA,EAAD,CACEC,YAAY,yEACZC,IAAI,uDAEN,cAACC,EAAA,EAAD,CAAQC,SAAU,CAACf,EAASG,OAAOC,SAAUJ,EAASG,OAAOE,WAA7D,SACE,cAACW,EAAA,EAAD,sC,yBCJFC,EAAKC,IAASC,cATK,CACnBC,OAAQ,0CACRC,WAAY,gCACZC,UAAW,gBACXC,cAAe,4BACfC,kBAAmB,eACnBC,MAAO,8CAIPC,EAAKT,EAAGU,YAGCC,EAAOX,EAAGW,OAERV,EAAf,EAIAU,EAAKC,oBAAmB,SAACC,GACrB,GAAIA,EAAM,CACN,IAAIC,EAAWD,EAAKC,IACpBC,aAAaC,QAAQ,MAAOF,QAG5BC,aAAaE,WAAW,U,aCYxBC,EAA4BC,IAA5BD,YAAaE,EAAeD,IAAfC,WAiRNC,EA/Qe,SAACC,GAC7B,IAAMT,EAAOU,qBAAWC,IADe,EAKbC,qBALa,mBAKhCC,EALgC,KAKzBC,EALyB,OAQbF,mBAAS,IARI,mBAQhCG,EARgC,KAQzBC,EARyB,OASDJ,mBAAS,IATR,mBAShCK,EATgC,KASnBC,EATmB,OAYPN,qBAZO,mBAYhC1C,EAZgC,KAYtBiD,EAZsB,OAaPP,mBAAS,IAbF,mBAahC3B,EAbgC,KAatBmC,EAbsB,OAgBbR,mBAAS,IAhBI,mBAgBhCS,EAhBgC,KAgBzBC,EAhByB,OAmBPV,mBAAS,IAnBF,mBAmBhCW,EAnBgC,KAmBtBC,EAnBsB,KAqBvCC,qBAAU,gBACqBC,IAAzBjB,EAAMvC,SAASyD,OACjBb,EAASL,EAAMvC,SAASyD,MAAMd,OAIhCR,EAAYuB,qBAAqBrE,MAAK,SAACW,GACrCiD,EAAY,CACV9C,OAAQ,CACNwD,SAAU3D,EAASG,OAAOwD,SAC1BC,SAAU5D,EAASG,OAAOyD,SAC1BC,iBAAkB7D,EAASG,OAAO0D,iBAClCC,QAAS9D,EAASG,OAAO2D,QACzB1D,SAAUJ,EAASG,OAAOC,SAC1BC,UAAWL,EAASG,OAAOE,UAC3B0D,MAAO/D,EAASG,OAAO4D,OAEzBC,UAAWhE,EAASgE,YAGtBC,IACGC,IADH,gEAEsDlE,QAFtD,IAEsDA,OAFtD,EAEsDA,EAAUG,OAAOC,SAFvE,mBAEmFJ,QAFnF,IAEmFA,OAFnF,EAEmFA,EAAUG,OAAOE,UAFpG,0CAIGhB,MAAK,SAAC8E,GACLjB,EAAYiB,EAAIC,KAAKC,QAAQ,GAAGC,WAChCrB,GAAY,SAACQ,GACX,OAAO,2BACFA,GADL,IAEE1C,SAAUoD,EAAIC,KAAKC,QAAQ,GAAGC,qBAOxC/B,EAAMgC,YAAW,KAChB,CAAChC,EAAMvC,SAASyD,QAEnB,IAAMe,EAAM,uCAAG,8BAAAC,EAAA,yDACblC,EAAMgC,YAAW,QAEAf,IAAbxD,GACFiD,EAAY,CACV9C,OAAQ,CACNwD,SAAU,EACVC,SAAU,EACVC,iBAAkB,EAClBC,QAAS,EACT1D,SAAU,EACVC,UAAW,EACX0D,MAAO,GAETC,UAAWU,KAAKC,QAIN,KAAV9B,GAAgC,KAAhBE,QAAgCS,IAAVb,EAlB7B,yBAmBea,IAAtBb,EAAMiC,YAnBC,qBAsBLC,aAAW,aAAcA,aAAW,OAtB/B,qDAwBFC,GAxBE,kBAyBQC,YAAepC,EAAMiC,aAzB7B,oBA0BFI,WACAC,MAAM,KAAK,GA3BT,MAyBLb,KAzBK,MAuBPU,GAvBO,iEA8BMzC,EAAW6C,SAAS,CAC/BC,KAAMxC,EAAMyC,SACZC,UAAWC,IAAoBC,KAC/BC,SAAUC,IAAmBC,OAjCxB,QA8BPZ,EA9BO,gCAqCYb,IAAM0B,KAAN,UAChBC,8BADgB,YAEnB,CAAExB,KAAMU,EAAKV,OAvCN,aA0CaZ,KALlBW,EArCK,QA0CDC,KAAKU,KACXpD,EAAGmE,WAAW,SACXC,IADH,OACOhE,QADP,IACOA,OADP,EACOA,EAAMC,KACVmC,MACA7E,MAAK,SAAC0G,GAAU,IAAD,EACVC,EAAkBC,cAEtBvE,EAAGmE,WAAW,UACXC,IAAIE,GACJE,IAAI,CACHxG,GAAIsG,EACJhC,UAAWU,KAAKC,MAChB7C,MAAM,UAAAiE,EAAK3B,cAAL,eAAa+B,YAAb,OAAyBrE,QAAzB,IAAyBA,OAAzB,EAAyBA,EAAMsE,OACrCpG,SAAUA,EACVa,IAAI,GAAD,OAAK+E,8BAAL,YAA+CzB,EAAIC,KAAKU,MAC3DjC,MAAOA,EACPE,YAAaA,IAEd1D,MAAK,SAAC8E,GACLf,EAAS,uCAGTN,EAAS,IACTE,EAAe,IACfJ,OAASY,GACTP,OAAYO,GAEZ6C,YAAW,WACT/C,EAAY,WACZf,EAAMgC,YAAW,KAChB,QAEJ+B,OAAM,SAACC,GAAD,OACLnD,EAAS,6CAIjBA,EACE,wEAhFK,gCA0FTA,EADY,KAAVP,EACO,mCACgB,KAAhBE,EACA,yCAEA,kBA9FA,4CAAH,qDAmGZ,OACE,eAAC,IAAD,WACE,cAAC,IAAD,UACE,cAAC,IAAD,UACE,cAAC,IAAD,yBAGJ,eAAC,IAAD,CAAYyD,YAAU,EAAtB,UACE,cAAC,IAAD,CAAWC,SAAS,WAApB,SACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAUC,KAAK,QAAf,wBAKH/D,GACC,qCACE,cAAC,IAAD,CAAQgE,IAAKhE,EAAMiC,cACnB,eAAC,IAAD,WACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAQ8B,KAAK,KAAb,SACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAU3F,SAAS,WAAnB,mBACA,cAAC,IAAD,CACE6F,KAAK,OACLC,MAAOhE,EACPiE,YAAa,SAACxH,GACZwD,EAASxD,EAAEyH,OAAOF,iBAM5B,cAAC,IAAD,UACE,cAAC,IAAD,CAAQH,KAAK,KAAb,SACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAU3F,SAAS,WAAnB,yBACA,cAAC,IAAD,CACE8F,MAAO9D,EACP+D,YAAa,SAACxH,GACZ0D,EAAe1D,EAAEyH,OAAOF,iBAMlC,cAAC,IAAD,UACE,eAAC,IAAD,CAAQH,KAAK,KAAb,wCAC8B,IAD9B,OAEG1G,QAFH,IAEGA,OAFH,EAEGA,EAAUG,OAAOC,SAAS4E,WAF7B,eAEqD,IAFrD,OAGGhF,QAHH,IAGGA,OAHH,EAGGA,EAAUG,OAAOE,UAAU2E,gBAGhC,cAAC,IAAD,UACE,eAAC,IAAD,CAAQ0B,KAAK,KAAb,mBAAyB3F,OAE3B,cAAC,IAAD,UACE,cAAC,IAAD,CAAQ2F,KAAK,KAAb,SACG1G,GAAY,cAAC,EAAD,CAAaA,SAAUA,QAGxC,eAAC,IAAD,WACE,cAAC,IAAD,UACE,cAAC,IAAD,CACEgH,OAAO,QACPC,MAAM,QACNC,KAAK,UACLC,MAAM,UACNC,QAAS5C,EALX,sBAUF,cAAC,IAAD,UACE,cAAC,IAAD,CACEwC,OAAO,QACPC,MAAM,QACNC,KAAK,UACLC,MAAM,SACNC,QAAS,WAGPtE,EAAS,IACTE,EAAe,IACfJ,OAASY,GACTP,OAAYO,GACZF,EAAY,YAZhB,+BAyBV,cAAC,IAAD,CACE+D,OAAkB,KAAVlE,EACRmE,aAAc,kBAAMlE,EAAS,KAC7BmE,QAASpE,EACTqE,SAAU,OAGE,KAAbnE,GAAmB,cAAC,IAAD,CAAUoE,GAAE,WAAMpE,Y,gCCxSxCqE,GAFiBtF,IAAfC,WAEc,UAEf,SAASsF,IAAmB,IAAD,EAENjF,qBAFM,mBAEzBkF,EAFyB,KAElBC,EAFkB,KAGxBC,EAAaC,cAAbD,SAHwB,EAIYE,cAAxB9C,GAJY,EAIxB+C,WAJwB,EAIZ/C,UAAUgD,EAJE,EAIFA,UAJE,EAKXC,cAAbjE,EALwB,EAKxBA,IAAKgC,EALmB,EAKnBA,IAEb3C,qBAAU,cAGP,CAACW,EAAKgB,IAGT,IAAMkD,EAAS,uCAAG,gCAAA3D,EAAA,sEAEUqD,EAAS,CACjCO,WAAYC,IAAiBC,IAC7BC,OAAQC,IAAaC,OACrBC,QAAS,KALK,cAEVC,EAFU,OAQVC,GAAW,IAAInE,MAAOoE,UAAY,QARxB,SAUaC,EAAYH,EAAaC,GAVtC,cAUVG,EAVU,OAYhBnB,EAASmB,GAET9C,EAAIwB,EAAeuB,KAAKC,UAAUF,IAdlB,kBAgBTA,GAhBS,4CAAH,qDAmBTG,EAAmB,uCAAG,WAAMC,GAAN,SAAA3E,EAAA,+EACnB,IAAItF,SAAQ,SAACC,EAASiK,GAC3B,IAAMC,EAAS,IAAIC,WACnBD,EAAOE,QAAUH,EACjBC,EAAOG,OAAS,kBAAMrK,EAAQkK,EAAOI,SACrCJ,EAAOK,cAAcP,OALG,2CAAH,sDASnBQ,EAAoB,uCAAG,gCAAAnF,EAAA,sEAECqD,EAAS,CACjCO,WAAYC,IAAiBC,IAC7BC,OAAQC,IAAaoB,OACrBlB,QAAS,KALc,cAEnBC,EAFmB,OAQnBC,GAAW,IAAInE,MAAOoE,UAAY,QARf,SAUIC,EAAYH,EAAaC,GAV7B,cAUnBG,EAVmB,OAYzBnB,EAASmB,GAET9C,EAAIwB,EAAeuB,KAAKC,UAAUF,IAdT,kBAgBlBA,GAhBkB,4CAAH,qDAmBpBD,EAAW,uCAAG,WAAOnB,EAAoBiB,GAA3B,mBAAApE,EAAA,0DAGdI,aAAW,UAHG,gCAIGK,EAAS,CAC1BC,KAAMyC,EAAMzC,OALE,OAIVL,EAJU,OAOhBgF,EAAahF,EAAKV,KAPF,uCASGW,YAAe6C,EAAMmC,SATxB,OAShBD,EATgB,gCAWM5B,EAAU,CAChC/C,KAAM0D,EACNzE,KAAM0F,EACNzE,UAAWC,IAAoBC,OAdf,WAWZyE,EAXY,QAiBdnF,aAAW,UAjBG,0CAoBT,CACLO,SAAU4E,EAAUC,IACpBrF,YAAasF,IAAUC,eAAeH,EAAUC,OAtBlC,iCA4BT,CACL7E,SAAUyD,EACVjE,YAAagD,EAAMmC,QACnB3F,KAAM0F,IA/BQ,4CAAH,wDA6DjB,MAAO,CACLlC,QACAQ,YACAwB,uBACAT,uBChIJ,IA+DeiB,EA/DqJ,SAAC,GAA8C,IAA7CC,EAA4C,EAA5CA,OAAQC,EAAoC,EAApCA,mBAAoB/F,EAAgB,EAAhBA,WAAgB,EAEtK7B,mBAAS,IAF6J,mBAEzM6H,EAFyM,KAE1LC,EAF0L,OAGtL9H,qBAHsL,mBAGzMC,EAHyM,KAGlMC,EAHkM,OAKpK+E,IAApCS,EALwM,EAKxMA,UAAWwB,EAL6L,EAK7LA,qBAEnB,OACI,qCAGwB,gBAAlBW,GAAmC,cAAC,IAAD,CAAU9C,GAAI,CAC7CgD,SAAU,eACVhH,MAAO,CAAEd,YAIjB,cAAC,IAAD,CACI0E,OAAQgD,EACR/C,aAAc,kBAAMgD,GAAmB,IACvCI,QAAS,CACT,CACIC,KAAM,SACNC,KAAMC,IACNC,QAAS,WACL1C,IACC/I,MAAK,SAAAsD,GAEF4B,GAAW,GACX3B,EAASD,GACT6H,EAAiB,kBAEpBlE,OAAM,SAAAC,GAEHwE,QAAQC,IAAIzE,QAIxB,CACIoE,KAAM,UACNC,KAAMK,IACNH,QAAS,WACLlB,IACCvK,MAAK,SAAAsD,GACF4B,GAAW,GACX3B,EAASD,GACT6H,EAAiB,oBAI7B,CACIG,KAAM,QACNC,KAAMM,IACNJ,QAAS,WACTR,GAAmB,YC3D5B,SAAea,EAAtB,kC,4CAAO,WAA6BC,GAA7B,2BAAA3G,EAAA,6DAED4G,EAAgB3J,EAAGmE,WAAW,SAF7B,SAIcwF,EAAcnH,MAJ5B,cAICE,EAJD,OAKDkH,EAAoB,GACxBlH,EAAKmH,KAAKC,SAAQ,SAAC1F,GAAD,OAAcwF,EAAUG,KAAK3F,EAAI1B,OAAO+B,aACtDuF,EAAMJ,EAAUK,OAChBC,EAAyB,GARxB,UAUClK,EAAGmE,WAAW,SACHgG,MAAM,QAAS,KAD1B,UACgCjK,EAAKkK,mBADrC,aACgC,EAAkB1F,OACvClC,MACA7E,MAAK,SAAC0M,GACLA,EAAcP,SAAQ,SAAC1F,GACrB8F,EAAkB9F,EAAI1B,OAAO+B,eAf5C,QAmBI6F,EAAI,EAnBR,aAmBWA,EAAIN,GAnBf,qBAoBEJ,EAAUU,KAAOZ,GAAcQ,GAAmBR,IAA0B,IAAZA,EApBlE,2CAqBM,GArBN,QAmBoBY,IAnBpB,kDAwBE,GAxBF,6C,sBC2BP,IAmkBeC,EAnkB8D,SAAC,GAAoB,IAAlB1H,EAAiB,EAAjBA,WAAiB,EAGrC7B,oBAAS,GAH4B,mBAGxFwJ,EAHwF,KAGjEC,EAHiE,OAKzDzJ,oBAAkB,GALuC,mBAKxF0J,EALwF,KAK3EC,EAL2E,OAM/D3J,qBAN+D,mBAMxFyD,EANwF,KAM9EmG,EAN8E,OAO7D5J,qBAP6D,mBAOxF6J,EAPwF,KAO7EC,EAP6E,OAQ/D9J,qBAR+D,mBAQxF+J,EARwF,KAQ9EC,EAR8E,OAS/DhK,qBAT+D,mBASxFiK,EATwF,KAS9EC,EAT8E,OAUrElK,qBAVqE,mBAUxF0D,EAVwF,KAUjFyG,EAViF,OAWzEnK,qBAXyE,mBAWxFoK,EAXwF,KAWnFC,EAXmF,OAYjDrK,oBAAkB,GAZ+B,mBAYxFsK,EAZwF,KAYvEC,EAZuE,OAa/DvK,mBAAiB,IAb8C,mBAaxFwK,EAbwF,KAa9EC,EAb8E,OAc3DzK,mBAAS,mDAdkD,mBAcxF0K,GAdwF,KAc5EC,GAd4E,QAgBrE3K,mBAAiB,GAhBoD,qBAgBxF4K,GAhBwF,MAgBjFC,GAhBiF,MAiB3FC,GAAwB,GAjBmE,GAkBrE9K,mBAAiB,GAlBoD,qBAkBxF+K,GAlBwF,MAkBjFC,GAlBiF,MAmB3FC,GAAuB,EAnBoE,GAqB3CjL,mBAAiB,IArB0B,qBAqBxFkL,GArBwF,MAqBpEC,GArBoE,SAsB7CnL,mBAAiB,IAtB4B,qBAsBxFoL,GAtBwF,MAsBrEC,GAtBqE,MAyB3FC,IAA6B,EAE7BC,GAAsB,GA3BqE,GA6BjDvL,mBAAiB,IA7BgC,qBA6BxFwL,GA7BwF,MA6BvEC,GA7BuE,SA8BnDzL,mBAAiB,IA9BkC,qBA8BxF0L,GA9BwF,MA8BxEC,GA9BwE,MAiC3FC,IAA0B,EAjCiE,GAmC1DC,eAnC0D,qBAmCxFC,GAnCwF,MAmC1EC,GAnC0E,SAqCnD/L,oBAAkB,GArCiC,qBAqCxFgM,GArCwF,MAqCxEC,GArCwE,SAsC3BjM,oBAAkB,GAtCS,qBAsCxFkM,GAtCwF,MAsC5DC,GAtC4D,MAuC3FC,IAA4B,EAvC+D,GAwC7CpM,oBAAkB,GAxC2B,qBAwCxFqM,GAxCwF,MAwCpEC,GAxCoE,SA0CzDtM,oBAAS,GA1CgD,qBA0CxFuM,GA1CwF,MA0C3EC,GA1C2E,oDA2F/F,WAAyBC,GAAzB,iBAAA1K,EAAA,6DACE,UAAI7C,EAAKkK,mBAAT,aAAI,EAAkBsD,eACpBjC,EAAY,QAEZA,EAAY,IAJhB,SAOQzL,EAAGmE,WAAW,SACjBgG,MAAM,QAAS,KADZ,UACkBjK,EAAKkK,mBADvB,aACkB,EAAkB1F,OACvClC,MACA7E,MAAK,SAAC0M,GACLA,EAAcP,SAAQ,SAAC1F,GACQ,MAAzBA,EAAI1B,OAAOgJ,YACbC,GAAcvH,EAAI1B,OAAOgJ,YAE3Bd,EAAYxG,EAAI1B,OAAO+B,UACvB0G,EAAS/G,EAAI1B,OAAOgC,OACpBoG,EAAa1G,EAAI1B,OAAOiL,eACxB3C,EAAY5G,EAAI1B,OAAOkL,cACvBvC,EAAOjH,EAAI1B,OAAOmL,WAClB/B,GAAgB1H,EAAI1B,OAAO+B,SAC3ByG,EAAY9G,EAAI1B,OAAOiL,cAAgB,IAAMvJ,EAAI1B,OAAOkL,oBAEzDjQ,MAAK,WACNqC,EAAGmE,WAAW,UAAUgG,MAAM,OAAQ,KAAM2B,IAAetJ,MAAM7E,MAAK,SAAC0M,GACrEwB,GAASxB,EAAcrF,MACvBiH,GAAe,EACf5B,EAAcP,SAAQ,SAAC1F,GACK,MAApBA,EAAI1B,OAAOqJ,QACfE,IAA8B7H,EAAI1B,OAAOqJ,UAG7CC,GAASC,UAEVtO,MAAK,WAAQ8P,EAAMpI,OAAOyI,cAlCjC,4CA3F+F,sBAgI/F,OApFAjM,qBAAU,WAAO,IAAD,KACd,UAAI3B,EAAKkK,mBAAT,aAAI,EAAkBsD,eACpBjC,EAAY,QAEZA,EAAY,IAGdzL,EAAGmE,WAAW,SACXgG,MAAM,QAAS,KADlB,UACwBjK,EAAKkK,mBAD7B,aACwB,EAAkB1F,OACvClC,MACA7E,MAAK,SAAC0M,GACLA,EAAcP,SAAQ,SAAC1F,GACQ,MAAzBA,EAAI1B,OAAOgJ,YACbC,GAAcvH,EAAI1B,OAAOgJ,YAE3Bd,EAAYxG,EAAI1B,OAAO+B,UACvB0G,EAAS/G,EAAI1B,OAAOgC,OACpBoG,EAAa1G,EAAI1B,OAAOiL,eACxB3C,EAAY5G,EAAI1B,OAAOkL,cACvBvC,EAAOjH,EAAI1B,OAAOmL,WAClB3C,EAAY9G,EAAI1B,OAAOiL,cAAgB,IAAMvJ,EAAI1B,OAAOkL,sBAG7D,CAAClD,IAEJ7I,qBAAU,WAAO,IAAD,EACd7B,EAAGmE,WAAW,SACXgG,MAAM,QAAS,KADlB,UACwBjK,EAAKkK,mBAD7B,aACwB,EAAkB1F,OACvClC,MACA7E,MAAK,SAAC0M,GACLA,EAAcP,SAAQ,SAAC1F,GACrB0H,GAAgB1H,EAAI1B,OAAO+B,eAE5B9G,MAAK,WACNqC,EAAGmE,WAAW,UAAUgG,MAAM,OAAQ,KAAM2B,IAAetJ,MAAM7E,MAAK,SAAC0M,GACrEwB,GAASxB,EAAcrF,MACvBiH,GAAe,EACf5B,EAAcP,SAAQ,SAAC1F,GACK,MAApBA,EAAI1B,OAAOqJ,QACfE,IAA8B7H,EAAI1B,OAAOqJ,UAG7CC,GAASC,YAGd,IAwCD,eAAC,IAAD,WACE,cAAC,IAAD,UACE,cAAC,IAAD,UACE,cAAC,IAAD,UAAWxH,QAGf,eAAC,IAAD,CAAYK,YAAU,EAAtB,UACE,eAAC,IAAD,WACE,cAAC,IAAD,UACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CACEiJ,KAAK,QACLjP,MAAO,CAAEC,OAAQ,QAASC,MAAO,SACjC0G,QAAS,WACP+E,GAAyB,IAJ7B,SAOE,cAAC,IAAD,CAAQxF,IAAKyG,OAGf,cAAC,EAAD,CACE/C,OAAQ6B,EACR5B,mBAAoB6B,EACpB5H,WAAYA,IAGd,eAAC,IAAD,WACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAQ/D,MAAO,CAAEkP,UAAW,UAA5B,SAAyCjC,KACzC,cAAC,IAAD,CAAQjN,MAAO,CAAEkP,UAAW,UAA5B,SAAyCpC,QAE3C,eAAC,IAAD,WACE,cAAC,IAAD,CAAQ9M,MAAO,CAAEkP,UAAW,UAA5B,mBACA,cAAC,IAAD,CAAQlP,MAAO,CAAEkP,UAAW,UAA5B,gCAMV,cAAC,IAAD,UACE,cAAC,IAAD,UACE,cAAC,IAAD,UACE,eAAC,IAAD,CAASlP,MAAO,CAAEmP,YAAa,OAA/B,UACE,cAAC,IAAD,UACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAUnP,MAAO,CAAEoP,SAAU,QAA7B,SACGjD,QAIP,cAAC,IAAD,UACE,cAAC,IAAD,UACE,cAAC,IAAD,CACEkD,UAAU,gBACVrP,MAAO,CAAEoP,SAAU,QAFrB,SAIG9C,iBAQf,eAAC,IAAD,WACE,cAAC,IAAD,CAAQtM,MAAO,CAAEkP,UAAW,UAA5B,SACE,cAAC,IAAD,CACEzI,MAAM,QACNC,KAAK,UACLC,MAAM,UACNC,QAAS,kBAAMiF,GAAe,IAJhC,4BASF,cAAC,IAAD,CAAQ7L,MAAO,CAAEkP,UAAW,SAAUI,QAASC,OAAO7C,IAAtD,SACE,cAAC,IAAD,CACEjG,MAAM,QACNC,KAAK,UACLC,MAAM,SACNC,QAAO,sBAAE,4BAAA3C,EAAA,6DACPwI,GAAmB,GADZ,mBAEDrL,EAAKkK,mBAFJ,aAED,EAAkBkE,wBAFjB,2CAJX,kCAcN,cAAC,IAAD,CACE3I,OAAQ2F,EACR1F,aAAc,kBAAM2F,GAAmB,IACvCgD,SAAS,kBACTC,OAAQ,gBACR3I,QAAS,8CACTmD,QAAS,CAAC,QAEZ,cAAC,IAAD,CAAc+E,KAAK,QAAQU,WAAY,GAAKC,QAAS,IAAKC,QAAS,IAAKC,aApOiB,6CAoOzF,SACE,cAAC,IAAD,MAEF,eAAC,IAAD,CAAUjJ,OAAQ+E,EAAlB,UACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAYqD,KAAK,MAAjB,SACE,cAAC,IAAD,CACEtI,MAAM,UACNC,QAAS,WACPqH,KACApC,GAAe,GACf8B,GAAmB,IACnBE,GAAkB,IAClBR,GAAsB,IACtBE,GAAqB,KARzB,qBAcF,cAAC,IAAD,gCAGJ,eAAC,IAAD,CAAYvH,YAAU,EAAtB,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAUW,MAAOyG,GAAoB7M,SAAS,WAA9C,sBAGA,cAAC,IAAD,CACEoG,MAAO2G,GACPjH,MAAOV,EACPS,KAAK,OACLE,YAAW,uCAAE,WAAOxH,GAAP,SAAAmF,EAAA,+EAAa6H,EAAYhN,EAAEyH,OAAOF,QAAlC,2CAAF,2DAGf,eAAC,IAAD,WACE,cAAC,IAAD,CAAU9F,SAAS,WAAnB,wBACA,cAAC,IAAD,CACE8F,MAAO0F,EACP3F,KAAK,OACLE,YAAa,SAACxH,GAAD,OAAOkN,EAAalN,EAAEyH,OAAOF,aAG9C,eAAC,IAAD,WACE,cAAC,IAAD,CAAU9F,SAAS,WAAnB,uBACA,cAAC,IAAD,CACE8F,MAAO4F,EACP7F,KAAK,OACLE,YAAa,SAACxH,GAAD,OAAOoN,EAAYpN,EAAEyH,OAAOF,aAG7C,eAAC,IAAD,WACE,cAAC,IAAD,CAAUM,MAAO+G,GAAiBnN,SAAS,WAA3C,oBAGA,cAAC,IAAD,CACEoG,MAAOiH,GACPvH,MAAOT,EACPQ,KAAK,QACLE,YAAa,SAACxH,GAAD,OAAOuN,EAASvN,EAAEyH,OAAOF,aAG1C,eAAC,IAAD,WACE,cAAC,IAAD,CAAU9F,SAAS,UAAnB,uBACA,cAAC,IAAD,CACE8F,MAAOiG,EACPhG,YAAa,SAACxH,GAAD,OAAOyN,EAAOzN,EAAEyH,OAAOF,aAGxC,eAAC,IAAD,WACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAQrG,MAAO,CAAEkP,UAAW,UAA5B,SACE,cAAC,IAAD,CACE1I,OAAO,QACPC,MAAM,QACNC,KAAK,UACLC,MAAM,UACNC,QAAS,WACPqH,KACApC,GAAe,GACf8B,GAAmB,IACnBE,GAAkB,IAClBR,GAAsB,IACtBE,GAAqB,KAXzB,sBAiBF,eAAC,IAAD,CAAQvN,MAAO,CAAEkP,UAAW,UAA5B,UACE,cAAC,IAAD,CACE1I,OAAO,QACPC,MAAM,QACNC,KAAK,UACLC,MAAM,UACNC,QAAO,sBAAE,8BAAA3C,EAAA,6DACPyK,IAAe,GACfT,KACAK,IAAmB,EACnBd,IAAoB,EACpBM,IAAiB,EAEXlK,EAAO,CACX+B,SAAUA,EACVkJ,cAAe9C,EACf+C,aAAc7C,EACdrG,MAAOA,EACPmJ,UAAWzC,EACXM,WAAYA,IAbP,SAgBD1L,EAAGmE,WAAW,SACjBgG,MAAM,QAAS,KADZ,UACkBjK,EAAKkK,mBADvB,aACkB,EAAkB1F,OACvClC,MACA7E,MAAK,SAAC0M,GACLA,EAAcP,SAAQ,SAAC1F,GACrBmI,GAAcnI,EAAI1B,OAAO+B,eAG5B9G,KARG,sBAQE,sBAAAoF,EAAA,sEACE0G,EAAchF,GACjB9G,KADG,uCACE,WAAOkR,GAAP,SAAA9L,EAAA,sDACA8L,GACF1C,GAAsB,UACtBE,GAAqB,UACrBC,IAAoB,IAEpBH,GAAsB,IACtBE,GAAqB,IACrBC,IAAoB,GARlB,2CADF,uDAYH3O,KAZG,sBAYE,gCAAAoF,EAAA,sEACE7C,EAAK4O,2BAA2BpK,GAAiB/G,KAAjD,cAAAoF,EAAA,MAAsD,sBAAAA,EAAA,sEACpD/C,EAAGmE,WAAW,SAAS3B,MAAM7E,MAAK,SAAC0M,GACvCA,EAAcP,SAAQ,SAAA1F,GAAQ,IAAD,EACvBA,EAAI1B,OAAOgC,OAASA,IAAS,UAAAxE,EAAKkK,mBAAL,eAAkB1F,QAASA,IAC1DkI,IAAiB,EACjBvD,QAAQC,IAAI,4BACZmD,GAAmB,UACnBE,GAAkB,iBAPkC,4CAWzD/H,OAAM,SAACmK,GACRnC,IAAiB,EACjBvD,QAAQC,IAAI,qBACZmD,GAAmB,UACnBE,GAAkB,aAhBhB,UAkBAjI,IAAK,UAAIxE,EAAKkK,mBAAT,aAAI,EAAkB1F,SAASkI,KAAkBN,GAlBtD,0CAmBIpM,EAAKkK,mBAnBT,aAmBI,EACF4E,YAAYtK,GACb/G,KAFG,cAAAoF,EAAA,MAEE,4BAAAA,EAAA,6DACJsG,QAAQC,IAAI,6BADR,mBAEEpJ,EAAKkK,mBAFP,aAEE,EACFkE,wBACD3Q,KAFG,cAAAoF,EAAA,MAEE,4BAAAA,EAAA,yDACJsG,QAAQC,IAAI,2BACZmD,GAAmB,IACnBE,GAAkB,IAClBC,IAAiB,GACbN,GALA,gCAMItM,EACHmE,WAAW,SACXC,IAFG,UAEClE,EAAKkK,mBAFN,aAEC,EAAkB/J,KACtB4O,OAAO,CACNpB,UAAWnL,EAAKmL,UAChBnJ,MAAOhC,EAAKgC,MACZgH,WAAYhJ,EAAKgJ,WACjBiC,cAAejL,EAAKiL,cACpBC,aAAclL,EAAKkL,aACnBnJ,SAAU/B,EAAK+B,WAfjB,4CAmBLG,OAAM,SAAUmK,GACf1F,QAAQC,IAAI,wBAxBZ,4CA2BL1E,OAAM,SAAUmK,GACftC,GAAmB,IACnBE,GAAkB,IAClBS,IAAmB,EACnBH,IAAkB,MApDpB,iCAuDEL,KACFH,GAAmB,IACnBE,GAAkB,MAGhBL,KAAqBM,GA5DvB,kCA6DM5M,EACHmE,WAAW,SACXC,IAFG,UAEClE,EAAKkK,mBAFN,aAEC,EAAkB/J,KACtB4O,OAAO,CACNpB,UAAWnL,EAAKmL,UAChBnJ,MAAOhC,EAAKgC,MACZgH,WAAYhJ,EAAKgJ,WACjBiC,cAAejL,EAAKiL,cACpBC,aAAclL,EAAKkL,aACnBnJ,SAAU/B,EAAK+B,WAtEnB,6CA0EH9G,KAtFC,sBAsFI,sBAAAoF,EAAA,yDACF0B,GAAY8H,KAAeD,KAAqBM,IAAmBQ,GADjE,gCAEEpN,EAAGmE,WAAW,UAAUgG,MAAM,OAAQ,KAAMoC,IAAa/J,MAAM7E,MAAK,SAAC0M,GACzEA,EAAcP,QAAd,uCAAsB,WAAM1F,GAAN,eAAArB,EAAA,6DAChBmM,EAAmB9K,EAAI1B,QACjBtC,KAAOiO,OAAO5J,GAFJ,SAGdzE,EACHmE,WAAW,UACXC,IAAIA,EAAI1B,OAAO1E,IACfwG,IAAI0K,GANa,2CAAtB,0DAHE,4CAaLvR,MAAK,WACD2O,IAAsBM,GAQjBN,GAQAM,IASRG,KACKK,IACHzC,GAAe,IAVjBmC,GAAa,CACX9D,QAAS,CAAC,CAAEC,KAAM,OAAQG,QAAS,kBAAM2D,QACzClH,QAAS,mCACTC,SAAU,IACVL,MAAO,WAZTqH,GAAa,CACX9D,QAAS,CAAC,CAAEC,KAAM,OAAQG,QAAS,kBAAM2D,QACzClH,QAAS,sCACTC,SAAU,IACVL,MAAO,WAZTqH,GAAa,CACX9D,QAAS,CAAC,CAAEC,KAAM,OAAQG,QAAS,kBAAM2D,QACzClH,QAAS,gDACTC,SAAU,IACVL,MAAO,cA1GX,4CAqIL9H,MAAK,WACJ6P,IAAe,MA9JZ,2CALX,kBAyKA,cAAC,IAAD,CACE7H,OAAQqH,GACRuB,SAAS,kBACTC,OAAQ,QACR3I,QAAS,uDACTsJ,OAAQ,CACN,CACEC,KAAM,WACNlK,KAAM,WACNmK,YAAa,aAGjBrG,QAAS,CACP,CACEC,KAAM,SACNqG,KAAM,SACNf,SAAU,YACVnF,QAAS,WACPC,QAAQC,IAAI,kBACZ2D,IAAkB,KAGtB,CACEhE,KAAM,KACNG,QAAQ,WAAD,4BAAE,WAAOxL,GAAP,eAAAmF,EAAA,6DACPsG,QAAQC,IAAI,cADL,SAGDpJ,EACHqP,2BADG,UACwBrP,EAAKkK,mBAD7B,aACwB,EAAkB1F,MAAiB9G,EAAE4R,UAChE7R,MAAK,WACJsP,IAAkB,GAClBK,IAAoB,MAErB1I,OAAM,SAACC,GACNoI,IAAkB,GAClBE,IAA8B,MAX3B,2CAAF,mDAAC,OAiBd,cAAC,IAAD,CACExH,OAAQuH,GACRtH,aAAc,WACZuH,IAA8B,GAC9BF,IAAkB,IAEpBsB,SAAS,kBACTC,OAAQ,qBACR3I,QAAS,yCACTmD,QAAS,CAAC,QAEZ,cAAC,IAAD,CACErD,OAAQ0H,GACRzH,aAAc,WACZ0H,IAAoB,IAEtBiB,SAAS,kBACTC,OAAQ,mBACR3I,QAAS,oCACTmD,QAAS,CAAC,QAEZ,cAAC,IAAD,CACErD,OAAQ4H,GACR1H,QAAS,yBAIf,cAAC,IAAD,UACE,cAAC,IAAD,CAAQ/G,MAAO,CAAEkP,UAAW,UAA5B,SACE,cAAC,IAAD,CACEzI,MAAM,QACNC,KAAK,UACLC,MAAM,SACNC,QAAS,WACPqH,KACA7M,EAAKuP,WANT,wCCrgBHC,G,6EA/DiJ,SAAC,GAA8C,IAA7C/G,EAA4C,EAA5CA,OAAQC,EAAoC,EAApCA,mBAAoB/F,EAAgB,EAAhBA,WAAgB,EAElK7B,mBAAS,IAFyJ,mBAErM6H,EAFqM,KAEtLC,EAFsL,OAGlL9H,qBAHkL,mBAGrMC,EAHqM,KAG9LC,EAH8L,OAKhK+E,IAApCS,EALoM,EAKpMA,UAAWwB,EALyL,EAKzLA,qBAEnB,OACI,qCAGwB,WAAlBW,GAA8B,cAAC,IAAD,CAAU9C,GAAI,CACxCgD,SAAU,UACVhH,MAAO,CAAEd,YAIjB,cAAC,IAAD,CACI0E,OAAQgD,EACR/C,aAAc,kBAAMgD,GAAmB,IACvCI,QAAS,CACT,CACIC,KAAM,SACNC,KAAMC,IACNC,QAAS,WACL1C,IACC/I,MAAK,SAAAsD,GAEF4B,GAAW,GACX3B,EAASD,GACT6H,EAAiB,aAEpBlE,OAAM,SAAAC,GAEHwE,QAAQC,IAAIzE,QAIxB,CACIoE,KAAM,UACNC,KAAMK,IACNH,QAAS,WACLlB,IACCvK,MAAK,SAAAsD,GACF4B,GAAW,GACX3B,EAASD,GACT6H,EAAiB,eAI7B,CACIG,KAAM,QACNC,KAAMM,IACNJ,QAAS,WACTR,GAAmB,aC/DnC,SAAS+G,EAAiBC,GACxB,OAAQA,EAAUC,KAAKC,GAAM,IAGxB,SAASC,EAAaC,EAAcC,EAAcC,EAAcC,GACrE,IAEIC,EAAOT,EAAiBO,EAAOF,GAC/BK,EAAOV,EAAiBQ,EAAOF,GAEnCD,EAAOL,EAAiBK,GACxBE,EAAOP,EAAiBO,GAExB,IAAInN,EACF8M,KAAKS,IAAIF,EAAO,GAAKP,KAAKS,IAAIF,EAAO,GACrCP,KAAKS,IAAID,EAAO,GAAKR,KAAKS,IAAID,EAAO,GAAKR,KAAKU,IAAIP,GAAQH,KAAKU,IAAIL,GAEtE,OAZoB,MAWZ,EAAIL,KAAKW,MAAMX,KAAKY,KAAK1N,GAAI8M,KAAKY,KAAK,EAAI1N,KCf9C,SAAe2N,EAAtB,kC,4CAAO,WAA4B7K,GAA5B,mBAAA9C,EAAA,6DACG4N,EAAQC,SAASC,cAAc,cAC/BhL,QAAUA,EAChB8K,EAAM3H,QAAU,CAAC,MAEjB4H,SAASE,KAAKC,YAAYJ,GALvB,SAMGA,EAAMK,UANT,uBAQoBL,EAAM/K,eAR1B,gBAQK0J,EARL,EAQKA,KACRjG,QAAQC,IAAI,kCAAmCgG,GAT5C,6C,sBAYE,SAAe2B,EAAtB,oC,4CAAO,WAAsCpL,EAAa2I,GAAnD,mBAAAzL,EAAA,6DACC4N,EAAQC,SAASC,cAAc,cAC/BrC,OAASA,EACfmC,EAAM9K,QAAUA,EAChB8K,EAAM3H,QAAU,CAAC,MAEjB4H,SAASE,KAAKC,YAAYJ,GANrB,SAOCA,EAAMK,UAPP,uBASkBL,EAAM/K,eATxB,gBASG0J,EATH,EASGA,KACRjG,QAAQC,IAAI,kCAAmCgG,GAV1C,6C,kCCPF,SAAe4B,EAAtB,sC,4CAAO,WACL9Q,EACA+Q,EACAlQ,GAHK,eAAA8B,EAAA,sEAMC/C,EACHmE,WAAW,SACXC,IAFG,OAEChE,QAFD,IAECA,OAFD,EAECA,EAAMC,KACV4O,OAAO,CACNmC,WAAY5R,IAASS,UAAUoR,WAAWC,WAAWrQ,EAAMjD,MAE5D4G,OAAM,SAACC,GAAD,OAAS6L,EAAa7L,EAAIgB,YAZ9B,cAcD0L,EAAOJ,EAEXI,GAAQ,EAhBH,SAmBCvR,EACHmE,WAAW,UACXC,IAAInD,EAAMjD,IACViR,OAAO,CACNlD,MAAOwF,IAER3M,OAAM,SAACC,GAAD,OAAS6L,EAAa7L,EAAIgB,YAzB9B,gCA0BE0L,GA1BF,4C,sBA6BA,SAAeC,EAAtB,sC,4CAAO,WACLpR,EACA+Q,EACAlQ,GAHK,eAAA8B,EAAA,sEAMC/C,EACHmE,WAAW,SACXC,IAFG,OAEChE,QAFD,IAECA,OAFD,EAECA,EAAMC,KACV4O,OAAO,CACNmC,WAAY5R,IAASS,UAAUoR,WAAWI,YAAYxQ,EAAMjD,MAE7D4G,OAAM,SAACC,GAAD,OAAS6L,EAAa7L,EAAIgB,YAZ9B,cAcD0L,EAAOJ,GAEXI,GAAQ,IAEG,IACTA,EAAO,GAnBJ,SAuBCvR,EACHmE,WAAW,UACXC,IAAInD,EAAMjD,IACViR,OAAO,CACNlD,MAAOwF,IAER3M,OAAM,SAACC,GAAD,OAAS6L,EAAa7L,EAAIgB,YA7B9B,gCA+BE0L,GA/BF,4C,sBCAP,IAgIeG,EAhI+B,SAAC,GAA2B,IAAzBzQ,EAAwB,EAAxBA,MAAO4B,EAAiB,EAAjBA,WAAiB,EACnC7B,mBAAS,GAD0B,mBAChEmQ,EADgE,KACpDQ,EADoD,OAEvC3Q,mBAAS4Q,KAF8B,mBAEhEC,EAFgE,KAEtDC,EAFsD,OAGrC9Q,mBAAS,QAH4B,mBAGhE+Q,EAHgE,KAGrDC,EAHqD,OAI/ChR,oBAAS,GAJsC,mBAIhEiR,EAJgE,KAI1DC,EAJ0D,KAMjE9R,EAAOU,qBAAWC,IAExBc,qBAAU,WACR7B,EAAGmE,WAAW,UACXC,IAAInD,EAAMjD,IACVwE,MACA7E,KAHH,uCAGQ,WAAOwU,GAAP,iBAAApP,EAAA,8DACmCjB,KAAnC,UAAAqQ,EAAiBzP,cAAjB,eAAyBqJ,OADzB,iEAII/L,EACHmE,WAAW,SACXC,IAFG,OAEChE,QAFD,IAECA,OAFD,EAECA,EAAMC,KACVmC,MACA7E,KAJG,uCAIE,WAAOwU,GAAP,mBAAApP,EAAA,sDACAqP,EADA,UACwBD,EAAiBzP,cADzC,aACwB,EAAyB0O,WAEjDiB,GAAe,OACCvQ,IAAhBsQ,IACFC,OAAiDvQ,GAA3CsQ,EAAYE,MAAK,SAAChI,GAAD,OAAOA,IAAMrJ,EAAMjD,OAGxCqU,IACFP,EAAYS,KACZP,EAAa,WAVX,2CAJF,uDAJJ,OAqBFL,EAAa,UAACQ,EAAiBzP,cAAlB,aAAC,EAAyBqJ,OArBrC,2CAHR,0DA6BF,IAAMyG,EAAcC,sBAAW,sBAAC,sBAAA1P,EAAA,0DACjB,IAATkP,EAD0B,uBAE5BC,GAAQ,GACRvN,YAAW,kBAAMuN,GAAQ,KAAQ,UAEfpQ,GAAde,GAAyBA,GAAW,GALZ,SAOtB7C,EACHmE,WAAW,SACXC,IAFG,OAEChE,QAFD,IAECA,OAFD,EAECA,EAAMC,KACVmC,MACA7E,KAJG,uCAIE,WAAOwU,GAAP,qBAAApP,EAAA,yDACAqP,EADA,UACwBD,EAAiBzP,cADzC,aACwB,EAAyB0O,WAEjDiB,GAAe,OACCvQ,IAAhBsQ,IACFC,OAAiDvQ,GAA3CsQ,EAAYE,MAAK,SAAChI,GAAD,OAAOA,IAAMrJ,EAAMjD,QAGxCqU,EARA,iCASeb,EAAepR,EAAM+Q,EAAYlQ,GAThD,OASEsQ,EATF,OAWFI,EAAcJ,GACdS,EAAa,QACbF,EAAYF,KAbV,yCAiBeV,EAAa9Q,EAAM+Q,EAAYlQ,GAjB9C,QAiBEsQ,EAjBF,OAmBFI,EAAcJ,GACdS,EAAa,UACbF,EAAYS,KArBV,aAwBczQ,GAAde,GAAyBA,GAAW,GAxBpC,4CAJF,uDA8BH+B,OAAM,SAACC,GAAD,OAAS6L,EAAa7L,EAAIgB,YArCP,YAuCZ/D,GAAde,GAAyBA,GAAW,GAvCV,2CAwC7B,CAACsO,EAAYlQ,EAAOb,EAAMJ,EAAIiS,IAEjC,OACE,eAAC,IAAD,CAAS9D,UAAU,cAAnB,UAEE,eAAC,IAAD,WACE,cAAC,IAAD,CAASjF,KAAMwJ,IAAK3E,KAAK,UACzB,cAAC,IAAD,UACG9M,EAAM3C,SAASe,SACZ4B,EAAM3C,SAASe,SACf4B,EAAM3C,SAASG,OAAOC,SACtB,IACAuC,EAAM3C,SAASG,OAAOE,eAK7BsC,EAAM0R,SACL,cAAC,IAAD,UACE,cAAC,IAAD,oBACM1R,EAAM0R,SAASrP,WAAWsP,MAAM,EAAG,GADzC,yBAKF,cAAC,IAAD,UACE,cAAC,IAAD,yBAIJ,eAAC,IAAD,WACE,cAAC,IAAD,UAAkB3R,EAAMb,OACxB,cAAC,IAAD,UAAea,EAAME,WAGvB,eAAC,IAAD,WACE,cAAC,IAAD,CAAQ8D,IAAKhE,EAAM9B,MACnB,uBACA,eAAC,IAAD,CAAY4O,KAAK,QAAjB,UACE,cAAC,IAAD,CAAWtI,MAAOsM,EAAWrM,QAAS8M,EAAtC,SACE,cAAC,IAAD,CAAStJ,KAAM2I,MAEjB,cAAC,IAAD,UAAUV,OAEZ,uBACA,cAAC,IAAD,CAASrS,MAAO,CAAEoP,SAAU,SAA5B,SAAwCjN,EAAMI,qBCrI9CZ,I,OAAgBC,IAAhBD,aAwLOoS,GAtLU,WAAO,IAAD,EACD7R,mBAAS,YADR,mBACtB8R,EADsB,KACdC,EADc,OAED/R,mBAAuB,IAFtB,mBAEtBgS,EAFsB,KAEdC,EAFc,OAGKjS,oBAAS,GAHd,mBAGtBkS,EAHsB,KAGXC,EAHW,OAIDnS,qBAJC,mBAItBoS,EAJsB,KAIdC,EAJc,OAMGrS,qBANH,mBAMtB1C,EANsB,KAMZiD,EANY,cAmBd+R,IAnBc,2EAmB7B,gCAAAvQ,EAAA,6DAEQwQ,EAAMvT,EAAGmE,WAAW,UAF5B,SAGqBoP,EAAI/Q,MAHzB,cAGQE,EAHR,OAMM8Q,EAAa,GACjB9Q,EAAKmH,KAAKC,SAAQ,SAAC1F,GAAD,OAAcoP,EAAEzJ,KAAK3F,EAAI1B,WAC3C8Q,EAAE1J,SAAQ,SAAC2J,QACQ3R,IAAbxD,QAA8CwD,GAApB2R,EAAQd,WACpCc,EAAQd,SAAW5C,EAAY,OAC7BzR,QAD6B,IAC7BA,OAD6B,EAC7BA,EAAUG,OAAOC,SADY,OAE7BJ,QAF6B,IAE7BA,OAF6B,EAE7BA,EAAUG,OAAOE,UACjB8U,EAAQnV,SAASG,OAAOC,SACxB+U,EAAQnV,SAASG,OAAOE,eAdhC,kBAmBS6U,GAnBT,4CAnB6B,sBAiF7B,OAzEA3R,qBAAU,WACR,sBAAC,sBAAAkB,EAAA,kEAECxB,EAFD,SAEmBd,GAAYuB,qBAF/B,yCAICqH,QAAQC,IAAI,mBAJb,KAMC2J,EAND,SAMiBK,IANjB,6EAAD,KAQC,IAiED,eAAC,IAAD,WACE,cAAC,IAAD,UACE,cAAC,IAAD,UACE,cAAC,IAAD,yBAGJ,eAAC,IAAD,CAAYxO,YAAU,EAAtB,UACE,cAAC,IAAD,CACEM,YAAa,SAACxH,GAjDtB,IAAqB8V,IAkDE9V,EAAE+V,OAA4BxO,MAjDnDkE,QAAQC,IAAI,YAAaoK,GAEN,KAAfA,GAAoC,OAAfA,QAAsC5R,IAAf4R,EAC9CJ,IAAc3V,MAAK,SAAC8E,GAClBwQ,EAAUxQ,MAEQ,aAAXqQ,EACTQ,IAAc3V,MAAK,SAAC8E,GAClB,IAAI6H,EAAa,GACjB7H,EAAIqH,SAAQ,SAAC7I,GAAW,IAAD,GACrB,UAAIA,EAAM3C,SAASe,gBAAnB,aAAI,EAAyBuU,SAASF,KACpCpJ,EAAEP,KAAK9I,MAGXgS,EAAU3I,MAEQ,UAAXwI,EACTQ,IAAc3V,MAAK,SAAC8E,GAClB,IAAI6H,EAAa,GACjB7H,EAAIqH,SAAQ,SAAC7I,GACPA,EAAME,MAAMyS,SAASF,IACvBpJ,EAAEP,KAAK9I,MAGXgS,EAAU3I,MAEQ,SAAXwI,GACTQ,IAAc3V,MAAK,SAAC8E,GAClB,IAAI6H,EAAa,GACjB7H,EAAIqH,SAAQ,SAAC7I,GACPA,EAAMb,KAAKwT,SAASF,IACtBpJ,EAAEP,KAAK9I,MAGXgS,EAAU3I,OAiBRuJ,iBAAiB,UAGnB,eAAC,IAAD,sBAAwBf,KACxB,cAAC,IAAD,CACEhU,MACa,aAAXgU,EACI,CAAEgB,gBAAiB,YAAarO,MAAO,SACvC,GAENC,QAAS,SAAC9H,GACRmV,EAAU,aAPd,SAUE,cAAC,IAAD,yBAEF,cAAC,IAAD,CACEjU,MACa,SAAXgU,EACI,CAAEgB,gBAAiB,YAAarO,MAAO,SACvC,GAENC,QAAS,SAAC9H,GACRmV,EAAU,SAPd,SAUE,cAAC,IAAD,qBAEF,cAAC,IAAD,CACEjU,MACa,UAAXgU,EACI,CAAEgB,gBAAiB,YAAarO,MAAO,SACvC,GAENC,QAAS,SAAC9H,GACRmV,EAAU,UAPd,SAUE,cAAC,IAAD,sBAGF,cAAC,IAAD,UACE,cAAC,IAAD,UACGC,EAAO5V,KAAI,SAAC2W,GAAc,IAAD,EACxB,OACE,eAAC,IAAD,CAAQ/O,KAAK,IAAb,UACE,cAAC,IAAD,CACEU,QAAS,SAAC9H,GACRuV,GAAa,GACbE,EAAUU,IAEZ9O,IAAK8O,EAAE5U,IACPL,MAAO,CACLkV,UAAW,QACXjV,OAAQ,OACRC,MAAO,UAGX,oBACEF,MAAO,CACLO,SAAU,WACV4U,OAAQ,QACRC,MAAO,OACPJ,gBAAiB,kBACjBK,aAAc,OANlB,oBASGJ,EAAEpB,gBATL,aASG,EAAYyB,YAAY,GAT3B,kBAiBV,cAAC,IAAD,CACE7F,SAAS,cACT8F,iBAAiB,EACjBC,cAAc,EACd3O,OAAQuN,EACRtN,aAAc,SAAChI,GAAD,OAAOuV,GAAa,IALpC,SAOGC,GAAU,cAAC,EAAD,CAAanS,MAAOmS,aCzM1B,I,OAAA,IAA0B,kC,MCKlC,SAAe3J,GAAtB,mC,8CAAO,WAA6BC,GAA7B,uBAAA3G,EAAA,6DAED4G,EAAgB3J,EAAGmE,WAAW,SAF7B,SAIcwF,EAAcnH,MAJ5B,OAICE,EAJD,OAKDkH,EAAoB,GACxBlH,EAAKmH,KAAKC,SAAQ,SAAC1F,GAAD,OAAcwF,EAAUG,KAAK3F,EAAI1B,OAAO+B,aACtDuF,EAAMJ,EAAUK,OAEXK,EAAI,EATR,YASWA,EAAIN,GATf,oBAUCJ,EAAUU,KAAOZ,EAVlB,2CAWM,GAXN,QASoBY,IATpB,iDAcE,GAdF,6C,sBCDA,SAAeiK,GAAtB,qC,8CAAO,WACL9P,EACA+P,GAFK,SAAAzR,EAAA,sEAKK0G,GAAchF,GALnB,kDAMGzE,EAAGmE,WAAW,SACjBgG,MAAM,WAAY,KAAM1F,GACxBjC,MACA7E,MAAK,SAAC0M,GACLA,EAAcP,QAAd,uCAAsB,WAAO1F,GAAP,SAAArB,EAAA,sEACf7C,EACFqP,2BAA2BnL,EAAI1B,OAAOgC,MAAO8P,GAC7C5P,OAAM,SAACC,GAAD,OAAS6L,EAAa,2CAHX,2CAAtB,0DAVD,6CAiBGxQ,EACHqP,2BAA2B9K,EAAU+P,GACrC5P,OAAM,SAACC,GAAD,OAAS6L,EAAa,2CAnB5B,4C,sBCEA,SAAe+D,GAAtB,qC,8CAAO,WAA0BhQ,EAAe+P,GAAzC,SAAAzR,EAAA,yDAEqB,IAApB0B,EAASwF,OAFV,gBAEwByG,EAAa,8BAFrC,0BAG0B,IAApB8D,EAASvK,OAHf,gBAG6ByG,EAAa,qBAH1C,wCAKO6D,GAA8B9P,EAAU+P,GAL/C,6C,sBCJA,SAAeE,GAAtB,mC,8CAAO,WAAgCC,GAAhC,eAAA5R,EAAA,6DACD6R,EAAa,GAGfA,EADmB,aAAjBD,EACI,CAAC,OAAQE,KAET,CAAC,WAAYC,KANhB,kBAQEF,GARF,4C,sBCuBP,ICzBYG,GDiLGC,GAxJS,WAAO,IAAD,EACIhU,mBAAS,IADb,mBACrByD,EADqB,KACXmG,EADW,OAEI5J,mBAAS,IAFb,mBAErBwT,EAFqB,KAEXS,EAFW,OAG4BjU,mBAAS8T,KAHrC,mBAGrBI,EAHqB,KAGCC,EAHD,OAIYnU,mBAAc,YAJ1B,mBAIrB2T,EAJqB,KAIPS,EAJO,OAKsCpU,oBAChE,GAN0B,mBAKrBqU,EALqB,KAKMC,EALN,KAStBC,EAAuB9C,uBAC3B,SAAC7U,GAAD,aAAOgN,EAAW,UAAChN,EAAEyH,cAAH,aAAC,EAAUF,SAC7B,IAEIqQ,EAAmB/C,uBAAY,SAAC7U,GAAD,aAAOqX,EAAW,UAACrX,EAAEyH,cAAH,aAAC,EAAUF,SAAQ,IAEpEsQ,EAA0BhD,sBAAW,sBAAC,iBAAA1P,EAAA,SAAAA,EAAA,sEACrB2R,GAAiBC,GADI,OACtC5R,EADsC,OAE1CqS,EAAgBrS,EAAE,IAClBoS,EAAwBpS,EAAE,IAHgB,2CAIzC,CAAC4R,IAEEe,EAAejD,sBAAW,sBAAC,sBAAA1P,EAAA,sEACzB0R,GAAWhQ,EAAU+P,GADI,2CAE9B,CAAC/P,EAAU+P,IAEd,OACE,eAAC,IAAD,WACE,eAAC,IAAD,CAAY1P,YAAU,EAAtB,UACE,uBACA,uBACA,uBACA,cAAC,IAAD,CAAUqJ,UAAU,QAApB,qBACA,uBACA,cAAC,IAAD,UACE,cAAC,IAAD,UACE,cAAC,IAAD,CACEnJ,KAAK,KACLlG,MAAO,CACLsP,QAAS,OACTuH,eAAgB,SAChBC,WAAY,UALhB,SAQE,cAAC,IAAD,CAAQzH,UAAU,OAAOlJ,IAAKiE,WAIpC,uBACA,eAAC,IAAD,WACE,cAAC,IAAD,UACE,cAAC,IAAD,CACElE,KAAK,KACLlG,MAAO,CACLsP,QAAS,OACTuH,eAAgB,SAChBC,WAAY,UALhB,SAQE,eAAC,IAAD,CAASC,MAAM,OAAO1H,UAAU,aAAhC,UACE,cAAC,IAAD,CAAU9O,SAAS,WAAnB,+BACA,cAAC,IAAD,CACE+F,YAAamQ,EACbpQ,MAAOV,EACPqR,MAAM,QACN5Q,KAAK,gBAMb,cAAC,IAAD,UACE,cAAC,IAAD,CACEF,KAAK,KACLlG,MAAO,CACLsP,QAAS,OACTuH,eAAgB,SAChBC,WAAY,UALhB,SAQE,eAAC,IAAD,CAASC,MAAM,OAAO1H,UAAU,aAAhC,UACE,cAAC,IAAD,CAAU9O,SAAS,WAAnB,sBACA,cAAC,IAAD,CACE+F,YAAaoQ,EACbrQ,MAAOqP,EACPtP,KAAMyP,IAER,cAAC,IAAD,CAASxG,UAAU,WACjBJ,KAAK,MACL7E,KAAMgM,EACNxP,QAAS+P,WAMjB,qBAAKtH,UAAU,cAAf,SACE,cAAC,IAAD,UACE,cAAC,IAAD,CACEnJ,KAAK,KACLlG,MAAO,CACLsP,QAAS,OACTuH,eAAgB,SAChBC,WAAY,UALhB,SAQE,eAAC,IAAD,CAAWlQ,QAASgQ,EAAcpQ,OAAO,QAAzC,kBAEE,cAAC,IAAD,CAAS4D,KAAM6M,kBAMzB,eAAC,IAAD,WACE,uBACA,uBACA,qBAAK5H,UAAU,cAAf,SACE,cAAC,IAAD,CAAe6H,WAAY,YAA3B,oCAIF,uBACA,qBAAK7H,UAAU,cAAf,SACE,cAAC,IAAD,CAAezI,QAAS,kBAAM4P,GAA6B,IAA3D,0CAMN,cAAC,IAAD,CACE3P,OAAQ0P,EACRzP,aAAc,kBAAM0P,GAA6B,IACjDzP,QAAS,4BACTsJ,OAAQ,CACN,CACEC,KAAM,wBACNlK,KAAM,QACNmK,YAAa,UAGjBrG,QAAS,CACP,CACEC,KAAM,OACNG,QAAS,SAAC1G,GACRxC,EAAK+V,uBAAuBvT,EAAKwT,gC,qCCzKnCnB,K,kBAAAA,E,kBAAAA,E,uBAAAA,E,YAAAA,E,QAAAA,E,iBAAAA,Q,KAUL,IAAMoB,GAAb,kDAQYC,uBAAyB,0EARrC,qDAaI,SAAwB5B,GACpB,OAAO6B,KAAKD,uBAAuBE,KAAK9B,KAdhD,mCAoBI,SAA6BA,GAGzB,IAAI+B,EAAmB,EACvBA,EAAmB,YAAYD,KAAK9B,KAAc+B,EAAmBA,EACrEA,EAAmB,YAAYD,KAAK9B,KAAc+B,EAAmBA,EACrEA,EAAmB,YAAYD,KAAK9B,KAAc+B,EAAmBA,EACrEA,EAAmB,eAAeD,KAAK9B,KAAc+B,EAAmBA,EAG1CxB,GAAsByB,MAmBpD,OAhBgB,MAAZhC,GAAgC,IAAZA,EACMO,GAAsB0B,OACzCjC,EAASvK,OAASkM,EAAqBO,cACpB3B,GAAsByB,OAEP,IAApCH,KAAKM,iBAAiBnC,GACDO,GAAsB6B,OACpB,IAArBL,GAA+C,IAArBA,GAA+C,IAArBA,EACjCxB,GAAsB8B,KACpB,IAArBN,EACmBxB,GAAsB+B,GAEtB/B,GAAsBgC,UA7C5D,0BAGI,WACI,OAAO,MAJf,KCGO,SAAeC,KAAtB,gC,8CAAO,4BAAAjU,EAAA,sDACH,UAAA7C,EAAKkK,mBAAL,SAAkBkE,wBADf,4C,sBCNA,SAAe2I,GAAtB,2C,8CAAO,WACLzC,EACA9P,EACAiJ,EACAC,EACAlE,GALK,SAAA3G,EAAA,sEAQE7C,EACJgX,+BAA+BxS,EAAO8P,GACtC7W,KAFI,+BAAAoF,EAAA,MAEC,WAAOoU,GAAP,iBAAApU,EAAA,6DACOoU,EAAe/W,KAE1B4W,KAGMtU,EAAO,CACX+B,SAAUiF,EACViE,cAAeA,EACfC,aAAcA,EACdlJ,MAAOA,GAVL,SAYE1E,EAAGmE,WAAW,SACjBC,IADG,UACClE,EAAKkK,mBADN,aACC,EAAkB/J,KACtBmE,IAAI9B,GACJkC,OAAM,SAACC,GAAD,OAAS6L,EAAa7L,EAAIgB,YAf/B,2CAFD,uDAmBJjB,OAAM,SAACC,GAAD,OAAS6L,EAAa7L,EAAIgB,YA3B9B,gCA4BE,IA5BF,4C,sBCHA,SAAeuR,GAAtB,6C,8CAAO,WACLC,EACA7C,EACA9P,EACAiJ,EACAC,EACAlE,GANK,SAAA3G,EAAA,yDAQmB,IAApB2G,EAASO,OARR,gBAQuByG,EAAa,qBARpC,uCASUjH,GAAcC,GATxB,mCASmCgH,EAAa,0BAThD,2BAU6B,IAAzB/C,EAAc1D,OAVlB,iBAUgCyG,EAAa,sBAV7C,2BAW4B,IAAxB9C,EAAa3D,OAXjB,iBAW+ByG,EAAa,uBAX5C,2BAYqB,IAAjBhM,EAAMuF,OAZV,iBAYwByG,EAAa,kBAZrC,2BAawB,IAApB8D,EAASvK,OAbb,iBAa2ByG,EAAa,qBAbxC,6BAcI8D,EAASvK,OAAS,GAdtB,iBAcyByG,EAAa,qBAdtC,2BAeI2G,IAAoB7C,EAfxB,iBAekC9D,EAAa,wBAf/C,yCAiBGuG,GAASzC,EAAU9P,EAAOiJ,EAAeC,EAAclE,GAjB1D,6C,sBC2BP,IAiLe4N,GAjLY,WAAO,IAAD,EACLtW,mBAAS,IADJ,mBACxB0D,EADwB,KACjByG,EADiB,OAEWnK,mBAAS,IAFpB,mBAExB2M,EAFwB,KAET4J,EAFS,OAGSvW,mBAAS,IAHlB,mBAGxB4M,EAHwB,KAGV4J,EAHU,OAICxW,mBAAS,IAJV,mBAIxBwT,EAJwB,KAIdS,EAJc,OAKejU,mBAAS,IALxB,mBAKxBqW,EALwB,KAKPI,EALO,OAMCzW,mBAAS,IANV,mBAMxB0I,EANwB,KAMdgO,EANc,OAOyB1W,mBAAS8T,KAPlC,mBAOxBI,EAPwB,KAOFC,EAPE,OAQSnU,mBAAc,YARvB,mBAQxB2T,EARwB,KAQVS,EARU,OASCpU,mBAAS,SATV,mBASxB2W,EATwB,KASdC,EATc,OAa3B5W,mBAAS8T,KAbkB,mBAW7B+C,EAX6B,KAY7BC,EAZ6B,OAcuB9W,mBACpD,YAf6B,mBAcxB+W,EAdwB,KAcHC,EAdG,OAiBKhX,mBAAS+T,GAAsB0B,QAjBpC,oBAiBxBwB,GAjBwB,MAiBZC,GAjBY,MAmB3BC,GAAgC,IAAIhC,GAElCiC,GAAoB3F,uBAAY,SAAC7U,GAAD,aAAOuN,EAAQ,UAACvN,EAAEyH,cAAH,aAAC,EAAUF,SAAQ,IAElEqQ,GAAmB/C,uBAAY,SAAC7U,GAAO,IAAD,IAC1CqX,EAAW,UAACrX,EAAEyH,cAAH,aAAC,EAAUF,OACtB,IAAIkT,EAAQF,GAAQG,sBAAR,UAA8B1a,EAAEyH,cAAhC,aAA8B,EAAUF,OACpD+S,GAAcG,GACVA,IAAUtD,GAAsB0B,OAClCmB,EAAY,SAELS,IAAUtD,GAAsByB,MACvCoB,EAAY,UAELS,IAAUtD,GAAsB8B,MAAQwB,IAAUtD,GAAsB6B,OAC/EgB,EAAY,WAELS,IAAUtD,GAAsBgC,QAAUsB,IAAUtD,GAAsB+B,IACjFc,EAAY,aAEb,IAEGW,GAA0B9F,uBAC9B,SAAC7U,GAAD,aAAO6Z,EAAkB,UAAC7Z,EAAEyH,cAAH,aAAC,EAAUF,SACpC,IAEIqT,GAAoB/F,uBACxB,SAAC7U,GAAD,aAAO2Z,EAAgB,UAAC3Z,EAAEyH,cAAH,aAAC,EAAUF,SAClC,IAEIsT,GAAmBhG,uBACvB,SAAC7U,GAAD,aAAO4Z,EAAe,UAAC5Z,EAAEyH,cAAH,aAAC,EAAUF,SACjC,IAEIuT,GAAmBjG,uBAAY,SAAC7U,GAAD,aAAO8Z,EAAW,UAAC9Z,EAAEyH,cAAH,aAAC,EAAUF,SAAQ,IAEpEsQ,GAA0BhD,sBAAW,sBAAC,iBAAA1P,EAAA,SAAAA,EAAA,sEACrB2R,GAAiBC,GADI,OACtC5R,EADsC,OAE1CqS,EAAgBrS,EAAE,IAClBoS,EAAwBpS,EAAE,IAHgB,2CAIzC,CAAC4R,IAEEgE,GAAiClG,sBAAW,sBAAC,iBAAA1P,EAAA,SAAAA,EAAA,sEAC5B2R,GAAiBqD,GADW,OAC7ChV,EAD6C,OAEjDiV,EAAuBjV,EAAE,IACzB+U,EAA+B/U,EAAE,IAHgB,2CAIhD,CAACgV,IAEEa,GAAgBnG,sBAAW,sBAAC,sBAAA1P,EAAA,sEAC1BqU,GACJC,EACA7C,EACA9P,EACAiJ,EACAC,EACAlE,GAP8B,OAU5BxJ,EAAKkK,aACP6G,EACE,oEACA,6BAb4B,2CAgB/B,CAACoG,EAAiB7C,EAAU9P,EAAOiJ,EAAeC,EAAclE,IAEnE,OACE,eAAC,IAAD,WACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAYqE,KAAK,QAAjB,SACE,cAAC,IAAD,CAAWtI,MAAM,UAAUuQ,WAAW,SAAtC,SACE,cAAC,IAAD,CAAS9M,KAAM2P,UAGnB,cAAC,IAAD,4BAIJ,cAAC,IAAD,CAAY/T,YAAU,EAAtB,SACE,eAAC,IAAD,WACE,uBACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAUzF,SAAS,WAAnB,sBACA,cAAC,IAAD,CACE+F,YAAasT,GACbxT,KAAK,OACLC,MAAOuE,OAGX,uBACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAUrK,SAAS,WAAnB,wBACA,cAAC,IAAD,CACE+F,YAAaoT,GACbtT,KAAK,OACLC,MAAOwI,OAGX,uBACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAUtO,SAAS,WAAnB,uBACA,cAAC,IAAD,CACE+F,YAAaqT,GACbvT,KAAK,OACLC,MAAOyI,OAGX,uBACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAUvO,SAAS,WAAnB,mBACA,cAAC,IAAD,CACE+F,YAAagT,GACblT,KAAK,QACLC,MAAOT,OAGX,uBACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAUrF,SAAS,WAAWoG,MAAOkS,EAArC,SAAgDM,KAChD,cAAC,IAAD,CACE7S,YAAaoQ,GACbtQ,KAAMyP,EACNxP,MAAOqP,IAET,cAAC,IAAD,CAASrG,UAAU,WACjBJ,KAAK,MACL7E,KAAMgM,EACNxP,QAAS+P,QAGb,uBACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAUpW,SAAS,WAAnB,+BACA,cAAC,IAAD,CACE+F,YAAamT,GACbpT,MAAOkS,EACPnS,KAAM6S,IAER,cAAC,IAAD,CAAS5J,UAAU,WACjBJ,KAAK,MACL7E,KAAM2O,EACNnS,QAASiT,QAGb,uBACA,qBAAKxK,UAAU,eAAf,SACE,eAAC,IAAD,CAAWzI,QAASkT,GAApB,qBAEE,cAAC,IAAD,CAAS1P,KAAM4P,oBCrMtB,SAASC,GAAehW,EAAUiW,GACvC,QAAmBlX,IAAfiB,EAAE4P,eAAyC7Q,IAAfkX,EAAErG,SAAwB,CACxD,GAAI5P,EAAE4P,SAAWqG,EAAErG,SACjB,OAAO,EACF,GAAI5P,EAAE4P,SAAWqG,EAAErG,SACxB,OAAQ,EAER,GAAI5P,EAAEzE,SAASgE,UAAY0W,EAAE1a,SAASgE,UACpC,OAAQ,EACH,GAAIS,EAAEzE,SAASgE,UAAY0W,EAAE1a,SAASgE,UAC3C,OAAO,EAIb,OAAO,ECWF,SAAS2W,GACdC,EACAlG,EACAmG,EACAC,GAEA,IAAIC,EAAoB,GAuBxB,OAtBAhQ,QAAQC,IAAI4P,GAEZlG,EAAOlJ,SAAQ,SAAC7I,GACd,IAAI0R,EAAmB5C,EACrBoJ,EACAC,EACAnY,EAAM3C,SAASG,OAAOC,SACtBuC,EAAM3C,SAASG,OAAOE,WAExBsC,EAAM0R,SAAWA,EAEbA,GAAYuG,GACdG,EAAStP,KAAK9I,MAIlBoY,EAAWA,EAASC,MAAK,SAACvW,EAAGiW,GAC3B,OAAOD,GAAehW,EAAGiW,MAG3B3P,QAAQC,IAAI+P,GAELA,E,IC5BD5Y,GAAgBC,IAAhBD,YAmKO8Y,GAjK8D,SAAC,GAEvE,IADL1W,EACI,EADJA,WACI,EAE4B7B,qBAF5B,mBAEG1C,EAFH,KAEaiD,EAFb,OAKwBP,mBAAuB,IAL/C,mBAKGgS,EALH,KAKWC,EALX,OAQwBjS,mBAAS,IARjC,mBAQG8R,EARH,KAQWC,EARX,OAW8B/R,mBAG/B,CACDwY,MAAM,EACN/L,WAAO3L,IAhBL,mBAWGoR,EAXH,KAWcC,EAXd,cA8BWG,EA9BX,8EA8BJ,WAA2BhJ,GAA3B,mBAAAvH,EAAA,6DAEQwQ,EAAMvT,EAAGmE,WAAW,UAF5B,SAGqBoP,EAAI/Q,MAHzB,cAGQE,EAHR,OAMM8Q,EAAa,GACjB9Q,EAAKmH,KAAKC,SAAQ,SAAC1F,GAAD,OAAcoP,EAAEzJ,KAAK3F,EAAI1B,WAG3C8Q,EAAIA,EAAE8F,MAAK,SAACvW,EAAGiW,GACb,OAAOD,GAAehW,EAAGiW,WAGVlX,IAAbxD,IAEAkV,EAAIyF,GADF3O,GASAwI,EANAU,EACAlV,EAASG,OAAOC,SAChBJ,EAASG,OAAOE,YApBxB,kBAgCS6U,GAhCT,4CA9BI,sBA4EJ,OAzDA3R,qBAAU,WACR,sBAAC,sBAAAkB,EAAA,kEAECxB,EAFD,SAEmBd,GAAYuB,qBAF/B,kCAICqH,QAAQC,IAAI,mBAEZgK,EAAYR,GAAQnV,MAAK,SAACqV,GAAD,OAAYC,EAAUD,MANhD,0CAAD,KAQC,IAiDD,eAAC,IAAD,WACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,sBACA,eAAC,IAAD,CACElU,MAAO,CAAE2a,YAAa,WACtB1L,KAAK,MACLrI,QAAS,SAAC9H,GAAD,OAAOuV,EAAa,CAAEqG,MAAM,EAAM/L,MAAO7P,EAAE8b,eAHtD,UAKG5G,EALH,SAOA,cAAC,IAAD,CACEhU,MAAO,CAAE6a,OAAQ,UACjBzQ,KAAM0Q,IACN7L,KAAK,MACLrI,QAAS,SAAC9H,GAAD,OAAOuV,EAAa,CAAEqG,MAAM,EAAM/L,MAAO7P,EAAE8b,iBAEtD,cAAC,IAAD,CACE/T,OAAQuN,EAAUsG,KAClB/L,MAAOyF,EAAUzF,MACjB7H,aAAc,SAAChI,GAAD,OACZuV,EAAa,CAAEqG,MAAM,EAAO/L,WAAO3L,KAJvC,SAOE,eAAC,IAAD,WACE,cAAC,IAAD,2BAEA,cAAC,IAAD,UACE,eAAC,IAAD,CACE+X,IAAK,EACLC,IAAK,GACLC,OAAO,EACPC,KAAM,EACNtH,KAAK,EACLvN,MAAO2N,EACP1N,YAAa,SAACxH,GACZmV,EAAUnV,EAAEyH,OAAOF,OACnBtC,GAAW,GACXyQ,EAAY1V,EAAEyH,OAAOF,OAClBxH,MAAK,SAACqV,GACLC,EAAUD,GACVnQ,GAAW,MAEZ+B,OAAM,SAAChH,GAAD,OAAOiF,GAAW,OAE7BoX,qBAAsB,SAACrc,GACrBuV,EAAa,CAAEqG,MAAM,EAAO/L,WAAO3L,KAlBvC,UAqBE,cAAC,IAAD,CAAUiM,KAAK,QAAf,eACA,cAAC,IAAD,CAAUA,KAAK,MAAf,+BAQZ,eAAC,IAAD,CAAYjJ,YAAU,EAAtB,UACE,cAAC,IAAD,CACEiJ,KAAK,QACLa,aAzER,SAAmBnB,GACjBpE,QAAQC,IAAI,yBAEZgK,EAAYR,GAAQnV,MAAK,SAACqV,GAAD,OAAYC,EAAUD,MAE/CrO,YAAW,WACT0E,QAAQC,IAAI,6BACZmE,EAAMpI,OAAOyI,aACZ,MAkEGW,WAAY,GACZC,QAAS,IACTC,QAAS,IALX,SAOE,cAAC,IAAD,MAEF,cAAC,IAAD,CAAW5J,SAAS,WAApB,SACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAUC,KAAK,QAAf,yBAGHgO,EAAO/I,OAAS,GACf+I,EAAO5V,KAAI,SAAC6D,EAAOjD,GACjB,OAAO,cAAC,EAAD,CAAsBiD,MAAOA,EAAO4B,WAAYA,GAA9B7E,aCrJ7B2C,GAAeD,IAAfC,WAwMOuZ,GAtMmB,SAACrZ,GACjC,IAAMT,EAAOU,qBAAWC,IADmB,EAIjBC,qBAJiB,mBAIpCC,EAJoC,KAI7BC,EAJ6B,OAKXF,mBAC9B,mDANyC,mBAKpCmZ,EALoC,KAK1BC,EAL0B,OAUjBpZ,mBAAS,IAVQ,mBAUpCS,EAVoC,KAU7BC,EAV6B,OAaXV,mBAAS,IAbE,mBAapCW,EAboC,KAa1BC,EAb0B,KAe3CC,qBAAU,gBACqBC,IAAzBjB,EAAMvC,SAASyD,OACjBb,EAASL,EAAMvC,SAASyD,MAAMd,OAIhCjB,EAAGmE,WAAW,SACXC,IADH,OACOhE,QADP,IACOA,OADP,EACOA,EAAMC,KACVmC,MACA7E,MAAK,SAAC+E,GAAU,IAAD,EACgB,GAA9B,OAAIA,QAAJ,IAAIA,GAAJ,UAAIA,EAAMA,cAAV,aAAI,EAAcgJ,YAChB0O,EAAW,OAAC1X,QAAD,IAACA,GAAD,UAACA,EAAMA,cAAP,aAAC,EAAcgJ,YAE1B0O,EAAY,sDAKlBvZ,EAAMgC,YAAW,KAChB,CAAChC,EAAMvC,SAASyD,QAEnB,IAAMe,EAAM,uCAAG,8BAAAC,EAAA,yDACblC,EAAMgC,YAAW,QAEHf,IAAVb,EAHS,yBAIea,IAAtBb,EAAMiC,YAJC,qBAOLC,aAAW,aAAcA,aAAW,OAP/B,qDASFC,GATE,iBAUQC,YAAepC,EAAMiC,aAV7B,mBAWFI,WACAC,MAAM,KAAK,GAZT,MAULb,KAVK,MAQPU,GARO,iEAeMzC,GAAW6C,SAAS,CAC/BC,KAAMxC,EAAMyC,SACZC,UAAWC,IAAoBC,KAC/BC,SAAUC,IAAmBC,OAlBxB,QAePZ,EAfO,gCAsBYb,IAAM0B,KAAN,UAChBC,8BADgB,YAEnB,CAAExB,KAAMU,EAAKV,OAxBN,aA2BaZ,KALlBW,EAtBK,QA2BDC,KAAKU,KACXpD,EAAGmE,WAAW,SACXC,IADH,OACOhE,QADP,IACOA,OADP,EACOA,EAAMC,KACVmC,MACA7E,MAAK,SAAC+E,GACL1C,EAAGmE,WAAW,SACXC,IADH,OACOhE,QADP,IACOA,OADP,EACOA,EAAMC,KACVmE,IAFH,2BAIS9B,EAAKA,QAJd,IAKMgJ,WACE,UAAGxH,8BAAH,KACAzB,EAAIC,KAAKU,OAEb,CAAEiX,OAAO,IAEV1c,MAAK,SAAC2c,GACL5Y,EAAS,uCACTiD,YAAW,WACT/C,EAAY,WACZf,EAAMgC,YAAW,KAChB,QAEJ+B,OAAM,SAAChH,GACNyL,QAAQC,IAAI,8CAIpB5H,EACE,wEAxDK,gCAiEXA,EAAS,kBAjEE,4CAAH,qDAqEZ,OACE,eAAC,IAAD,WACE,cAAC,IAAD,UACE,cAAC,IAAD,UACE,cAAC,IAAD,yBAGJ,eAAC,IAAD,CAAYoD,YAAU,EAAtB,UACE,cAAC,IAAD,CAAWC,SAAS,WAApB,SACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAUC,KAAK,QAAf,wBAKH/D,GACC,mCACE,eAAC,IAAD,WACE,cAAC,IAAD,UACE,cAAC,IAAD,UACE,4DAGJ,eAAC,IAAD,WACE,cAAC,IAAD,CAAQ+D,KAAK,IAAb,SACE,cAAC,IAAD,CAAQC,IAAKkV,MAEf,cAAC,IAAD,CACEnV,KAAK,IACLlG,MAAO,CACLsP,QAAS,OACTuH,eAAgB,SAChBC,WAAY,UALhB,SAQE,cAAC,IAAD,CACE9W,MAAO,CAAEoP,SAAU,OACnBhF,KAAMqR,QAGV,cAAC,IAAD,CAAQvV,KAAK,IAAb,SACE,cAAC,IAAD,CAAQC,IAAKhE,EAAMiC,mBAGvB,uBACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAQ8B,KAAK,IAAIwV,OAAO,IAAxB,SACE,cAAC,IAAD,CACElV,OAAO,QACPC,MAAM,QACNC,KAAK,UACLC,MAAM,UACNC,QAAS5C,EALX,sBAUF,cAAC,IAAD,CAAQkC,KAAK,IAAb,SACE,cAAC,IAAD,CACEM,OAAO,QACPC,MAAM,QACNC,KAAK,UACLC,MAAM,SACNC,QAAS,WACP0U,EACE,mDAEFlZ,OAASY,GACTF,EAAY,YAVhB,8BAsBV,cAAC,IAAD,CACE+D,OAAkB,KAAVlE,EACRmE,aAAc,kBAAMlE,EAAS,KAC7BmE,QAASpE,EACTqE,SAAU,OAGE,KAAbnE,GAAmB,cAAC,IAAD,CAAUoE,GAAE,WAAMpE,YC3KxC8Y,GAAe,WACnB,OACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOhX,KAAK,SAASiX,UAAW1F,GAAO2F,OAAO,IAC9C,cAAC,IAAD,CAAOlX,KAAK,YAAYiX,UAAWpD,GAAUqD,OAAO,IACpD,cAAC,IAAD,CAAOlX,KAAK,IAAImX,OAAQ,kBAAM,cAAC,IAAD,CAAU7U,GAAG,kBAK3C8U,GAAgB,WAAO,IAAD,EACoB7Z,oBAAS,GAD7B,mBACnB8Z,EADmB,KACFlS,EADE,OAEI5H,oBAAS,GAFb,mBAEnB+Z,EAFmB,KAEVlY,EAFU,KAI1B,OACE,eAAC,IAAD,WACE,eAAC,IAAD,WACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAO8X,OAAK,EAAClX,KAAK,WAAlB,SACE,cAACuX,GAAD,CAAanY,WAAYA,MAE3B,cAAC,IAAD,CAAO8X,OAAK,EAAClX,KAAK,UAAlB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,WAAZ,SACE,cAAC,EAAD,CAASZ,WAAYA,MAEvB,cAAC,IAAD,CAAO8X,OAAK,EAAClX,KAAK,IAAlB,SACE,cAAC,IAAD,CAAUsC,GAAG,eAGf,cAAC,IAAD,CACEtC,KAAK,UACLmX,OAAQ,SAAC/Z,GAAD,OAAW,cAAC,EAAD,2BAAYA,GAAZ,IAAmBgC,WAAYA,QAEpD,cAAC,IAAD,CACEY,KAAK,eACLmX,OAAQ,SAAC/Z,GAAD,OAAW,cAAC,GAAD,2BAAgBA,GAAhB,IAAuBgC,WAAYA,QAGxD,cAAC,IAAD,CAAO8X,OAAK,EAAClX,KAAK,SAAlB,SACE,cAAC,IAAD,CAAUsC,GAAG,eAEf,cAAC,IAAD,CAAO4U,OAAK,EAAClX,KAAK,YAAlB,SACE,cAAC,IAAD,CAAUsC,GAAG,kBAGjB,eAAC,IAAD,CAAWgI,KAAK,SAAhB,UAEE,eAAC,IAAD,CAAckN,IAAI,UAAUC,KAAK,WAAjC,UACE,cAAC,IAAD,CAAShS,KAAMiS,MACf,cAAC,IAAD,yBAGF,eAAC,IAAD,CAAcF,IAAI,SAASC,KAAK,UAAhC,UACE,cAAC,IAAD,CAAShS,KAAMkS,MACf,cAAC,IAAD,wBAGF,eAAC,IAAD,CAAcH,IAAI,UAAUC,KAAK,WAAjC,UACE,cAAC,IAAD,CAAShS,KAAMmS,MACf,cAAC,IAAD,+BAOJ,qCACE,cAAC,IAAD,CACEvc,MAAO,CAAEwc,aAAc,SAAU7B,YAAa,UAC9C8B,SAAS,SACTC,WAAW,MACXzN,KAAK,QACLrI,QAAS,WACPkD,GAAmB,IANvB,SASE,cAAC,IAAD,UACE,cAAC,IAAD,CAAS6S,GAAIC,IAAaC,IAAKxS,UAGnC,cAAC,EAAD,CACER,OAAQmS,EACRlS,mBAAoBA,EACpB/F,WAAYA,OAKlB,cAAC,IAAD,CACE8C,OAAQoV,EACRnV,aAAc,kBAAM/C,GAAW,IAC/BgD,QAAS,iBACTC,SAAU,UAmBH8V,GAbO,WACpB,IAAMxb,EAAOU,qBAAWC,IASvB,OAAO,eAAC,IAAD,eAAUX,EAAO,cAAC,GAAD,IAAoB,cAAC,GAAD,QC5J3Byb,QACW,cAA7BC,OAAOxd,SAASyd,UAEe,UAA7BD,OAAOxd,SAASyd,UAEhBD,OAAOxd,SAASyd,SAASC,MAAM,2DCfnC,IAYeC,GAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,+BAAqBxe,MAAK,YAAkD,IAA/Cye,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,SCAdO,aAAqBX,QAEd,IAAM/a,GAAc2b,wBAAoC,MAElDC,GAAyB,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAAe,EAC5B5b,mBAA+B,MADH,mBAC7CZ,EAD6C,KACvCyc,EADuC,KAQxD,OALAhb,qBAAU,WAEN3B,EAAKC,oBAAmB,SAAC2c,GAAD,OAAcD,EAAQC,QAC/C,IAEK,eAAC/b,GAAYgc,SAAb,CAAsB5X,MAAO/E,EAA7B,cAAqCwc,EAArC,WAIRI,IAASpC,OACP,cAAC,GAAD,UACE,cAAC,GAAD,MAEFhK,SAASqM,eAAe,SFuGpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBzf,MAAK,SAAC0f,GACLA,EAAaC,gBAEd1Y,OAAM,SAACmK,GACN1F,QAAQ0F,MAAMA,EAAMlJ,YElG5BoW,O","file":"static/js/main.a50a0058.chunk.js","sourcesContent":["var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t151,\n\t\t7\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t152,\n\t\t8\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t153,\n\t\t9\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t154,\n\t\t19\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t155,\n\t\t20\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t156,\n\t\t45\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t157,\n\t\t21\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t158,\n\t\t22\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t159,\n\t\t23\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t160,\n\t\t24\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t161,\n\t\t46\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t162,\n\t\t12\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t163,\n\t\t25\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t164,\n\t\t47\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t165,\n\t\t48\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t166,\n\t\t26\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t167,\n\t\t27\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t168,\n\t\t28\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t169,\n\t\t29\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t170,\n\t\t30\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t171,\n\t\t10\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t172,\n\t\t16\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t173,\n\t\t11\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t174,\n\t\t31\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t175,\n\t\t32\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t176,\n\t\t33\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t177,\n\t\t13\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t178,\n\t\t18\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t179,\n\t\t49\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t180,\n\t\t34\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t181,\n\t\t35\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t182,\n\t\t36\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t183,\n\t\t37\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t184,\n\t\t50\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t185,\n\t\t15\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t186,\n\t\t51\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t187,\n\t\t38\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t188,\n\t\t17\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t189,\n\t\t39\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t190,\n\t\t40\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t191,\n\t\t41\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t192,\n\t\t14\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t193,\n\t\t52\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 102;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t194,\n\t\t67\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 104;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./pwa-action-sheet.entry.js\": [\n\t\t198,\n\t\t59\n\t],\n\t\"./pwa-camera-modal-instance.entry.js\": [\n\t\t199,\n\t\t60\n\t],\n\t\"./pwa-camera-modal.entry.js\": [\n\t\t200,\n\t\t61\n\t],\n\t\"./pwa-camera.entry.js\": [\n\t\t201,\n\t\t62\n\t],\n\t\"./pwa-toast.entry.js\": [\n\t\t202,\n\t\t63\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 148;\nmodule.exports = webpackAsyncContext;","import React, { Dispatch, SetStateAction, useEffect, useState } from \"react\";\r\nimport {MapContainer, TileLayer, Marker, Popup} from \"react-leaflet\";\r\nimport { GeogramPosition } from \"../../model/GeogramPosition\";\r\nimport 'leaflet/dist/leaflet.css';\r\nimport './LocationMap.css'\r\n\r\nconst LocationMap: React.FC<{location: GeogramPosition}> = ({location}) => {\r\n\r\n  return (\r\n    <MapContainer center={[location.coords.latitude, location.coords.longitude]} zoom={13} scrollWheelZoom={false} style={{height: \"20vh\", width: \"100vh\"}}>\r\n    <TileLayer\r\n      attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n      url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n    />\r\n    <Marker position={[location.coords.latitude, location.coords.longitude]}>\r\n      <Popup>\r\n        Current Position.\r\n      </Popup>\r\n    </Marker>\r\n  </MapContainer>\r\n    );\r\n};\r\n\r\nexport default LocationMap;\r\n","import firebase from \"firebase\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyCuOUn1kd_QKs91UYx2Pv015QYAwNfpkWg\",\r\n    authDomain: \"geogram-4906f.firebaseapp.com\",\r\n    projectId: \"geogram-4906f\",\r\n    storageBucket: \"geogram-4906f.appspot.com\",\r\n    messagingSenderId: \"293875577588\",\r\n    appId: \"1:293875577588:web:d286bacade6e4850bfa4a1\"\r\n};\r\n// Configure\r\nlet fb = firebase.initializeApp(firebaseConfig);\r\nlet db = fb.firestore();\r\n\r\n// AUTH //\r\nexport const auth = fb.auth();\r\n\r\nexport default firebase;\r\n\r\n\r\n// [START auth_state_listener]\r\nauth.onAuthStateChanged((user: any) => {\r\n    if (user) {\r\n        var uid: any = user.uid;\r\n        localStorage.setItem(\"uid\", uid);\r\n      //  console.log(\"RES:\",auth)\r\n    } else {\r\n        localStorage.removeItem(\"uid\");\r\n    }\r\n});\r\n// [END auth_state_listener]\r\n\r\n\r\nexport { db, fb };\r\n\r\n","/* eslint-disable react/jsx-no-undef */\r\nimport {\r\n  IonButton,\r\n  IonCol,\r\n  IonContent,\r\n  IonFab,\r\n  IonFabButton,\r\n  IonGrid,\r\n  IonHeader,\r\n  IonIcon,\r\n  IonImg,\r\n  IonInput,\r\n  IonItem,\r\n  IonLabel,\r\n  IonPage,\r\n  IonRow,\r\n  IonTextarea,\r\n  IonTitle,\r\n  IonToast,\r\n  IonToolbar,\r\n  isPlatform,\r\n} from \"@ionic/react\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport { Photo, usePhotoGallery } from \"../../hooks/usePhotoGallery\";\r\nimport { useFilesystem, base64FromPath } from \"@ionic/react-hooks/filesystem\";\r\nimport {\r\n  FilesystemDirectory,\r\n  FilesystemEncoding,\r\n  Plugins,\r\n} from \"@capacitor/core\";\r\nimport { GeogramPosition } from \"../../model/GeogramPosition\";\r\nimport LocationMap from \"../../components/LocationMap/LocationMap\";\r\nimport axios from \"axios\";\r\nimport { db } from \"../../helper/firebase\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { Redirect } from \"react-router\";\r\nimport { useStorage } from \"@ionic/react-hooks/storage\";\r\nimport { UserContext } from \"../..\";\r\n\r\nconst { Geolocation, Filesystem } = Plugins;\r\n\r\nconst Upload: React.FC<any> = (props) => {\r\n  const user = useContext(UserContext);\r\n\r\n\r\n  // image provided by props\r\n  const [image, setImage] = useState<Photo>();\r\n\r\n  // Form data\r\n  const [title, setTitle] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n\r\n  // Geoinformation\r\n  const [location, setLocation] = useState<GeogramPosition>();\r\n  const [position, setPosition] = useState(\"\");\r\n\r\n  // Toast message\r\n  const [toast, setToast] = useState(\"\");\r\n\r\n  // Redirect\r\n  const [redirect, setRedirect] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (props.location.state !== undefined) {\r\n      setImage(props.location.state.image);\r\n    }\r\n\r\n    // get current geolocation\r\n    Geolocation.getCurrentPosition().then((location) => {\r\n      setLocation({\r\n        coords: {\r\n          accuracy: location.coords.accuracy,\r\n          altitude: location.coords.altitude,\r\n          altitudeAccuracy: location.coords.altitudeAccuracy,\r\n          heading: location.coords.heading,\r\n          latitude: location.coords.latitude,\r\n          longitude: location.coords.longitude,\r\n          speed: location.coords.speed,\r\n        },\r\n        timestamp: location.timestamp,\r\n      });\r\n      // reverse geolocating\r\n      axios\r\n        .get(\r\n          `https://api.opencagedata.com/geocode/v1/json?q=${location?.coords.latitude}+${location?.coords.longitude}&key=bb44e70b618844faba7cb23b580419e0`\r\n        )\r\n        .then((res) => {\r\n          setPosition(res.data.results[0].formatted);\r\n          setLocation((state: any) => {\r\n            return {\r\n              ...state,\r\n              position: res.data.results[0].formatted,\r\n            };\r\n          });\r\n        });\r\n    });\r\n\r\n    //disable set Loading\r\n    props.setLoading(false);\r\n  }, [props.location.state]);\r\n\r\n  const upload = async () => {\r\n    props.setLoading(true);\r\n\r\n    if (location === undefined) {\r\n      setLocation({\r\n        coords: {\r\n          accuracy: 0,\r\n          altitude: 0,\r\n          altitudeAccuracy: 0,\r\n          heading: 0,\r\n          latitude: 0,\r\n          longitude: 0,\r\n          speed: 0,\r\n        },\r\n        timestamp: Date.now(),\r\n      });\r\n    }\r\n\r\n    if (title !== \"\" && description !== \"\" && image !== undefined) {\r\n      if (image.webviewPath !== undefined) {\r\n        let file: any;\r\n        // get image data when on android or ios\r\n        if (isPlatform(\"android\") || isPlatform(\"ios\")) {\r\n          file = {\r\n            ...file,\r\n            data: (await base64FromPath(image.webviewPath!))\r\n              .toString()\r\n              .split(\",\")[1],\r\n          };\r\n        } else {\r\n          file = await Filesystem.readFile({\r\n            path: image.filepath,\r\n            directory: FilesystemDirectory.Data,\r\n            encoding: FilesystemEncoding.UTF8,\r\n          });\r\n        }\r\n\r\n        let res: any = await axios.post(\r\n          `${process.env.REACT_APP_IMAGE_SERVER_URL}/upload1`,\r\n          { data: file.data }\r\n        );\r\n\r\n        if (res.data.file !== undefined) {\r\n          db.collection(\"users\")\r\n            .doc(user?.uid)\r\n            .get()\r\n            .then((item) => {\r\n              let imageId: string = uuidv4();\r\n\r\n              db.collection(\"images\")\r\n                .doc(imageId)\r\n                .set({\r\n                  id: imageId,\r\n                  timestamp: Date.now(),\r\n                  user: item.data()?.username || user?.email,\r\n                  location: location,\r\n                  url: `${process.env.REACT_APP_IMAGE_SERVER_URL}/${res.data.file}`,\r\n                  title: title,\r\n                  description: description,\r\n                })\r\n                .then((res) => {\r\n                  setToast(\"Successfully added item to firebase\");\r\n\r\n                  // Set back everything\r\n                  setTitle(\"\");\r\n                  setDescription(\"\");\r\n                  setImage(undefined);\r\n                  setLocation(undefined);\r\n\r\n                  setTimeout(() => {\r\n                    setRedirect(\"explore\");\r\n                    props.setLoading(false);\r\n                  }, 1000);\r\n                })\r\n                .catch((err) =>\r\n                  setToast(\"Error while adding data to firebase\")\r\n                );\r\n            });\r\n        } else {\r\n          setToast(\r\n            \"Error while adding data to image server: \" +\r\n              process.env.REACT_APP_IMAGE_SERVER_URL\r\n          );\r\n        }\r\n      }\r\n\r\n      // wait for api\r\n      // cleanup of input fields\r\n    } else {\r\n      if (title === \"\") {\r\n        setToast(\"Please fill out the title field!\");\r\n      } else if (description === \"\") {\r\n        setToast(\"Please fill out the description field!\");\r\n      } else {\r\n        setToast(\"Error occured!\");\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonTitle>Upload</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent fullscreen>\r\n        <IonHeader collapse=\"condense\">\r\n          <IonToolbar>\r\n            <IonTitle size=\"large\">Upload</IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n\r\n        {/* Upload Form with image view */}\r\n        {image && (\r\n          <>\r\n            <IonImg src={image.webviewPath} />\r\n            <IonGrid>\r\n              <IonRow>\r\n                <IonCol size=\"12\">\r\n                  <IonItem>\r\n                    <IonLabel position=\"floating\">Title</IonLabel>\r\n                    <IonInput\r\n                      type=\"text\"\r\n                      value={title}\r\n                      onIonChange={(e) => {\r\n                        setTitle(e.detail.value!);\r\n                      }}\r\n                    />\r\n                  </IonItem>\r\n                </IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol size=\"12\">\r\n                  <IonItem>\r\n                    <IonLabel position=\"floating\">Description</IonLabel>\r\n                    <IonTextarea\r\n                      value={description}\r\n                      onIonChange={(e) => {\r\n                        setDescription(e.detail.value!);\r\n                      }}\r\n                    />\r\n                  </IonItem>\r\n                </IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol size=\"12\">\r\n                  Current Position: Latitude:{\" \"}\r\n                  {location?.coords.latitude.toString()}, Longitude:{\" \"}\r\n                  {location?.coords.longitude.toString()}\r\n                </IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol size=\"12\">City: {position}</IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol size=\"12\">\r\n                  {location && <LocationMap location={location} />}\r\n                </IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol>\r\n                  <IonButton\r\n                    expand=\"block\"\r\n                    shape=\"round\"\r\n                    fill=\"outline\"\r\n                    color=\"primary\"\r\n                    onClick={upload}\r\n                  >\r\n                    Submit\r\n                  </IonButton>\r\n                </IonCol>\r\n                <IonCol>\r\n                  <IonButton\r\n                    expand=\"block\"\r\n                    shape=\"round\"\r\n                    fill=\"outline\"\r\n                    color=\"danger\"\r\n                    onClick={() => {\r\n\r\n                      // Set back everything\r\n                      setTitle(\"\");\r\n                      setDescription(\"\");\r\n                      setImage(undefined);\r\n                      setLocation(undefined);\r\n                      setRedirect(\"explore\");\r\n                      \r\n                    }}\r\n                  >\r\n                    Cancel\r\n                  </IonButton>\r\n                </IonCol>\r\n              </IonRow>\r\n            </IonGrid>\r\n          </>\r\n        )}\r\n\r\n        {/* Toast */}\r\n        <IonToast\r\n          isOpen={toast !== \"\"}\r\n          onDidDismiss={() => setToast(\"\")}\r\n          message={toast}\r\n          duration={1500}\r\n        />\r\n        {/* Redirect */}\r\n        {redirect !== \"\" && <Redirect to={`/${redirect}`}></Redirect>}\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Upload;\r\n","import { useState, useEffect } from \"react\";\r\nimport { useCamera } from '@ionic/react-hooks/camera';\r\nimport { useFilesystem, base64FromPath } from '@ionic/react-hooks/filesystem';\r\nimport { useStorage } from '@ionic/react-hooks/storage';\r\nimport { isPlatform } from '@ionic/react';\r\nimport { CameraResultType, CameraSource, CameraPhoto, Capacitor, FilesystemDirectory } from \"@capacitor/core\";\r\nimport { Plugins } from '@capacitor/core';\r\n\r\nconst { Filesystem } = Plugins;\r\n\r\nconst PHOTO_STORAGE = \"photos\";\r\n\r\nexport function usePhotoGallery() {\r\n\r\n  const [photo, setPhoto] = useState<Photo>();\r\n  const { getPhoto } = useCamera();\r\n  const { deleteFile, readFile, writeFile } = useFilesystem();\r\n  const { get, set } = useStorage();\r\n\r\n  useEffect(() => {\r\n\r\n\r\n  }, [get, readFile]);\r\n  \r\n\r\n  const takePhoto = async (): Promise<Photo> => {\r\n    // Access camera photo\r\n    const cameraPhoto = await getPhoto({\r\n      resultType: CameraResultType.Uri,\r\n      source: CameraSource.Camera,\r\n      quality: 25\r\n    });\r\n    // Create filename based on date\r\n    const fileName = new Date().getTime() + '.jpeg';\r\n    // Save image\r\n    const savedFileImage = await savePicture(cameraPhoto, fileName);\r\n    // Set image into state\r\n    setPhoto(savedFileImage);\r\n    // Store Image to storage\r\n    set(PHOTO_STORAGE, JSON.stringify(savedFileImage));\r\n    // return result\r\n    return savedFileImage;\r\n  };\r\n\r\n  const convertBlobToBase64 = async(blob: Blob): Promise<string>  => {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.onerror = reject;\r\n      reader.onload = () => resolve(reader.result as string);\r\n      reader.readAsDataURL(blob);\r\n    });\r\n  }\r\n\r\n  const takePhotoFromGalerie = async(): Promise<Photo> => {\r\n      // Access galerie photo\r\n      const cameraPhoto = await getPhoto({\r\n        resultType: CameraResultType.Uri,\r\n        source: CameraSource.Photos,\r\n        quality: 25\r\n      });\r\n      // Create filename based on date\r\n      const fileName = new Date().getTime() + '.jpeg';\r\n      // Save image\r\n      const savedFileImage = await savePicture(cameraPhoto, fileName);\r\n      // Set image into state\r\n      setPhoto(savedFileImage);\r\n      // Store Image to storage\r\n      set(PHOTO_STORAGE, JSON.stringify(savedFileImage));\r\n      // return result\r\n      return savedFileImage;\r\n  }\r\n\r\n  const savePicture = async (photo: CameraPhoto, fileName: string): Promise<Photo> => {\r\n    let base64Data: string;\r\n    // \"hybrid\" will detect Cordova or Capacitor;\r\n    if (isPlatform('hybrid')) {\r\n      const file = await readFile({\r\n        path: photo.path!\r\n      });\r\n      base64Data = file.data;\r\n    } else {\r\n      base64Data = await base64FromPath(photo.webPath!);\r\n    }\r\n    const savedFile = await writeFile({\r\n      path: fileName,\r\n      data: base64Data,\r\n      directory: FilesystemDirectory.Data\r\n    });\r\n\r\n    if (isPlatform('hybrid')) {\r\n      // Display the new image by rewriting the 'file://' path to HTTP\r\n      // Details: https://ionicframework.com/docs/building/webview#file-protocol\r\n      return {\r\n        filepath: savedFile.uri,\r\n        webviewPath: Capacitor.convertFileSrc(savedFile.uri), \r\n      };\r\n    }\r\n    else {\r\n      // Use webPath to display the new image instead of base64 since it's \r\n      // already loaded into memory\r\n      return {\r\n        filepath: fileName,\r\n        webviewPath: photo.webPath,\r\n        data: base64Data\r\n      };\r\n    }\r\n  };\r\n\r\n\r\n  // const download = async(path:string) => {\r\n  //   const base64Data = await _readAsBase64(path);\r\n  //   const fileName = `${new Date().getTime()}.jpeg`;\r\n  //   // const image = await Filesystem.writeFile({\r\n  //   //   path: fileName,\r\n  //   //   data: base64Data,\r\n  //   //   directory: FilesystemDirectory.Documents\r\n  //   // });\r\n  //   return base64Data;\r\n  // }\r\n  // const _readAsBase64 = async(url: string): Promise<string> => {\r\n  //   const response = await fetch(url);\r\n  //   const blob = await response.blob();\r\n  //   return await _convertBlobToBase64(blob);\r\n  // }\r\n  // const _convertBlobToBase64 = async(blob: Blob): Promise<string> => {\r\n  //   return new Promise((resolve, reject) => {\r\n  //     const reader = new FileReader();\r\n  //     reader.onerror = () => reject();\r\n  //     reader.onload = () => resolve(reader.result as string);\r\n  //     reader.readAsDataURL(blob);\r\n  //   });\r\n  // }\r\n\r\n  return {\r\n    photo,\r\n    takePhoto,\r\n    takePhotoFromGalerie,\r\n    convertBlobToBase64\r\n  };\r\n}\r\n\r\nexport interface Photo {\r\n  filepath: string;\r\n  webviewPath?: string;\r\n  data?: string;\r\n}","import {\r\n  IonActionSheet\r\n} from \"@ionic/react\";\r\nimport { cameraOutline, closeOutline, imageOutline } from \"ionicons/icons\";\r\nimport React, { Dispatch, SetStateAction, useState } from \"react\";\r\nimport { Redirect } from \"react-router\";\r\nimport { Photo, usePhotoGallery } from \"../../hooks/usePhotoGallery\";\r\n\r\n\r\nconst ProfilePicSelectionModal: React.FC<{active: boolean, setShowActionSheet: Dispatch<SetStateAction<boolean>>, setLoading: Dispatch<SetStateAction<boolean>>}> = ({active, setShowActionSheet, setLoading}) => {\r\n\r\n  const [selectedRoute, setSelectedRoute] = useState(\"\");\r\n  const [image, setImage] = useState<Photo>();\r\n  \r\n  const { takePhoto, takePhotoFromGalerie } = usePhotoGallery();\r\n\r\n  return (\r\n      <>\r\n\r\n        {\r\n            selectedRoute === \"profile-pic\" && <Redirect to={{\r\n                pathname: \"/profile-pic\",\r\n                state: { image }\r\n            }}/>\r\n        }\r\n\r\n        <IonActionSheet\r\n            isOpen={active}\r\n            onDidDismiss={() => setShowActionSheet(false)}\r\n            buttons={[\r\n            {\r\n                text: \"Camera\",\r\n                icon: cameraOutline,\r\n                handler: () => {\r\n                    takePhoto()\r\n                    .then(image => {\r\n                        // User took image\r\n                        setLoading(true);\r\n                        setImage(image);\r\n                        setSelectedRoute(\"profile-pic\")\r\n                    })\r\n                    .catch(err => {\r\n                        // User Aborted Camera\r\n                        console.log(err)\r\n                    })\r\n                },\r\n            },\r\n            {\r\n                text: \"Galerie\",\r\n                icon: imageOutline,\r\n                handler: () => {\r\n                    takePhotoFromGalerie()\r\n                    .then(image => {\r\n                        setLoading(true)\r\n                        setImage(image);\r\n                        setSelectedRoute(\"profile-pic\");\r\n                    })\r\n                },\r\n            },\r\n            {\r\n                text: \"Close\",\r\n                icon: closeOutline,\r\n                handler: () => {\r\n                setShowActionSheet(false)\r\n                },\r\n            }\r\n            ]}\r\n        ></IonActionSheet>\r\n      </>\r\n  );\r\n};\r\n\r\nexport default ProfilePicSelectionModal;\r\n","import { auth, db } from \"../../helper/firebase\";\r\nimport { User } from \"../../model/User\";\r\n\r\n//Check Username\r\nexport async function checkUsername(userName: any): Promise<boolean> {\r\n   \r\n  var usernameCheck = db.collection(\"users\");\r\n\r\n  const data = await usernameCheck.get();\r\n  let typedDocs: User[] = [];\r\n  data.docs.forEach((doc: any) => typedDocs.push(doc.data().username));\r\n  var len = typedDocs.length;\r\n  let currentUsername:string = \"\";\r\n\r\n  await db.collection(\"users\")\r\n                  .where(\"email\", \"==\", auth.currentUser?.email)\r\n                  .get()\r\n                  .then((querySnapshot) => {\r\n                    querySnapshot.forEach((doc) => {\r\n                      currentUsername = doc.data().username;\r\n                    })\r\n                  });\r\n \r\n  for (var i = 0; i < len; i++) {\r\n    if ((typedDocs[i] === userName && !(currentUsername == userName)) || userName == \"\") {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\n","import {\r\n  IonContent,\r\n  IonHeader,\r\n  IonPage,\r\n  IonTitle,\r\n  IonToolbar,\r\n  IonItem,\r\n  IonAvatar,\r\n  IonImg,\r\n  IonLabel,\r\n  IonGrid,\r\n  IonRow,\r\n  IonCol,\r\n  IonButton,\r\n  IonModal,\r\n  IonButtons,\r\n  IonInput,\r\n  IonTextarea,\r\n  IonAlert,\r\n  IonRefresher,\r\n  IonRefresherContent,\r\n  useIonToast,\r\n  IonLoading,\r\n} from \"@ionic/react\";\r\nimport React, { Dispatch, SetStateAction, useEffect, useState } from \"react\";\r\nimport ProfilePicSelectionModal from \"../../components/ProfilePicSelectionModal/ProfilePicSelectionModal\";\r\nimport { auth, db } from \"../../helper/firebase\";\r\nimport { checkUsername } from \"./checkUsername\";\r\nimport { RefresherEventDetail } from '@ionic/core';\r\nimport { Image } from \"../../model/Image\";\r\n\r\nconst Profile: React.FC<{ setLoading: Dispatch<SetStateAction<boolean>> }> = ({ setLoading }) => {\r\n\r\n  // modal to change profile picture\r\n  const [profileSelectionModal, setProfileSelectionModal] = useState(false);\r\n\r\n  const [EditProfile, setEditProfile] = useState<boolean>(false);\r\n  const [username, setUsername] = useState<string>();\r\n  const [firstName, setFirstName] = useState<string>();\r\n  const [lastName, setLastName] = useState<string>();\r\n  const [fullName, setFullName] = useState<string>();\r\n  const [email, setEmail] = useState<string>();\r\n  const [bio, setBio] = useState<string>();\r\n  const [showAlertVerify, setShowAlertVerify] = useState<boolean>(false);\r\n  const [verified, setVerified] = useState<string>(\"\");\r\n  const [profilepic, setProfilepic] = useState(\"https://im-coder.com/images4/15590312779219.png\");\r\n\r\n  const [posts, setPosts] = useState<number>(0);\r\n  let postsUsername: string = \"\";\r\n  const [likes, setLikes] = useState<number>(0);\r\n  let counterLikes: number = 0;\r\n\r\n  const [errorUsernameLabel, setErrorUsernameLabel] = useState<string>(\"\");\r\n  const [errorUsernameText, setErrorUsernameText] = useState<string>(\"\");\r\n\r\n  //const [isUsernameCorrect, setUsernameCorrect] = useState<boolean>(true);\r\n  let isUsernameCorrect: boolean = true;\r\n\r\n  let oldUsername: string = \"\";\r\n\r\n  const [errorEmailLabel, setErrorEmailLabel] = useState<string>(\"\");\r\n  const [errorEmailText, setErrorEmailText] = useState<string>(\"\");\r\n\r\n  //const [isEmailCorrect, setEmailCorrect] = useState<boolean>(true);\r\n  let isEmailCorrect: boolean = true;\r\n\r\n  const [presentToast, dismissToast] = useIonToast();\r\n\r\n  const [showAlertLogin, setShowAlertLogin] = useState<boolean>(false);\r\n  const [showAlertIncorrectPassword, setShowAlertIncorrectPassword] = useState<boolean>(false);\r\n  let isShowAlertLogin: boolean = false;\r\n  const [isLoginSuccessfull, setLoginSuccessfull] = useState<boolean>(false);\r\n\r\n  const [showLoading, setShowLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (auth.currentUser?.emailVerified) {\r\n      setVerified(\"none\");\r\n    } else {\r\n      setVerified(\"\");\r\n    }\r\n\r\n    db.collection(\"users\")\r\n      .where(\"email\", \"==\", auth.currentUser?.email)\r\n      .get()\r\n      .then((querySnapshot) => {\r\n        querySnapshot.forEach((doc) => {\r\n          if (doc.data().profilepic != null) {\r\n            setProfilepic(doc.data().profilepic);\r\n          }\r\n          setUsername(doc.data().username);\r\n          setEmail(doc.data().email);\r\n          setFirstName(doc.data().userFirstName);\r\n          setLastName(doc.data().userLastName);\r\n          setBio(doc.data().biography);\r\n          setFullName(doc.data().userFirstName + \" \" + doc.data().userLastName);\r\n        });\r\n      });\r\n  }, [EditProfile]);\r\n\r\n  useEffect(() => {\r\n    db.collection(\"users\")\r\n      .where(\"email\", \"==\", auth.currentUser?.email)\r\n      .get()\r\n      .then((querySnapshot) => {\r\n        querySnapshot.forEach((doc) => {\r\n          postsUsername = doc.data().username;\r\n        });\r\n      }).then(() => {\r\n        db.collection(\"images\").where(\"user\", \"==\", postsUsername).get().then((querySnapshot) => {\r\n          setPosts(querySnapshot.size);\r\n          counterLikes = 0;\r\n          querySnapshot.forEach((doc) => {\r\n            if (!(doc.data().likes == null)) {\r\n              counterLikes = counterLikes + doc.data().likes;\r\n            }\r\n          });\r\n          setLikes(counterLikes);\r\n        });\r\n      });\r\n  }, []);\r\n\r\n  async function doRefresh(event: CustomEvent<RefresherEventDetail>) {\r\n    if (auth.currentUser?.emailVerified) {\r\n      setVerified(\"none\");\r\n    } else {\r\n      setVerified(\"\");\r\n    }\r\n\r\n    await db.collection(\"users\")\r\n      .where(\"email\", \"==\", auth.currentUser?.email)\r\n      .get()\r\n      .then((querySnapshot) => {\r\n        querySnapshot.forEach((doc) => {\r\n          if (doc.data().profilepic != null) {\r\n            setProfilepic(doc.data().profilepic);\r\n          }\r\n          setUsername(doc.data().username);\r\n          setEmail(doc.data().email);\r\n          setFirstName(doc.data().userFirstName);\r\n          setLastName(doc.data().userLastName);\r\n          setBio(doc.data().biography);\r\n          postsUsername = doc.data().username;\r\n          setFullName(doc.data().userFirstName + \" \" + doc.data().userLastName);\r\n        });\r\n      }).then(() => {\r\n        db.collection(\"images\").where(\"user\", \"==\", postsUsername).get().then((querySnapshot) => {\r\n          setPosts(querySnapshot.size);\r\n          counterLikes = 0;\r\n          querySnapshot.forEach((doc) => {\r\n            if (!(doc.data().likes == null)) {\r\n              counterLikes = counterLikes + doc.data().likes;\r\n            }\r\n          });\r\n          setLikes(counterLikes);\r\n        });\r\n      }).then(() => { event.detail.complete() });\r\n  }\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonTitle>{username}</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent fullscreen>\r\n        <IonGrid>\r\n          <IonRow>\r\n            <IonCol>\r\n              <IonItem>\r\n                <IonAvatar\r\n                  slot=\"start\"\r\n                  style={{ height: \"100px\", width: \"100px\" }}\r\n                  onClick={() => {\r\n                    setProfileSelectionModal(true);\r\n                  }}\r\n                >\r\n                  <IonImg src={profilepic} />\r\n                </IonAvatar>\r\n\r\n                <ProfilePicSelectionModal\r\n                  active={profileSelectionModal}\r\n                  setShowActionSheet={setProfileSelectionModal}\r\n                  setLoading={setLoading}\r\n                />\r\n\r\n                <IonGrid>\r\n                  <IonRow>\r\n                    <IonCol style={{ textAlign: \"center\" }}>{likes}</IonCol>\r\n                    <IonCol style={{ textAlign: \"center\" }}>{posts}</IonCol>\r\n                  </IonRow>\r\n                  <IonRow>\r\n                    <IonCol style={{ textAlign: \"center\" }}>Likes</IonCol>\r\n                    <IonCol style={{ textAlign: \"center\" }}>Posts</IonCol>\r\n                  </IonRow>\r\n                </IonGrid>\r\n              </IonItem>\r\n            </IonCol>\r\n          </IonRow>\r\n          <IonRow>\r\n            <IonCol>\r\n              <IonItem>\r\n                <IonGrid style={{ paddingLeft: \"0px\" }}>\r\n                  <IonRow>\r\n                    <IonCol>\r\n                      <IonLabel style={{ fontSize: \"20px\" }}>\r\n                        {fullName}\r\n                      </IonLabel>\r\n                    </IonCol>\r\n                  </IonRow>\r\n                  <IonRow>\r\n                    <IonCol>\r\n                      <IonLabel\r\n                        className=\"ion-text-wrap\"\r\n                        style={{ fontSize: \"15px\" }}\r\n                      >\r\n                        {bio}\r\n                      </IonLabel>\r\n                    </IonCol>\r\n                  </IonRow>\r\n                </IonGrid>\r\n              </IonItem>\r\n            </IonCol>\r\n          </IonRow>\r\n          <IonRow>\r\n            <IonCol style={{ textAlign: \"center\" }}>\r\n              <IonButton\r\n                shape=\"round\"\r\n                fill=\"outline\"\r\n                color=\"primary\"\r\n                onClick={() => setEditProfile(true)}\r\n              >\r\n                Edit Profile\r\n              </IonButton>\r\n            </IonCol>\r\n            <IonCol style={{ textAlign: \"center\", display: String(verified) }}>\r\n              <IonButton\r\n                shape=\"round\"\r\n                fill=\"outline\"\r\n                color=\"danger\"\r\n                onClick={async () => {\r\n                  setShowAlertVerify(true);\r\n                  await auth.currentUser?.sendEmailVerification();\r\n                }}\r\n              >\r\n                Verify Email\r\n              </IonButton>\r\n            </IonCol>\r\n          </IonRow>\r\n        </IonGrid>\r\n        <IonAlert\r\n          isOpen={showAlertVerify}\r\n          onDidDismiss={() => setShowAlertVerify(false)}\r\n          cssClass=\"my-custom-class\"\r\n          header={\"Verify E-Mail\"}\r\n          message={\"Email was sent to you to verify your email.\"}\r\n          buttons={[\"OK\"]}\r\n        />\r\n        <IonRefresher slot=\"fixed\" pullFactor={0.5} pullMin={100} pullMax={200} onIonRefresh={doRefresh}>\r\n          <IonRefresherContent></IonRefresherContent>\r\n        </IonRefresher>\r\n        <IonModal isOpen={EditProfile}>\r\n          <IonHeader>\r\n            <IonToolbar>\r\n              <IonButtons slot=\"end\">\r\n                <IonButton\r\n                  color=\"primary\"\r\n                  onClick={() => {\r\n                    dismissToast();\r\n                    setEditProfile(false);\r\n                    setErrorEmailLabel(\"\");\r\n                    setErrorEmailText(\"\");\r\n                    setErrorUsernameLabel(\"\");\r\n                    setErrorUsernameText(\"\");\r\n                  }}\r\n                >\r\n                  Close\r\n                </IonButton>\r\n              </IonButtons>\r\n              <IonTitle>Edit Profile</IonTitle>\r\n            </IonToolbar>\r\n          </IonHeader>\r\n          <IonContent fullscreen>\r\n            <IonItem>\r\n              <IonLabel color={errorUsernameLabel} position=\"floating\">\r\n                Username\r\n              </IonLabel>\r\n              <IonInput\r\n                color={errorUsernameText}\r\n                value={username}\r\n                type=\"text\"\r\n                onIonChange={async (e) => setUsername(e.detail.value!)}\r\n              ></IonInput>\r\n            </IonItem>\r\n            <IonItem>\r\n              <IonLabel position=\"floating\">First Name</IonLabel>\r\n              <IonInput\r\n                value={firstName}\r\n                type=\"text\"\r\n                onIonChange={(e) => setFirstName(e.detail.value!)}\r\n              ></IonInput>\r\n            </IonItem>\r\n            <IonItem>\r\n              <IonLabel position=\"floating\">Last Name</IonLabel>\r\n              <IonInput\r\n                value={lastName}\r\n                type=\"text\"\r\n                onIonChange={(e) => setLastName(e.detail.value!)}\r\n              ></IonInput>\r\n            </IonItem>\r\n            <IonItem>\r\n              <IonLabel color={errorEmailLabel} position=\"floating\">\r\n                E-Mail\r\n              </IonLabel>\r\n              <IonInput\r\n                color={errorEmailText}\r\n                value={email}\r\n                type=\"email\"\r\n                onIonChange={(e) => setEmail(e.detail.value!)}\r\n              ></IonInput>\r\n            </IonItem>\r\n            <IonItem>\r\n              <IonLabel position=\"stacked\">Biography</IonLabel>\r\n              <IonTextarea\r\n                value={bio}\r\n                onIonChange={(e) => setBio(e.detail.value!)}\r\n              ></IonTextarea>\r\n            </IonItem>\r\n            <IonGrid>\r\n              <IonRow>\r\n                <IonCol style={{ textAlign: \"center\" }}>\r\n                  <IonButton\r\n                    expand=\"block\"\r\n                    shape=\"round\"\r\n                    fill=\"outline\"\r\n                    color=\"primary\"\r\n                    onClick={() => {\r\n                      dismissToast();\r\n                      setEditProfile(false);\r\n                      setErrorEmailLabel(\"\");\r\n                      setErrorEmailText(\"\");\r\n                      setErrorUsernameLabel(\"\");\r\n                      setErrorUsernameText(\"\");\r\n                    }}\r\n                  >\r\n                    Cancel\r\n                  </IonButton>\r\n                </IonCol>\r\n                <IonCol style={{ textAlign: \"center\" }}>\r\n                  <IonButton\r\n                    expand=\"block\"\r\n                    shape=\"round\"\r\n                    fill=\"outline\"\r\n                    color=\"primary\"\r\n                    onClick={async () => {\r\n                      setShowLoading(true);\r\n                      dismissToast();\r\n                      isShowAlertLogin = false;\r\n                      isUsernameCorrect = true;\r\n                      isEmailCorrect = true;\r\n\r\n                      const data = {\r\n                        username: username,\r\n                        userFirstName: firstName,\r\n                        userLastName: lastName,\r\n                        email: email,\r\n                        biography: bio,\r\n                        profilepic: profilepic\r\n                      };\r\n\r\n                      await db.collection(\"users\")\r\n                        .where(\"email\", \"==\", auth.currentUser?.email)\r\n                        .get()\r\n                        .then((querySnapshot) => {\r\n                          querySnapshot.forEach((doc) => {\r\n                            oldUsername = doc.data().username;\r\n                          });\r\n                        })\r\n                        .then(async () => {\r\n                          await checkUsername(username)\r\n                            .then(async (check) => {\r\n                              if (check) {\r\n                                setErrorUsernameLabel(\"danger\");\r\n                                setErrorUsernameText(\"danger\");\r\n                                isUsernameCorrect = false;\r\n                              } else {\r\n                                setErrorUsernameLabel(\"\");\r\n                                setErrorUsernameText(\"\");\r\n                                isUsernameCorrect = true;\r\n                              }\r\n                            })\r\n                            .then(async () => {\r\n                              await auth.fetchSignInMethodsForEmail(email as string).then(async () => {\r\n                                await db.collection(\"users\").get().then((querySnapshot) => {\r\n                                  querySnapshot.forEach(doc => {\r\n                                    if (doc.data().email == email && auth.currentUser?.email != email) {\r\n                                      isEmailCorrect = false;\r\n                                      console.log(\"Email bereits vorhanden!\");\r\n                                      setErrorEmailLabel(\"danger\");\r\n                                      setErrorEmailText(\"danger\");\r\n                                    }\r\n                                  });\r\n                                });\r\n                              }).catch((error) => {\r\n                                isEmailCorrect = false;\r\n                                console.log(\"Email ist Falsch!\");\r\n                                setErrorEmailLabel(\"danger\");\r\n                                setErrorEmailText(\"danger\");\r\n                              });\r\n                              if (email != auth.currentUser?.email && isEmailCorrect && isUsernameCorrect) {\r\n                                await auth.currentUser\r\n                                  ?.updateEmail(email as string)\r\n                                  .then(async function () {\r\n                                    console.log(\"Email-Update successfull!\");\r\n                                    await auth.currentUser\r\n                                      ?.sendEmailVerification()\r\n                                      .then(async function () {\r\n                                        console.log(\"Send Email successfull!\");\r\n                                        setErrorEmailLabel(\"\");\r\n                                        setErrorEmailText(\"\");\r\n                                        isEmailCorrect = true;\r\n                                        if (isUsernameCorrect) {\r\n                                          await db\r\n                                            .collection(\"users\")\r\n                                            .doc(auth.currentUser?.uid)\r\n                                            .update({\r\n                                              biography: data.biography,\r\n                                              email: data.email,\r\n                                              profilepic: data.profilepic,\r\n                                              userFirstName: data.userFirstName,\r\n                                              userLastName: data.userLastName,\r\n                                              username: data.username\r\n                                            });\r\n                                        }\r\n                                      })\r\n                                      .catch(function (error) {\r\n                                        console.log(\"Send Email ERROR!\");\r\n                                      });\r\n                                  })\r\n                                  .catch(function (error) {\r\n                                    setErrorEmailLabel(\"\");\r\n                                    setErrorEmailText(\"\");\r\n                                    isShowAlertLogin = true;\r\n                                    setShowAlertLogin(true);\r\n                                  });\r\n                              } else {\r\n                                if (isEmailCorrect) {\r\n                                  setErrorEmailLabel(\"\");\r\n                                  setErrorEmailText(\"\");\r\n                                }\r\n\r\n                                if (isUsernameCorrect && isEmailCorrect) {\r\n                                  await db\r\n                                    .collection(\"users\")\r\n                                    .doc(auth.currentUser?.uid)\r\n                                    .update({\r\n                                      biography: data.biography,\r\n                                      email: data.email,\r\n                                      profilepic: data.profilepic,\r\n                                      userFirstName: data.userFirstName,\r\n                                      userLastName: data.userLastName,\r\n                                      username: data.username\r\n                                    });\r\n                                }\r\n                              }\r\n                            }).then(async () => {\r\n                              if (username != oldUsername && isUsernameCorrect && isEmailCorrect && !isShowAlertLogin) {\r\n                                await db.collection(\"images\").where(\"user\", \"==\", oldUsername).get().then((querySnapshot) => {\r\n                                  querySnapshot.forEach(async doc => {\r\n                                    let imageData: Image = doc.data() as Image;\r\n                                    imageData.user = String(username);\r\n                                    await db\r\n                                      .collection(\"images\")\r\n                                      .doc(doc.data().id)\r\n                                      .set(imageData);\r\n                                  });\r\n                                });\r\n                              }\r\n                            }).then(() => {\r\n                              if (!isUsernameCorrect && !isEmailCorrect) {\r\n                                presentToast({\r\n                                  buttons: [{ text: 'hide', handler: () => dismissToast() }],\r\n                                  message: 'Username and Email already exists or invalid!',\r\n                                  duration: 5000,\r\n                                  color: \"danger\"\r\n                                });\r\n                              }\r\n                              else if (!isUsernameCorrect) {\r\n                                presentToast({\r\n                                  buttons: [{ text: 'hide', handler: () => dismissToast() }],\r\n                                  message: 'Username already exists or invalid!',\r\n                                  duration: 5000,\r\n                                  color: \"danger\"\r\n                                });\r\n                              }\r\n                              else if (!isEmailCorrect) {\r\n                                presentToast({\r\n                                  buttons: [{ text: 'hide', handler: () => dismissToast() }],\r\n                                  message: 'Email already exists or invalid!',\r\n                                  duration: 5000,\r\n                                  color: \"danger\"\r\n                                });\r\n                              }\r\n                              else {\r\n                                dismissToast();\r\n                                if (!isShowAlertLogin) {\r\n                                  setEditProfile(false);\r\n                                }\r\n                              }\r\n                            });\r\n                        })\r\n                        .then(() => {\r\n                          setShowLoading(false);\r\n                        });\r\n                    }}\r\n                  >\r\n                    Save\r\n                  </IonButton>\r\n                  <IonAlert\r\n                    isOpen={showAlertLogin}\r\n                    cssClass=\"my-custom-class\"\r\n                    header={\"Login\"}\r\n                    message={\"Enter your password and try to save your data again.\"}\r\n                    inputs={[\r\n                      {\r\n                        name: 'Password',\r\n                        type: 'password',\r\n                        placeholder: \"Password\"\r\n                      }\r\n                    ]}\r\n                    buttons={[\r\n                      {\r\n                        text: 'Cancel',\r\n                        role: 'cancel',\r\n                        cssClass: 'secondary',\r\n                        handler: () => {\r\n                          console.log('Confirm Cancel');\r\n                          setShowAlertLogin(false);\r\n                        }\r\n                      },\r\n                      {\r\n                        text: 'OK',\r\n                        handler: async (e) => {\r\n                          console.log('Confirm Ok');\r\n\r\n                          await auth\r\n                            .signInWithEmailAndPassword(auth.currentUser?.email as string, e.Password)\r\n                            .then(() => {\r\n                              setShowAlertLogin(false);\r\n                              setLoginSuccessfull(true);\r\n                            })\r\n                            .catch((err) => {\r\n                              setShowAlertLogin(false);\r\n                              setShowAlertIncorrectPassword(true);\r\n                            });\r\n                        }\r\n                      }\r\n                    ]}\r\n                  />\r\n                  <IonAlert\r\n                    isOpen={showAlertIncorrectPassword}\r\n                    onDidDismiss={() => {\r\n                      setShowAlertIncorrectPassword(false);\r\n                      setShowAlertLogin(true);\r\n                    }}\r\n                    cssClass=\"my-custom-class\"\r\n                    header={\"Incorrect Password\"}\r\n                    message={\"Your password is incorrect. Try again.\"}\r\n                    buttons={[\"OK\"]}\r\n                  />\r\n                  <IonAlert\r\n                    isOpen={isLoginSuccessfull}\r\n                    onDidDismiss={() => {\r\n                      setLoginSuccessfull(false);\r\n                    }}\r\n                    cssClass=\"my-custom-class\"\r\n                    header={\"Login Successful\"}\r\n                    message={\"Now you can save your data again.\"}\r\n                    buttons={[\"OK\"]}\r\n                  />\r\n                  <IonLoading\r\n                    isOpen={showLoading}\r\n                    message={'Please wait...'}\r\n                  />\r\n                </IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol style={{ textAlign: \"center\" }}>\r\n                  <IonButton\r\n                    shape=\"round\"\r\n                    fill=\"outline\"\r\n                    color=\"danger\"\r\n                    onClick={() => {\r\n                      dismissToast();\r\n                      auth.signOut();\r\n                    }}\r\n                  >\r\n                    Logout\r\n                  </IonButton>\r\n                </IonCol>\r\n              </IonRow>\r\n            </IonGrid>\r\n          </IonContent>\r\n        </IonModal>\r\n      </IonContent>\r\n    </IonPage >\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import {\r\n  IonActionSheet\r\n} from \"@ionic/react\";\r\nimport { cameraOutline, closeOutline, imageOutline } from \"ionicons/icons\";\r\nimport React, { Dispatch, SetStateAction, useState } from \"react\";\r\nimport { Redirect } from \"react-router\";\r\nimport { Photo, usePhotoGallery } from \"../../hooks/usePhotoGallery\";\r\n\r\n\r\nconst UploadSelectionModal: React.FC<{active: boolean, setShowActionSheet: Dispatch<SetStateAction<boolean>>, setLoading: Dispatch<SetStateAction<boolean>>}> = ({active, setShowActionSheet, setLoading}) => {\r\n\r\n  const [selectedRoute, setSelectedRoute] = useState(\"\");\r\n  const [image, setImage] = useState<Photo>();\r\n  \r\n  const { takePhoto, takePhotoFromGalerie } = usePhotoGallery();\r\n\r\n  return (\r\n      <>\r\n\r\n        {\r\n            selectedRoute === \"upload\" && <Redirect to={{\r\n                pathname: \"/upload\",\r\n                state: { image }\r\n            }}/>\r\n        }\r\n\r\n        <IonActionSheet\r\n            isOpen={active}\r\n            onDidDismiss={() => setShowActionSheet(false)}\r\n            buttons={[\r\n            {\r\n                text: \"Camera\",\r\n                icon: cameraOutline,\r\n                handler: () => {\r\n                    takePhoto()\r\n                    .then(image => {\r\n                        // User took image\r\n                        setLoading(true);\r\n                        setImage(image);\r\n                        setSelectedRoute(\"upload\")\r\n                    })\r\n                    .catch(err => {\r\n                        // User Aborted Camera\r\n                        console.log(err)\r\n                    })\r\n                },\r\n            },\r\n            {\r\n                text: \"Galerie\",\r\n                icon: imageOutline,\r\n                handler: () => {\r\n                    takePhotoFromGalerie()\r\n                    .then(image => {\r\n                        setLoading(true)\r\n                        setImage(image);\r\n                        setSelectedRoute(\"upload\");\r\n                    })\r\n                },\r\n            },\r\n            {\r\n                text: \"Close\",\r\n                icon: closeOutline,\r\n                handler: () => {\r\n                setShowActionSheet(false)\r\n                },\r\n            }\r\n            ]}\r\n        ></IonActionSheet>\r\n      </>\r\n  );\r\n};\r\n\r\nexport default UploadSelectionModal;\r\n","function degreesToRadians(degrees: number) {\r\n  return (degrees * Math.PI) / 180;\r\n}\r\n\r\nexport function distanceInKm(lat1: number, lon1: number, lat2: number, lon2: number) {\r\n  var earthRadiusKm = 6371;\r\n\r\n  var dLat = degreesToRadians(lat2 - lat1);\r\n  var dLon = degreesToRadians(lon2 - lon1);\r\n\r\n  lat1 = degreesToRadians(lat1);\r\n  lat2 = degreesToRadians(lat2);\r\n\r\n  var a =\r\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n    Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);\r\n  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n  return earthRadiusKm * c;\r\n}","\r\nexport async function presentAlert(message:any) {\r\n    const alert = document.createElement('ion-alert'); \r\n    alert.message = message;\r\n    alert.buttons = ['OK'];\r\n  \r\n    document.body.appendChild(alert);\r\n    await alert.present();\r\n  \r\n    const { role } = await alert.onDidDismiss();\r\n    console.log('onDidDismiss resolved with role', role);\r\n  }\r\n\r\n  export async function presentAlertWithHeader(message:any, header:any) {\r\n    const alert = document.createElement('ion-alert'); \r\n    alert.header = header;\r\n    alert.message = message;\r\n    alert.buttons = ['OK'];\r\n  \r\n    document.body.appendChild(alert);\r\n    await alert.present();\r\n  \r\n    const { role } = await alert.onDidDismiss();\r\n    console.log('onDidDismiss resolved with role', role);\r\n  }","import { db } from \"../helper/firebase\";\r\nimport { Image } from \"../model/Image\";\r\nimport { presentAlert } from \"./alert\";\r\n\r\nimport firebase from \"firebase/app\";\r\n\r\nexport async function likeFunction(\r\n  user: firebase.User | null,\r\n  likeNumber: number,\r\n  image: Image\r\n): Promise<number> {\r\n  //add liked image to user collection\r\n  await db\r\n    .collection(\"users\")\r\n    .doc(user?.uid)\r\n    .update({\r\n      likedImage: firebase.firestore.FieldValue.arrayUnion(image.id),\r\n    })\r\n    .catch((err) => presentAlert(err.message));\r\n\r\n  var like = likeNumber;\r\n\r\n  like += 1;\r\n\r\n  //update like number in db\r\n  await db\r\n    .collection(\"images\")\r\n    .doc(image.id)\r\n    .update({\r\n      likes: like,\r\n    })\r\n    .catch((err) => presentAlert(err.message));\r\n  return like;\r\n}\r\n\r\nexport async function delikeFunction(\r\n  user: firebase.User | null,\r\n  likeNumber: number,\r\n  image: Image\r\n): Promise<number> {\r\n  //remove deliked image in collection user\r\n  await db\r\n    .collection(\"users\")\r\n    .doc(user?.uid)\r\n    .update({\r\n      likedImage: firebase.firestore.FieldValue.arrayRemove(image.id),\r\n    })\r\n    .catch((err) => presentAlert(err.message));\r\n\r\n  var like = likeNumber;\r\n\r\n  like -= 1;\r\n\r\n  if(like <= 0){\r\n    like = 0;\r\n  }\r\n\r\n  //update like number in db\r\n  await db\r\n    .collection(\"images\")\r\n    .doc(image.id)\r\n    .update({\r\n      likes: like,\r\n    })\r\n    .catch((err) => presentAlert(err.message));\r\n\r\n  return like;\r\n}\r\n","import {\r\n  IonButton,\r\n  IonButtons,\r\n  IonCard,\r\n  IonCardContent,\r\n  IonCardHeader,\r\n  IonCardSubtitle,\r\n  IonCardTitle,\r\n  IonIcon,\r\n  IonImg,\r\n  IonItem,\r\n  IonLabel,\r\n  IonText,\r\n} from \"@ionic/react\";\r\nimport { heartOutline, pin, heart } from \"ionicons/icons\";\r\nimport React, {\r\n  Dispatch,\r\n  SetStateAction,\r\n  useCallback,\r\n  useContext,\r\n  useEffect,\r\n  useState,\r\n} from \"react\";\r\nimport { UserContext } from \"../..\";\r\nimport { db } from \"../../helper/firebase\";\r\nimport { presentAlert } from \"../../hooks/alert\";\r\nimport { Image } from \"../../model/Image\";\r\n\r\nimport { delikeFunction, likeFunction } from \"../../hooks/like\";\r\n\r\ninterface ContainerProps {\r\n  image: Image;\r\n  setLoading?: Dispatch<SetStateAction<boolean>>;\r\n}\r\n\r\nconst ExploreCard: React.FC<ContainerProps> = ({ image, setLoading }) => {\r\n  const [likeNumber, setLikeNumber] = useState(0);\r\n  const [likeIcon, setLikeIcon] = useState(heartOutline);\r\n  const [likeColor, setLikeColor] = useState(\"dark\");\r\n  const [flag, setFlag] = useState(false);\r\n\r\n  const user = useContext(UserContext);\r\n\r\n  useEffect(() => {\r\n    db.collection(\"images\")\r\n      .doc(image.id)\r\n      .get()\r\n      .then(async (documentSnapshot) => {\r\n        if (documentSnapshot.data()?.likes === undefined) {\r\n          return;\r\n        } else {\r\n          await db\r\n            .collection(\"users\")\r\n            .doc(user?.uid)\r\n            .get()\r\n            .then(async (documentSnapshot) => {\r\n              let likedImages: string[] = documentSnapshot.data()?.likedImage;\r\n\r\n              let bol: boolean = false;\r\n              if (likedImages !== undefined)\r\n                bol = likedImages.find((i) => i === image.id) != undefined;\r\n\r\n              //if true delike\r\n              if (bol) {\r\n                setLikeIcon(heart);\r\n                setLikeColor(\"danger\");\r\n              }\r\n            });\r\n          setLikeNumber(documentSnapshot.data()?.likes);\r\n        }\r\n      });\r\n  });\r\n\r\n  const onLikeClick = useCallback(async () => {\r\n    if (flag === false) {\r\n      setFlag(true);\r\n      setTimeout(() => setFlag(false), 1000);\r\n\r\n      if (setLoading != undefined) setLoading(true);\r\n\r\n      await db\r\n        .collection(\"users\")\r\n        .doc(user?.uid)\r\n        .get()\r\n        .then(async (documentSnapshot) => {\r\n          let likedImages: string[] = documentSnapshot.data()?.likedImage;\r\n\r\n          let bol: boolean = false;\r\n          if (likedImages !== undefined)\r\n            bol = likedImages.find((i) => i === image.id) != undefined;\r\n\r\n          //if true delike\r\n          if (bol) {\r\n            var like = await delikeFunction(user, likeNumber, image);\r\n\r\n            setLikeNumber(like);\r\n            setLikeColor(\"dark\");\r\n            setLikeIcon(heartOutline);\r\n          }\r\n          //else like\r\n          else {\r\n            var like = await likeFunction(user, likeNumber, image);\r\n\r\n            setLikeNumber(like);\r\n            setLikeColor(\"danger\");\r\n            setLikeIcon(heart);\r\n          }\r\n\r\n          if (setLoading != undefined) setLoading(false);\r\n        })\r\n        .catch((err) => presentAlert(err.message));\r\n    }\r\n    if (setLoading != undefined) setLoading(false);\r\n  }, [likeNumber, image, user, db, flag]);\r\n\r\n  return (\r\n    <IonCard className=\"my-ion-card\">\r\n      {/* Coordinated */}\r\n      <IonItem>\r\n        <IonIcon icon={pin} slot=\"start\" />\r\n        <IonLabel>\r\n          {image.location.position\r\n            ? image.location.position\r\n            : image.location.coords.latitude +\r\n              \" \" +\r\n              image.location.coords.longitude}\r\n        </IonLabel>\r\n      </IonItem>\r\n\r\n      {/* Distance */}\r\n      {image.distance ? (\r\n        <IonItem>\r\n          <IonLabel>\r\n            {`${image.distance.toString().slice(0, 4)} km away from you`}\r\n          </IonLabel>\r\n        </IonItem>\r\n      ) : (\r\n        <IonItem>\r\n          <IonLabel>{`Near you`}</IonLabel>\r\n        </IonItem>\r\n      )}\r\n\r\n      <IonCardHeader>\r\n        <IonCardSubtitle>{image.user}</IonCardSubtitle>\r\n        <IonCardTitle>{image.title}</IonCardTitle>\r\n      </IonCardHeader>\r\n\r\n      <IonCardContent>\r\n        <IonImg src={image.url}></IonImg>\r\n        <br />\r\n        <IonButtons slot=\"start\">\r\n          <IonButton color={likeColor} onClick={onLikeClick}>\r\n            <IonIcon icon={likeIcon} />\r\n          </IonButton>\r\n          <IonText>{likeNumber}</IonText>\r\n        </IonButtons>\r\n        <br />\r\n        <IonText style={{ fontSize: \"large\" }}>{image.description}</IonText>\r\n      </IonCardContent>\r\n    </IonCard>\r\n  );\r\n};\r\n\r\nexport default ExploreCard;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  IonContent,\r\n  IonHeader,\r\n  IonPage,\r\n  IonTitle,\r\n  IonToolbar,\r\n  IonSearchbar,\r\n  IonChip,\r\n  IonLabel,\r\n  IonListHeader,\r\n  IonRow,\r\n  IonCol,\r\n  IonGrid,\r\n  IonImg,\r\n  IonPopover,\r\n} from \"@ionic/react\";\r\nimport { db } from \"../../helper/firebase\";\r\nimport { Image } from \"../../model/Image\";\r\nimport { GeolocationPosition, Plugins } from \"@capacitor/core\";\r\nimport { distanceInKm } from \"../../hooks/evaluateDistance\";\r\nimport ExploreCard from \"../../components/ExploreCard/ExploreCard\";\r\nimport \"./Search.css\";\r\n\r\nconst { Geolocation } = Plugins;\r\n\r\nconst Search: React.FC = () => {\r\n  const [filter, setFilter] = useState(\"Location\");\r\n  const [images, setImages] = useState<Array<Image>>([]);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const [popPic, setPopPic] = useState<Image>();\r\n  // Geoinformation\r\n  const [location, setLocation] = useState<GeolocationPosition>();\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      // push location to state\r\n      setLocation(await Geolocation.getCurrentPosition());\r\n\r\n      console.log(\"Initial load...\");\r\n\r\n      setImages(await fetchImages());\r\n    })();\r\n  }, []);\r\n\r\n  async function fetchImages(): Promise<Image[]> {\r\n    // fetch images from firebase\r\n    const ref = db.collection(\"images\");\r\n    const data = await ref.get();\r\n\r\n    // load images to typed docs\r\n    let t: Image[] = [];\r\n    data.docs.forEach((doc: any) => t.push(doc.data()));\r\n    t.forEach((element: Image) => {\r\n      if (location !== undefined && element.distance == undefined) {\r\n        element.distance = distanceInKm(\r\n          location?.coords.latitude,\r\n          location?.coords.longitude,\r\n          element.location.coords.latitude,\r\n          element.location.coords.longitude\r\n        );\r\n      }\r\n    });\r\n\r\n    return t;\r\n  }\r\n\r\n  function filterItems(searchText: string) {\r\n    console.log(\"filtering\", searchText);\r\n\r\n    if (searchText === \"\" || searchText === null || searchText === undefined) {\r\n      fetchImages().then((res) => {\r\n        setImages(res);\r\n      });\r\n    } else if (filter === \"Location\") {\r\n      fetchImages().then((res) => {\r\n        let i: Image[] = [];\r\n        res.forEach((image) => {\r\n          if (image.location.position?.includes(searchText)) {\r\n            i.push(image);\r\n          }\r\n        });\r\n        setImages(i);\r\n      });\r\n    } else if (filter === \"Title\") {\r\n      fetchImages().then((res) => {\r\n        let i: Image[] = [];\r\n        res.forEach((image) => {\r\n          if (image.title.includes(searchText)) {\r\n            i.push(image);\r\n          }\r\n        });\r\n        setImages(i);\r\n      });\r\n    } else if (filter === \"User\") {\r\n      fetchImages().then((res) => {\r\n        let i: Image[] = [];\r\n        res.forEach((image) => {\r\n          if (image.user.includes(searchText)) {\r\n            i.push(image);\r\n          }\r\n        });\r\n        setImages(i);\r\n      });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonTitle>Search</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent fullscreen>\r\n        <IonSearchbar\r\n          onIonChange={(e) => {\r\n            filterItems((e.target as HTMLInputElement).value);\r\n          }}\r\n          showCancelButton=\"never\"\r\n        ></IonSearchbar>\r\n\r\n        <IonListHeader>Filter: {filter}</IonListHeader>\r\n        <IonChip\r\n          style={\r\n            filter === \"Location\"\r\n              ? { backgroundColor: \"lightgray\", color: \"black\" }\r\n              : {}\r\n          }\r\n          onClick={(e) => {\r\n            setFilter(\"Location\");\r\n          }}\r\n        >\r\n          <IonLabel>Location</IonLabel>\r\n        </IonChip>\r\n        <IonChip\r\n          style={\r\n            filter === \"User\"\r\n              ? { backgroundColor: \"lightgray\", color: \"black\" }\r\n              : {}\r\n          }\r\n          onClick={(e) => {\r\n            setFilter(\"User\");\r\n          }}\r\n        >\r\n          <IonLabel>User</IonLabel>\r\n        </IonChip>\r\n        <IonChip\r\n          style={\r\n            filter === \"Title\"\r\n              ? { backgroundColor: \"lightgray\", color: \"black\" }\r\n              : {}\r\n          }\r\n          onClick={(e) => {\r\n            setFilter(\"Title\");\r\n          }}\r\n        >\r\n          <IonLabel>Title</IonLabel>\r\n        </IonChip>\r\n\r\n        <IonGrid>\r\n          <IonRow>\r\n            {images.map((p: Image) => {\r\n              return (\r\n                <IonCol size=\"4\">\r\n                  <IonImg\r\n                    onClick={(e) => {\r\n                      setShowPopup(true);\r\n                      setPopPic(p);\r\n                    }}\r\n                    src={p.url}\r\n                    style={{\r\n                      objectFit: \"cover\",\r\n                      height: \"100%\",\r\n                      width: \"100%\",\r\n                    }}\r\n                  ></IonImg>\r\n                  <p\r\n                    style={{\r\n                      position: \"absolute\",\r\n                      bottom: \"-10px\",\r\n                      right: \"10px\",\r\n                      backgroundColor: \"rgba(0,0,0,0.5)\",\r\n                      borderRadius: \"5px\",\r\n                    }}\r\n                  >\r\n                    {p.distance?.toPrecision(4)}\r\n                    km\r\n                  </p>\r\n                </IonCol>\r\n              );\r\n            })}\r\n          </IonRow>\r\n        </IonGrid>\r\n        <IonPopover\r\n          cssClass=\"my-pop-over\"\r\n          backdropDismiss={true}\r\n          showBackdrop={false}\r\n          isOpen={showPopup}\r\n          onDidDismiss={(e) => setShowPopup(false)}\r\n        >\r\n          {popPic && <ExploreCard image={popPic} />}\r\n        </IonPopover>\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n","export default __webpack_public_path__ + \"static/media/icon.28ac23a3.png\";","import { db } from \"../helper/firebase\";\r\nimport { User } from \"../model/User\";\r\n\r\n\r\n//Check Username\r\nexport async function checkUsername(userName: any): Promise<boolean> {\r\n   \r\n  var usernameCheck = db.collection(\"users\");\r\n\r\n  const data = await usernameCheck.get();\r\n  let typedDocs: User[] = [];\r\n  data.docs.forEach((doc: any) => typedDocs.push(doc.data().username));\r\n  var len = typedDocs.length; \r\n \r\n  for (var i = 0; i < len; i++) {\r\n    if (typedDocs[i] === userName) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\n","import { auth, db } from \"../../helper/firebase\";\r\nimport { presentAlert } from \"../alert\";\r\nimport { checkUsername } from \"../checkUsername\";\r\n\r\nexport async function signInWithUsernameAndPassword(\r\n  username: any,\r\n  password: any\r\n): Promise<any> {\r\n  \r\n  if (await checkUsername(username)) {\r\n    await db.collection(\"users\")\r\n      .where(\"username\", \"==\", username)\r\n      .get()\r\n      .then((querySnapshot) => {\r\n        querySnapshot.forEach(async (doc) => {\r\n         await auth\r\n            .signInWithEmailAndPassword(doc.data().email, password)\r\n            .catch((err) => presentAlert(\"Your Login credentials are incorrect\"));\r\n        });\r\n      });\r\n  } else {\r\n    await auth\r\n      .signInWithEmailAndPassword(username, password)\r\n      .catch((err) => presentAlert(\"Your Login credentials are incorrect\"));\r\n  }\r\n}\r\n","import { auth } from \"../../helper/firebase\";\r\nimport { presentAlert } from \"../alert\";\r\nimport { checkUsername } from \"../checkUsername\";\r\nimport { signInWithUsernameAndPassword } from \"./signInWithUsernameAndPassword\";\r\n\r\n\r\nexport async function checkLogin(username: any, password: any) {\r\n    \r\n    if (username.length === 0) presentAlert(\"Email or Username Required\");\r\n    else if (password.length === 0) presentAlert(\"Password Required\");   \r\n    else {\r\n        await signInWithUsernameAndPassword(username, password);      \r\n     }    \r\n}","import { eyeOffOutline, eyeOutline } from \"ionicons/icons\";\r\n\r\nexport async function hideShowPassword(passwordType: any) {\r\n  var arr: any[] = [];\r\n\r\n  if (passwordType === \"password\") {\r\n    arr = [\"text\", eyeOffOutline];\r\n  } else {\r\n    arr = [\"password\", eyeOutline];\r\n  }\r\n  return arr;\r\n}\r\n","import {\r\n  IonPage,\r\n  IonTitle,\r\n  IonContent,\r\n  IonInput,\r\n  IonButton,\r\n  IonItem,\r\n  IonLabel,\r\n  IonIcon,\r\n  IonGrid,\r\n  IonAlert,\r\n  IonRouterLink,\r\n  IonImg,\r\n  IonRow,\r\n  IonCol,\r\n} from \"@ionic/react\";\r\nimport { eyeOutline, logInOutline } from \"ionicons/icons\";\r\nimport React, { useCallback, useState } from \"react\";\r\nimport \"./Login.css\";\r\nimport { auth } from \"../../helper/firebase\";\r\nimport icon from \"../../assets/icon/icon.png\";\r\nimport \"firebase/auth\";\r\nimport { checkLogin } from \"../../hooks/login/checkLogin\";\r\nimport { hideShowPassword } from \"../../hooks/hideShowPassword\";\r\n\r\nconst Login: React.FC = () => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [passwordShowHideIcon, setPasswordShowHideIcon] = useState(eyeOutline);\r\n  const [passwordType, setpasswordType] = useState<any>(\"password\");\r\n  const [alertPasswordForgotenText, setalertPasswordForgotenText] = useState(\r\n    false\r\n  );\r\n\r\n  const onUsernameNameChange = useCallback(\r\n    (e) => setUsername(e.detail?.value),\r\n    []\r\n  );\r\n  const onPasswordChange = useCallback((e) => setPassword(e.detail?.value), []);\r\n\r\n  const onhideShowPasswordClick = useCallback(async () => {\r\n    var a: any[] = await hideShowPassword(passwordType);\r\n    setpasswordType(a[0]);\r\n    setPasswordShowHideIcon(a[1]);\r\n  }, [passwordType]);\r\n\r\n  const onLoginClick = useCallback(async () => {\r\n    await checkLogin(username, password);\r\n  }, [username, password]);\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonContent fullscreen>\r\n        <br />\r\n        <br />\r\n        <br />\r\n        <IonTitle className=\"Title\">Geogram</IonTitle>\r\n        <br />\r\n        <IonGrid>\r\n          <IonRow>\r\n            <IonCol\r\n              size=\"12\"\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <IonImg className=\"Icon\" src={icon} />\r\n            </IonCol>\r\n          </IonRow>\r\n        </IonGrid>\r\n        <br />\r\n        <IonGrid>\r\n          <IonRow>\r\n            <IonCol\r\n              size=\"12\"\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <IonItem lines=\"none\" className=\"inputField\">\r\n                <IonLabel position=\"floating\">Email or Username</IonLabel>\r\n                <IonInput\r\n                  onIonChange={onUsernameNameChange}\r\n                  value={username}\r\n                  class=\"input\"\r\n                  type=\"text\"\r\n                ></IonInput>\r\n              </IonItem>\r\n            </IonCol>\r\n          </IonRow>\r\n\r\n          <IonRow>\r\n            <IonCol\r\n              size=\"12\"\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <IonItem lines=\"none\" className=\"inputField\">\r\n                <IonLabel position=\"floating\">Password</IonLabel>\r\n                <IonInput\r\n                  onIonChange={onPasswordChange}\r\n                  value={password}\r\n                  type={passwordType}\r\n                ></IonInput>                \r\n                <IonIcon className=\"LookIcon\"\r\n                  slot=\"end\"\r\n                  icon={passwordShowHideIcon}\r\n                  onClick={onhideShowPasswordClick}\r\n                />\r\n              </IonItem>\r\n            </IonCol>\r\n          </IonRow>\r\n\r\n          <div className=\"LogInButton\">\r\n            <IonRow>\r\n              <IonCol\r\n                size=\"12\"\r\n                style={{\r\n                  display: \"flex\",\r\n                  justifyContent: \"center\",\r\n                  alignItems: \"center\",\r\n                }}\r\n              >\r\n                <IonButton onClick={onLoginClick} expand=\"block\">\r\n                  Login\r\n                  <IonIcon icon={logInOutline} />\r\n                </IonButton>\r\n              </IonCol>\r\n            </IonRow>\r\n          </div>\r\n        </IonGrid>\r\n        <IonGrid>\r\n          <br />\r\n          <br />\r\n          <div className=\"LogInButton\">\r\n            <IonRouterLink routerLink={\"/register\"}>\r\n              CREATE A NEW ACCOUNT\r\n            </IonRouterLink>\r\n          </div>\r\n          <br />\r\n          <div className=\"LogInButton\">\r\n            <IonRouterLink onClick={() => setalertPasswordForgotenText(true)}>\r\n              I FORGOT MY PASSWORD\r\n            </IonRouterLink>\r\n          </div>\r\n        </IonGrid>\r\n      </IonContent>\r\n      <IonAlert\r\n        isOpen={alertPasswordForgotenText}\r\n        onDidDismiss={() => setalertPasswordForgotenText(false)}\r\n        message={\"Please Type In your Email\"}\r\n        inputs={[\r\n          {\r\n            name: \"emailPasswordForgoten\",\r\n            type: \"email\",\r\n            placeholder: \"Email\",\r\n          },\r\n        ]}\r\n        buttons={[\r\n          {\r\n            text: \"Send\",\r\n            handler: (data) => {\r\n              auth.sendPasswordResetEmail(data.emailPasswordForgoten);\r\n            },\r\n          },\r\n        ]}\r\n      />\r\n    </IonPage>\r\n  );\r\n};\r\nexport default Login;\r\n","export enum PasswordCheckStrength {\r\n    Notset = \"Password\",\r\n    Short = \"too short\",\r\n    Common = \"commonly used\",\r\n    Weak = \"weak\",\r\n    Ok = \"ok\",\r\n    Strong = \"strong\",\r\n};\r\n\r\n// Object to check password strengths and various properties\r\nexport class PasswordCheckService {\r\n\r\n    // Expected length of all passwords\r\n    public static get MinimumLength(): number {\r\n        return 6;\r\n    }\r\n\r\n    // Regex to check for a common password string - all based on 5+ length passwords\r\n    private commonPasswordPatterns = /passw.*|12345.*|09876.*|qwert.*|asdfg.*|zxcvb.*|footb.*|baseb.*|drago.*/;\r\n\r\n    //\r\n    // Checks if the given password matches a set of common password\r\n    //\r\n    public isPasswordCommon(password: string): boolean {\r\n        return this.commonPasswordPatterns.test(password);\r\n    }\r\n\r\n    //\r\n    // Returns the strength of the current password\r\n    //\r\n    public checkPasswordStrength(password: string): PasswordCheckStrength {\r\n\r\n        // Build up the strenth of our password\r\n        let numberOfElements = 0;\r\n        numberOfElements = /.*[a-z].*/.test(password) ? ++numberOfElements : numberOfElements;      // Lowercase letters\r\n        numberOfElements = /.*[A-Z].*/.test(password) ? ++numberOfElements : numberOfElements;      // Uppercase letters\r\n        numberOfElements = /.*[0-9].*/.test(password) ? ++numberOfElements : numberOfElements;      // Numbers\r\n        numberOfElements = /[^a-zA-Z0-9]/.test(password) ? ++numberOfElements : numberOfElements;   // Special characters (inc. space)\r\n\r\n        // Assume we have a poor password already\r\n        let currentPasswordStrength = PasswordCheckStrength.Short;\r\n\r\n        // Check then strenth of this password using some simple rules\r\n        if (password == null || password == \"\") {\r\n            currentPasswordStrength = PasswordCheckStrength.Notset;\r\n        } else if (password.length < PasswordCheckService.MinimumLength) {\r\n            currentPasswordStrength = PasswordCheckStrength.Short; \r\n        } \r\n        else if (this.isPasswordCommon(password) === true) {\r\n            currentPasswordStrength = PasswordCheckStrength.Common;\r\n        } else if (numberOfElements === 0 || numberOfElements === 1 || numberOfElements === 2) {\r\n            currentPasswordStrength = PasswordCheckStrength.Weak;\r\n        } else if (numberOfElements === 3) {\r\n            currentPasswordStrength = PasswordCheckStrength.Ok;\r\n        } else {\r\n            currentPasswordStrength = PasswordCheckStrength.Strong;\r\n        }\r\n\r\n        // Return the strength of this password\r\n        return currentPasswordStrength;\r\n    }\r\n}","import { auth } from \"../../helper/firebase\";\r\nimport { presentAlert } from \"../alert\";\r\n\r\nexport async function emailVerified(): Promise<boolean> { \r\n    \r\n   \r\n  if (auth.currentUser?.emailVerified) {       \r\n    return true;\r\n  } else {       \r\n    return false;\r\n  }  \r\n}\r\n\r\nexport async function sendEmailVerify() {\r\n    auth.currentUser?.sendEmailVerification();    \r\n}","import { auth, db } from \"../../helper/firebase\";\r\nimport { presentAlert } from \"../alert\";\r\nimport { sendEmailVerify } from \"./emailVerify\";\r\n\r\n\r\n\r\n\r\nexport async function register(\r\n  password: any,\r\n  email: any,\r\n  userFirstName: any,\r\n  userLastName: any,\r\n  userName: any\r\n): Promise<any> {\r\n\r\n  await  auth\r\n    .createUserWithEmailAndPassword(email, password)\r\n    .then(async (userCredential) => {\r\n      var user = userCredential.user;\r\n\r\n      sendEmailVerify();    \r\n      \r\n\r\n      const data = {\r\n        username: userName,\r\n        userFirstName: userFirstName,\r\n        userLastName: userLastName,\r\n        email: email,       \r\n      };\r\n      await db.collection(\"users\")\r\n        .doc(auth.currentUser?.uid)\r\n        .set(data)\r\n        .catch((err) => presentAlert(err.message));\r\n    })    \r\n    .catch((err) => presentAlert(err.message));    \r\n  return \"\";\r\n}\r\n","import { presentAlert } from \"../alert\";\r\nimport { checkUsername } from \"../checkUsername\";\r\nimport { register } from \"./register\";\r\n\r\nexport async function checkRegister(\r\n  confirmPassword: any,\r\n  password: any,\r\n  email: any,\r\n  userFirstName: any,\r\n  userLastName: any,\r\n  userName: any\r\n): Promise<any> {\r\n  if (userName.length === 0)  presentAlert(\"Username Required\");\r\n  else if (await checkUsername(userName)) presentAlert(\"Username already taken\");\r\n  else if (userFirstName.length === 0) presentAlert(\"Firstname Required\");\r\n  else if (userLastName.length === 0) presentAlert(\"Secondname Required\");\r\n  else if (email.length === 0) presentAlert(\"Email Required\");\r\n  else if (password.length === 0) presentAlert(\"Password Required\");\r\n  else if (password.length < 6) presentAlert(\"Password to short\");\r\n  else if (confirmPassword !== password) presentAlert(\"Password don't match\");\r\n  else {\r\n    await register(password, email, userFirstName, userLastName, userName);   \r\n  }\r\n}\r\n","import {\r\n  IonPage,\r\n  IonHeader,\r\n  IonToolbar,\r\n  IonTitle,\r\n  IonContent,\r\n  IonButtons,\r\n  IonButton,\r\n  IonIcon,\r\n  IonInput,\r\n  IonItem,\r\n  IonLabel,\r\n  IonGrid,\r\n  IonAlert,\r\n} from \"@ionic/react\";\r\nimport {\r\n  chevronBackOutline,\r\n  eyeOutline,\r\n  personAddOutline,\r\n} from \"ionicons/icons\";\r\nimport React, { useCallback, useState } from \"react\";\r\nimport { auth } from \"../../helper/firebase\";\r\nimport \"./Register.css\";\r\nimport \"firebase/auth\";\r\nimport { PasswordCheckService } from \"../../hooks/pwcheck\";\r\n\r\nimport { PasswordCheckStrength } from \"../../hooks/pwcheck\";\r\nimport { checkRegister } from \"../../hooks/register/checkRegister\";\r\nimport { presentAlertWithHeader } from \"../../hooks/alert\";\r\nimport { hideShowPassword } from \"../../hooks/hideShowPassword\";\r\n\r\nconst Register: React.FC = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [userFirstName, setuserFirstName] = useState(\"\");\r\n  const [userLastName, setuserLastName] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [userName, setUserName] = useState(\"\");\r\n  const [passwordShowHideIcon, setPasswordShowHideIcon] = useState(eyeOutline);\r\n  const [passwordType, setpasswordType] = useState<any>(\"password\");\r\n  const [indColor, setindColor] = useState(\"white\");\r\n  const [\r\n    passwordConfirmShowHideIcon,\r\n    setPasswordConfirmShowHideIcon,\r\n  ] = useState(eyeOutline);\r\n  const [passwordConfirmType, setpasswordConfirmType] = useState<any>(\r\n    \"password\"\r\n  );\r\n  const [pwStrength, setpwStrength] = useState(PasswordCheckStrength.Notset);\r\n\r\n  let checker: PasswordCheckService = new PasswordCheckService();\r\n\r\n  const onEmailNameChange = useCallback((e) => setEmail(e.detail?.value), []);\r\n  \r\n  const onPasswordChange = useCallback((e) => {\r\n    setPassword(e.detail?.value);\r\n    let pwsec = checker.checkPasswordStrength(e.detail?.value);\r\n    setpwStrength(pwsec);\r\n    if (pwsec === PasswordCheckStrength.Notset){\r\n      setindColor(\"white\");\r\n    } \r\n    else if (pwsec === PasswordCheckStrength.Short){\r\n      setindColor(\"danger\");\r\n    } \r\n    else if (pwsec === PasswordCheckStrength.Weak || pwsec === PasswordCheckStrength.Common){\r\n      setindColor(\"warning\");\r\n    } \r\n    else if (pwsec === PasswordCheckStrength.Strong || pwsec === PasswordCheckStrength.Ok){\r\n      setindColor(\"success\");\r\n    } \r\n  }, []);\r\n\r\n  const onConfirmPasswordChange = useCallback(\r\n    (e) => setConfirmPassword(e.detail?.value),\r\n    []\r\n  );\r\n  const onFirstNameChange = useCallback(\r\n    (e) => setuserFirstName(e.detail?.value),\r\n    []\r\n  );\r\n  const onLastNameChange = useCallback(\r\n    (e) => setuserLastName(e.detail?.value),\r\n    []\r\n  );\r\n  const onUsernameChange = useCallback((e) => setUserName(e.detail?.value), []);\r\n\r\n  const onhideShowPasswordClick = useCallback(async () => {\r\n    var a: any[] = await hideShowPassword(passwordType);\r\n    setpasswordType(a[0]);\r\n    setPasswordShowHideIcon(a[1]);\r\n  }, [passwordType]);\r\n\r\n  const onhideShowPasswordConfirmClick = useCallback(async () => {\r\n    var a: any[] = await hideShowPassword(passwordConfirmType);\r\n    setpasswordConfirmType(a[0]);\r\n    setPasswordConfirmShowHideIcon(a[1]);\r\n  }, [passwordConfirmType]);\r\n\r\n  const onSignUpClick = useCallback(async () => {\r\n    await checkRegister(\r\n      confirmPassword,\r\n      password,\r\n      email,\r\n      userFirstName,\r\n      userLastName,\r\n      userName\r\n    );\r\n\r\n    if (auth.currentUser) {\r\n      presentAlertWithHeader(\r\n        \"Please verify your email address to finish signing up for Geogram\",\r\n        \"Thank you for signing in.\"\r\n      );\r\n    }\r\n  }, [confirmPassword, password, email, userFirstName, userLastName, userName]);\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonButtons slot=\"start\">\r\n            <IonButton color=\"primary\" routerLink=\"/login\">\r\n              <IonIcon icon={chevronBackOutline} />\r\n            </IonButton>\r\n          </IonButtons>\r\n          <IonTitle>Register</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n\r\n      <IonContent fullscreen>\r\n        <IonGrid>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\">Username</IonLabel>\r\n            <IonInput\r\n              onIonChange={onUsernameChange}\r\n              type=\"text\"\r\n              value={userName}\r\n            ></IonInput>\r\n          </IonItem>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\">First Name</IonLabel>\r\n            <IonInput\r\n              onIonChange={onFirstNameChange}\r\n              type=\"text\"\r\n              value={userFirstName}\r\n            ></IonInput>\r\n          </IonItem>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\">Last Name</IonLabel>\r\n            <IonInput\r\n              onIonChange={onLastNameChange}\r\n              type=\"text\"\r\n              value={userLastName}\r\n            ></IonInput>\r\n          </IonItem>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\">Email</IonLabel>\r\n            <IonInput\r\n              onIonChange={onEmailNameChange}\r\n              type=\"email\"\r\n              value={email}\r\n            ></IonInput>\r\n          </IonItem>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\" color={indColor}>{pwStrength}</IonLabel>\r\n            <IonInput\r\n              onIonChange={onPasswordChange}\r\n              type={passwordType}\r\n              value={password}\r\n            ></IonInput>\r\n            <IonIcon className=\"LookIcon\"\r\n              slot=\"end\"\r\n              icon={passwordShowHideIcon}\r\n              onClick={onhideShowPasswordClick}\r\n            />\r\n          </IonItem>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\">Confirm Password </IonLabel>\r\n            <IonInput\r\n              onIonChange={onConfirmPasswordChange}\r\n              value={confirmPassword}\r\n              type={passwordConfirmType}\r\n            ></IonInput>\r\n            <IonIcon className=\"LookIcon\"\r\n              slot=\"end\"\r\n              icon={passwordConfirmShowHideIcon}\r\n              onClick={onhideShowPasswordConfirmClick}\r\n            />\r\n          </IonItem>\r\n          <br />\r\n          <div className=\"SignInButton\">\r\n            <IonButton onClick={onSignUpClick}>\r\n              Register\r\n              <IonIcon icon={personAddOutline} />\r\n            </IonButton>\r\n          </div>\r\n        </IonGrid>\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","import { Image } from \"../model/Image\";\r\n\r\nexport function sortImageArray(a: Image, b: Image): number {\r\n  if (a.distance !== undefined && b.distance !== undefined) {\r\n    if (a.distance > b.distance) {\r\n      return 1;\r\n    } else if (a.distance < b.distance) {\r\n      return -1;\r\n    } else {\r\n      if (a.location.timestamp < b.location.timestamp) {\r\n        return -1;\r\n      } else if (a.location.timestamp > b.location.timestamp) {\r\n        return 1;\r\n      }\r\n    }\r\n  }\r\n  return 0;\r\n}\r\n","/* eslint-disable react/jsx-no-undef */\r\nimport {\r\n  IonButton,\r\n  IonCol,\r\n  IonContent,\r\n  IonFab,\r\n  IonFabButton,\r\n  IonGrid,\r\n  IonHeader,\r\n  IonIcon,\r\n  IonImg,\r\n  IonInput,\r\n  IonItem,\r\n  IonLabel,\r\n  IonPage,\r\n  IonRow,\r\n  IonTextarea,\r\n  IonTitle,\r\n  IonToast,\r\n  IonToolbar,\r\n} from \"@ionic/react\";\r\nimport axios from \"axios\";\r\nimport { list } from \"ionicons/icons\";\r\nimport { Image } from \"../model/Image\";\r\nimport { distanceInKm } from \"./evaluateDistance\";\r\nimport { sortImageArray } from \"./sortImageArray\";\r\n\r\nexport function evaluateLocation(\r\n  range: number,\r\n  images: Image[],\r\n  lat: number,\r\n  long: number\r\n): Image[] {\r\n  let pictures: Image[] = [];\r\n  console.log(range);\r\n\r\n  images.forEach((image) => {\r\n    let distance: number = distanceInKm(\r\n      lat,\r\n      long,\r\n      image.location.coords.latitude,\r\n      image.location.coords.longitude\r\n    );\r\n    image.distance = distance;\r\n\r\n    if (distance <= range) {\r\n      pictures.push(image);\r\n    }\r\n  });\r\n\r\n  pictures = pictures.sort((a, b) => {\r\n    return sortImageArray(a, b);\r\n  });\r\n\r\n  console.log(pictures);\r\n\r\n  return pictures;\r\n}\r\n","import {\r\n  IonContent,\r\n  IonHeader,\r\n  IonPage,\r\n  IonTitle,\r\n  IonToolbar,\r\n  IonItem,\r\n  IonIcon,\r\n  IonLabel,\r\n  IonRefresher,\r\n  IonRefresherContent,\r\n  IonText,\r\n  IonPopover,\r\n  IonList,\r\n  IonListHeader,\r\n  IonRange,\r\n} from \"@ionic/react\";\r\nimport { Dispatch, SetStateAction, useEffect, useState } from \"react\";\r\nimport { GeolocationPosition, Plugins } from \"@capacitor/core\";\r\nimport { funnel } from \"ionicons/icons\";\r\nimport React from \"react\";\r\nimport { RefresherEventDetail } from \"@ionic/core\";\r\nimport { Image } from \"../../model/Image\";\r\nimport { db } from \"../../helper/firebase\";\r\nimport { sortImageArray } from \"../../hooks/sortImageArray\";\r\nimport { evaluateLocation } from \"../../hooks/evaluateLocation\";\r\nimport ExploreCard from \"../../components/ExploreCard/ExploreCard\";\r\n\r\nconst { Geolocation } = Plugins;\r\n\r\nconst Explore: React.FC<{ setLoading: Dispatch<SetStateAction<boolean>> }> = ({\r\n  setLoading,\r\n}) => {\r\n  // Geoinformation\r\n  const [location, setLocation] = useState<GeolocationPosition | undefined>();\r\n\r\n  //images to display\r\n  const [images, setImages] = useState<Array<Image>>([]);\r\n\r\n  //filter\r\n  const [filter, setFilter] = useState(15);\r\n\r\n  //popup\r\n  const [showPopup, setShowPopup] = useState<{\r\n    open: boolean;\r\n    event: Event | undefined;\r\n  }>({\r\n    open: false,\r\n    event: undefined,\r\n  });\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      // push location to state\r\n      setLocation(await Geolocation.getCurrentPosition());\r\n\r\n      console.log(\"Initial load...\");\r\n\r\n      fetchImages(filter).then((images) => setImages(images));\r\n    })();\r\n  }, []);\r\n\r\n  async function fetchImages(i?: number): Promise<Image[]> {\r\n    // fetch images from firebase\r\n    const ref = db.collection(\"images\");\r\n    const data = await ref.get();\r\n\r\n    // load images to typed docs\r\n    let t: Image[] = [];\r\n    data.docs.forEach((doc: any) => t.push(doc.data()));\r\n\r\n    // sort image array\r\n    t = t.sort((a, b) => {\r\n      return sortImageArray(a, b);\r\n    });\r\n\r\n    if (location !== undefined) {\r\n      if (i) {\r\n        t = evaluateLocation(\r\n          i,\r\n          t,\r\n          location.coords.latitude,\r\n          location.coords.longitude\r\n        );\r\n      } else {\r\n        t = evaluateLocation(\r\n          filter,\r\n          t,\r\n          location.coords.latitude,\r\n          location.coords.longitude\r\n        );\r\n      }\r\n    }\r\n\r\n    return t;\r\n  }\r\n\r\n  function doRefresh(event: CustomEvent<RefresherEventDetail>) {\r\n    console.log(\"Begin async operation\");\r\n\r\n    fetchImages(filter).then((images) => setImages(images));\r\n\r\n    setTimeout(() => {\r\n      console.log(\"Async operation has ended\");\r\n      event.detail.complete();\r\n    }, 2000);\r\n  }\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonTitle>Explore</IonTitle>\r\n          <IonText\r\n            style={{ marginRight: \"0.25rem\" }}\r\n            slot=\"end\"\r\n            onClick={(e) => setShowPopup({ open: true, event: e.nativeEvent })}\r\n          >\r\n            {filter} km\r\n          </IonText>\r\n          <IonIcon\r\n            style={{ margin: \"0.5rem\" }}\r\n            icon={funnel}\r\n            slot=\"end\"\r\n            onClick={(e) => setShowPopup({ open: true, event: e.nativeEvent })}\r\n          />\r\n          <IonPopover\r\n            isOpen={showPopup.open}\r\n            event={showPopup.event}\r\n            onDidDismiss={(e) =>\r\n              setShowPopup({ open: false, event: undefined })\r\n            }\r\n          >\r\n            <IonList>\r\n              <IonListHeader>Range Filter</IonListHeader>\r\n\r\n              <IonItem>\r\n                <IonRange\r\n                  min={0}\r\n                  max={30}\r\n                  snaps={true}\r\n                  step={1}\r\n                  pin={true}\r\n                  value={filter}\r\n                  onIonChange={(e) => {\r\n                    setFilter(e.detail.value as number);\r\n                    setLoading(true);\r\n                    fetchImages(e.detail.value as number)\r\n                      .then((images) => {\r\n                        setImages(images);\r\n                        setLoading(false);\r\n                      })\r\n                      .catch((e) => setLoading(false));\r\n                  }}\r\n                  onLostPointerCapture={(e) => {\r\n                    setShowPopup({ open: false, event: undefined });\r\n                  }}\r\n                >\r\n                  <IonLabel slot=\"start\">0</IonLabel>\r\n                  <IonLabel slot=\"end\">30</IonLabel>\r\n                </IonRange>\r\n              </IonItem>\r\n            </IonList>\r\n          </IonPopover>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n\r\n      <IonContent fullscreen>\r\n        <IonRefresher\r\n          slot=\"fixed\"\r\n          onIonRefresh={doRefresh}\r\n          pullFactor={0.5}\r\n          pullMin={100}\r\n          pullMax={200}\r\n        >\r\n          <IonRefresherContent></IonRefresherContent>\r\n        </IonRefresher>\r\n        <IonHeader collapse=\"condense\">\r\n          <IonToolbar>\r\n            <IonTitle size=\"large\">Explore</IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        {images.length > 0 &&\r\n          images.map((image, id) => {\r\n            return <ExploreCard key={id} image={image} setLoading={setLoading}/>;\r\n          })}\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Explore;\r\n","/* eslint-disable react/jsx-no-undef */\r\nimport {\r\n  IonButton,\r\n  IonCol,\r\n  IonContent,\r\n  IonGrid,\r\n  IonHeader,\r\n  IonIcon,\r\n  IonImg,\r\n  IonPage,\r\n  IonRow,\r\n  IonTitle,\r\n  IonToast,\r\n  IonToolbar,\r\n  isPlatform,\r\n} from \"@ionic/react\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport { Photo } from \"../../hooks/usePhotoGallery\";\r\nimport { base64FromPath } from \"@ionic/react-hooks/filesystem\";\r\nimport {\r\n  FilesystemDirectory,\r\n  FilesystemEncoding,\r\n  Plugins,\r\n} from \"@capacitor/core\";\r\nimport { GeogramPosition } from \"../../model/GeogramPosition\";\r\nimport axios from \"axios\";\r\nimport { db } from \"../../helper/firebase\";\r\nimport { Redirect } from \"react-router\";\r\nimport { UserContext } from \"../..\";\r\nimport {\r\n  arrowForward,\r\n  arrowForwardCircle,\r\n  arrowForwardCircleSharp,\r\n} from \"ionicons/icons\";\r\n\r\nconst { Filesystem } = Plugins;\r\n\r\nconst ProfilePic: React.FC<any> = (props) => {\r\n  const user = useContext(UserContext);\r\n\r\n  // image provided by props\r\n  const [image, setImage] = useState<Photo>();\r\n  const [oldImage, setOldImage] = useState<string>(\r\n    \"https://im-coder.com/images4/15590312779219.png\"\r\n  );\r\n\r\n  // Toast message\r\n  const [toast, setToast] = useState(\"\");\r\n\r\n  // Redirect\r\n  const [redirect, setRedirect] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (props.location.state !== undefined) {\r\n      setImage(props.location.state.image);\r\n    }\r\n\r\n    // get old picture from firebase and store it to state\r\n    db.collection(\"users\")\r\n      .doc(user?.uid)\r\n      .get()\r\n      .then((data) => {\r\n        if (data?.data()?.profilepic) {\r\n          setOldImage(data?.data()?.profilepic);\r\n        } else {\r\n          setOldImage(\"https://im-coder.com/images4/15590312779219.png\");\r\n        }\r\n      });\r\n\r\n    //disable set Loading\r\n    props.setLoading(false);\r\n  }, [props.location.state]);\r\n\r\n  const upload = async () => {\r\n    props.setLoading(true);\r\n\r\n    if (image !== undefined) {\r\n      if (image.webviewPath !== undefined) {\r\n        let file: any;\r\n        // get image data when on android or ios\r\n        if (isPlatform(\"android\") || isPlatform(\"ios\")) {\r\n          file = {\r\n            ...file,\r\n            data: (await base64FromPath(image.webviewPath!))\r\n              .toString()\r\n              .split(\",\")[1],\r\n          };\r\n        } else {\r\n          file = await Filesystem.readFile({\r\n            path: image.filepath,\r\n            directory: FilesystemDirectory.Data,\r\n            encoding: FilesystemEncoding.UTF8,\r\n          });\r\n        }\r\n\r\n        let res: any = await axios.post(\r\n          `${process.env.REACT_APP_IMAGE_SERVER_URL}/upload1`,\r\n          { data: file.data }\r\n        );\r\n\r\n        if (res.data.file !== undefined) {\r\n          db.collection(\"users\")\r\n            .doc(user?.uid)\r\n            .get()\r\n            .then((data) => {\r\n              db.collection(\"users\")\r\n                .doc(user?.uid)\r\n                .set(\r\n                  {\r\n                    ...data.data(),\r\n                    profilepic:\r\n                      `${process.env.REACT_APP_IMAGE_SERVER_URL}/` +\r\n                      res.data.file,\r\n                  },\r\n                  { merge: true }\r\n                )\r\n                .then((s) => {\r\n                  setToast(\"Successfully added item to firebase\");\r\n                  setTimeout(() => {\r\n                    setRedirect(\"profile\");\r\n                    props.setLoading(false);\r\n                  }, 100);\r\n                })\r\n                .catch((e) => {\r\n                  console.log(\"Error while changing profile picture\");\r\n                });\r\n            });\r\n        } else {\r\n          setToast(\r\n            \"Error while adding data to image server: \" +\r\n              process.env.REACT_APP_IMAGE_SERVER_URL\r\n          );\r\n        }\r\n      }\r\n\r\n      // wait for api\r\n      // cleanup of input fields\r\n    } else {\r\n      setToast(\"Error occured!\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonTitle>Upload</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent fullscreen>\r\n        <IonHeader collapse=\"condense\">\r\n          <IonToolbar>\r\n            <IonTitle size=\"large\">Upload</IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n\r\n        {/* Upload Form with image view */}\r\n        {image && (\r\n          <>\r\n            <IonGrid>\r\n              <IonRow>\r\n                <IonCol>\r\n                  <h1>Change Profile Picture</h1>\r\n                </IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol size=\"5\">\r\n                  <IonImg src={oldImage} />\r\n                </IonCol>\r\n                <IonCol\r\n                  size=\"2\"\r\n                  style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"center\",\r\n                    alignItems: \"center\",\r\n                  }}\r\n                >\r\n                  <IonIcon\r\n                    style={{ fontSize: \"3em\" }}\r\n                    icon={arrowForward}\r\n                  ></IonIcon>\r\n                </IonCol>\r\n                <IonCol size=\"5\">\r\n                  <IonImg src={image.webviewPath} />\r\n                </IonCol>\r\n              </IonRow>\r\n              <br />\r\n              <IonRow>\r\n                <IonCol size=\"2\" offset=\"4\">\r\n                  <IonButton\r\n                    expand=\"block\"\r\n                    shape=\"round\"\r\n                    fill=\"outline\"\r\n                    color=\"primary\"\r\n                    onClick={upload}\r\n                  >\r\n                    Submit\r\n                  </IonButton>\r\n                </IonCol>\r\n                <IonCol size=\"2\">\r\n                  <IonButton\r\n                    expand=\"block\"\r\n                    shape=\"round\"\r\n                    fill=\"outline\"\r\n                    color=\"danger\"\r\n                    onClick={() => {\r\n                      setOldImage(\r\n                        \"https://im-coder.com/images4/15590312779219.png\"\r\n                      );\r\n                      setImage(undefined);\r\n                      setRedirect(\"profile\");\r\n                    }}\r\n                  >\r\n                    Cancel\r\n                  </IonButton>\r\n                </IonCol>\r\n              </IonRow>\r\n            </IonGrid>\r\n          </>\r\n        )}\r\n\r\n        {/* Toast */}\r\n        <IonToast\r\n          isOpen={toast !== \"\"}\r\n          onDidDismiss={() => setToast(\"\")}\r\n          message={toast}\r\n          duration={1500}\r\n        />\r\n        {/* Redirect */}\r\n        {redirect !== \"\" && <Redirect to={`/${redirect}`}></Redirect>}\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default ProfilePic;\r\n","import { Redirect, Route } from \"react-router-dom\";\r\nimport React, { useContext, useState } from \"react\";\r\nimport Upload from \"./pages/Upload/Upload\";\r\nimport {\r\n  IonApp,\r\n  IonFab,\r\n  IonFabButton,\r\n  IonIcon,\r\n  IonLabel,\r\n  IonLoading,\r\n  IonRouterOutlet,\r\n  IonTabBar,\r\n  IonTabButton,\r\n  IonTabs,\r\n} from \"@ionic/react\";\r\nimport { IonReactRouter } from \"@ionic/react-router\";\r\nimport {\r\n  arrowForwardCircle,\r\n  cameraOutline,\r\n  cameraSharp,\r\n  ellipse,\r\n  square,\r\n  triangle,\r\n  personCircleOutline,\r\n  search,\r\n  home,\r\n  squareOutline,\r\n} from \"ionicons/icons\";\r\nimport Profile from \"./pages/Profile/Profile\";\r\n\r\n/* Core CSS required for Ionic components to work properly */\r\nimport \"@ionic/react/css/core.css\";\r\n\r\n/* Basic CSS for apps built with Ionic */\r\nimport \"@ionic/react/css/normalize.css\";\r\nimport \"@ionic/react/css/structure.css\";\r\nimport \"@ionic/react/css/typography.css\";\r\n\r\n/* Optional CSS utils that can be commented out */\r\nimport \"@ionic/react/css/padding.css\";\r\nimport \"@ionic/react/css/float-elements.css\";\r\nimport \"@ionic/react/css/text-alignment.css\";\r\nimport \"@ionic/react/css/text-transformation.css\";\r\nimport \"@ionic/react/css/flex-utils.css\";\r\nimport \"@ionic/react/css/display.css\";\r\n\r\n/* Theme variables */\r\nimport \"./theme/variables.css\";\r\n\r\nimport { UserContext } from \".\";\r\nimport UploadSelectionModal from \"./components/UploadSelectionModal/UploadSelectionModal\";\r\nimport Search from \"./pages/Search/Search\";\r\nimport Login from \"./pages/auth/Login\";\r\nimport Register from \"./pages/auth/Register\";\r\nimport Exploration from \"./pages/Exploration/Exploration\";\r\nimport ProfilePic from \"./pages/ProfilePic/ProfilePic\";\r\nimport LoadingPage from \"./pages/auth/LoadingPage\";\r\n\r\nconst PublicRoutes = () => {\r\n  return (\r\n    <IonReactRouter>\r\n      <Route path=\"/login\" component={Login} exact={true} />\r\n      <Route path=\"/register\" component={Register} exact={true} />\r\n      <Route path=\"/\" render={() => <Redirect to=\"/login\" />} />\r\n    </IonReactRouter>\r\n  );\r\n};\r\n\r\nconst PrivateRoutes = () => {\r\n  const [showActionSheet, setShowActionSheet] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  return (\r\n    <IonReactRouter>\r\n      <IonTabs>\r\n        <IonRouterOutlet>\r\n          <Route exact path=\"/explore\">\r\n            <Exploration setLoading={setLoading} />\r\n          </Route>\r\n          <Route exact path=\"/search\">\r\n            <Search />\r\n          </Route>\r\n          <Route path=\"/profile\">\r\n            <Profile setLoading={setLoading} />\r\n          </Route>\r\n          <Route exact path=\"/\">\r\n            <Redirect to=\"/explore\" />\r\n          </Route>\r\n\r\n          <Route\r\n            path=\"/upload\"\r\n            render={(props) => <Upload {...props} setLoading={setLoading} />}\r\n          />\r\n          <Route\r\n            path=\"/profile-pic\"\r\n            render={(props) => <ProfilePic {...props} setLoading={setLoading} />}\r\n          />\r\n\r\n          <Route exact path=\"/login\">\r\n            <Redirect to=\"/explore\" />\r\n          </Route>\r\n          <Route exact path=\"/register\">\r\n            <Redirect to=\"/explore\" />\r\n          </Route>\r\n        </IonRouterOutlet>\r\n        <IonTabBar slot=\"bottom\">\r\n          {/* Explore Tab - Benita */}\r\n          <IonTabButton tab=\"explore\" href=\"/explore\">\r\n            <IonIcon icon={home} />\r\n            <IonLabel>Explore</IonLabel>\r\n          </IonTabButton>\r\n          {/* Search Tab - Benita */}\r\n          <IonTabButton tab=\"search\" href=\"/search\">\r\n            <IonIcon icon={search} />\r\n            <IonLabel>Search</IonLabel>\r\n          </IonTabButton>\r\n          {/* Profile Tab - Jonas */}\r\n          <IonTabButton tab=\"profile\" href=\"/profile\">\r\n            <IonIcon icon={personCircleOutline} />\r\n            <IonLabel>Profile</IonLabel>\r\n          </IonTabButton>\r\n        </IonTabBar>\r\n      </IonTabs>\r\n\r\n      {/* Upload Component - Paul */}\r\n      {true && (\r\n        <>\r\n          <IonFab\r\n            style={{ marginBottom: \"4.5rem\", marginRight: \"0.5rem\" }}\r\n            vertical=\"bottom\"\r\n            horizontal=\"end\"\r\n            slot=\"fixed\"\r\n            onClick={() => {\r\n              setShowActionSheet(true);\r\n            }}\r\n          >\r\n            <IonFabButton>\r\n              <IonIcon md={cameraSharp} ios={cameraOutline} />\r\n            </IonFabButton>\r\n          </IonFab>\r\n          <UploadSelectionModal\r\n            active={showActionSheet}\r\n            setShowActionSheet={setShowActionSheet}\r\n            setLoading={setLoading}\r\n          />\r\n        </>\r\n      )}\r\n\r\n      <IonLoading\r\n        isOpen={loading}\r\n        onDidDismiss={() => setLoading(false)}\r\n        message={\"Please wait...\"}\r\n        duration={5000}\r\n      />\r\n    </IonReactRouter>\r\n  );\r\n};\r\n\r\nconst App: React.FC = () => {\r\n  const user = useContext(UserContext);\r\n    \r\n//   return !user ? (\r\n//    <IonApp>\r\n//      <LoadingPage />\r\n//      </IonApp>\r\n//  ) :(\r\n//  <IonApp>{user ? <PrivateRoutes /> : <PublicRoutes />}</IonApp>\r\n//  );\r\n   return <IonApp> {user ? <PrivateRoutes /> : <PublicRoutes />}</IonApp>;\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://cra.link/PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://cra.link/PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://cra.link/PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log('No internet connection found. App is running in offline mode.');\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then((registration) => {\r\n        registration.unregister();\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { defineCustomElements } from '@ionic/pwa-elements/loader';\r\nimport React, { createContext, useEffect, useState } from \"react\";\r\nimport firebase, { auth } from \"./helper/firebase\";\r\nimport LoadingPage from './pages/auth/LoadingPage';\r\ndefineCustomElements(window);\r\n\r\nexport const UserContext = createContext<firebase.User | null>(null);\r\n\r\nexport const UserProvider: React.FC = ({ children }) => {\r\n    const [user, setUser] = useState<firebase.User | null>(null);\r\n    \r\nuseEffect(() => {\r\n  \r\n    auth.onAuthStateChanged((userAuth) => setUser(userAuth));\r\n}, []);\r\n\r\nreturn  <UserContext.Provider value={user}> {children}    </UserContext.Provider>;\r\n};\r\n\r\n\r\nReactDOM.render(\r\n  <UserProvider>   \r\n    <App />\r\n  </UserProvider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://cra.link/PWA\r\nserviceWorkerRegistration.unregister();\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}