{"version":3,"sources":["../node_modules/@ionic/core/dist/esm-es5 lazy /^/.*/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object","../node_modules/@ionic/pwa-elements/dist/esm-es5 lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object","hooks/usePhotoGallery.ts","components/LocationMap/LocationMap.tsx","helper/firebase.ts","pages/Upload/Upload.tsx","components/ProfilePicSelectionModal/ProfilePicSelectionModal.tsx","pages/Profile/checkUsername.ts","pages/Profile/Profile.tsx","components/UploadSelectionModal/UploadSelectionModal.tsx","hooks/evaluateDistance.ts","components/ExploreCard/ExploreCard.tsx","pages/Search/Search.tsx","hooks/alert.ts","hooks/checkUsername.ts","hooks/login/signInWithUsernameAndPassword.ts","hooks/login/checkLogin.ts","pages/auth/Login.tsx","hooks/pw-check.ts","hooks/register/emailVerify.ts","hooks/register/register.ts","hooks/register/checkRegister.ts","pages/auth/Register.tsx","hooks/sortImageArray.ts","hooks/evaluateLocation.ts","pages/Exploration/Exploration.tsx","pages/ProfilePic/ProfilePic.tsx","App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","index.tsx"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","PHOTO_STORAGE","Plugins","Filesystem","usePhotoGallery","useState","photo","setPhoto","getPhoto","useCamera","useFilesystem","readFile","deleteFile","writeFile","useStorage","get","set","useEffect","takePhoto","a","resultType","CameraResultType","Uri","source","CameraSource","Camera","quality","cameraPhoto","fileName","Date","getTime","savePicture","savedFileImage","JSON","stringify","convertBlobToBase64","blob","reject","reader","FileReader","onerror","onload","result","readAsDataURL","takePhotoFromGalerie","Photos","isPlatform","path","file","base64Data","data","base64FromPath","webPath","directory","FilesystemDirectory","Data","savedFile","filepath","uri","webviewPath","Capacitor","convertFileSrc","LocationMap","location","MapContainer","center","coords","latitude","longitude","zoom","scrollWheelZoom","style","height","width","TileLayer","attribution","url","Marker","position","Popup","fb","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","firestore","auth","onAuthStateChanged","user","uid","localStorage","setItem","console","log","removeItem","Geolocation","Upload","props","useContext","UserContext","image","setImage","title","setTitle","description","setDescription","setLocation","setPosition","toast","setToast","redirect","setRedirect","undefined","state","getCurrentPosition","accuracy","altitude","altitudeAccuracy","heading","speed","timestamp","axios","res","results","formatted","setLoading","upload","now","toString","split","encoding","FilesystemEncoding","UTF8","post","process","collection","doc","item","imageId","uuidv4","username","email","setTimeout","catch","err","fullscreen","collapse","size","src","type","value","onIonChange","detail","expand","shape","fill","color","onClick","isOpen","onDidDismiss","message","duration","to","ProfilePicSelectionModal","active","setShowActionSheet","selectedRoute","setSelectedRoute","pathname","buttons","text","icon","cameraOutline","handler","imageOutline","closeOutline","checkUsername","userName","usernameCheck","typedDocs","docs","forEach","push","len","length","currentUsername","where","currentUser","querySnapshot","i","Profile","profileSelectionModal","setProfileSelectionModal","EditProfile","setEditProfile","setUsername","firstName","setFirstName","lastName","setLastName","setEmail","bio","setBio","showAlert","setShowAlert","verified","setVerified","profilepic","setProfilepic","errorUsernameLabel","setErrorUsernameLabel","errorUsernameText","setErrorUsernameText","isUsernameCorrect","errorEmailLabel","setErrorEmailLabel","errorEmailText","setErrorEmailText","setEmailCorrect","userFirstName","userLastName","biography","emailVerified","slot","textAlign","paddingLeft","fontSize","className","display","String","sendEmailVerification","cssClass","header","check","updateEmail","error","signOut","UploadSelectionModal","degreesToRadians","degrees","Math","PI","distanceInKm","lat1","lon1","lat2","lon2","dLat","dLon","sin","cos","atan2","sqrt","ExploreCard","pin","distance","slice","Search","filter","setFilter","images","setImages","showPopup","setShowPopup","popPic","setPopPic","fetchImages","ref","t","element","searchText","target","includes","showCancelButton","backgroundColor","p","objectFit","bottom","right","borderRadius","toPrecision","backdropDismiss","showBackdrop","presentAlert","alert","document","createElement","body","appendChild","present","role","presentAlertWithHeader","signInWithUsernameAndPassword","password","signInWithEmailAndPassword","checkLogin","PasswordCheckStrength","Login","setPassword","alertPasswordForgotenText","setalertPasswordForgotenText","onUsernameNameChange","useCallback","onPasswordChange","onLoginClick","class","logInOutline","routerLink","inputs","name","placeholder","sendPasswordResetEmail","emailPasswordForgoten","PasswordCheckService","commonPasswordPatterns","this","test","numberOfElements","Short","MinimumLength","isPasswordCommon","Common","Weak","Ok","Strong","sendEmailVerify","register","createUserWithEmailAndPassword","userCredential","checkRegister","confirmPassword","Register","setuserFirstName","setuserLastName","setConfirmPassword","setUserName","setAlertText","pwStrength","setpwStrength","checker","onEmailNameChange","checkPasswordStrength","onConfirmPasswordChange","onFirstNameChange","onLastNameChange","onUsernameChange","onSignUpClick","chevronBackOutline","personAddOutline","sortImageArray","b","evaluateLocation","range","lat","long","pictures","sort","Explore","open","event","marginRight","nativeEvent","margin","funnel","min","max","snaps","step","onLostPointerCapture","onIonRefresh","complete","pullFactor","pullMin","pullMax","ProfilePic","oldImage","setOldImage","merge","s","justifyContent","alignItems","arrowForward","offset","PublicRoutes","component","exact","render","PrivateRoutes","showActionSheet","loading","Exploration","tab","href","home","search","personCircleOutline","marginBottom","vertical","horizontal","md","cameraSharp","ios","App","Boolean","window","hostname","match","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","defineCustomElements","createContext","UserProvider","children","setUser","userAuth","Provider","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"qFAAA,IAAIA,EAAM,CACT,8BAA+B,CAC9B,IACA,GAED,uBAAwB,CACvB,IACA,GAED,uBAAwB,CACvB,IACA,GAED,0BAA2B,CAC1B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,sBAAuB,CACtB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,mCAAoC,CACnC,IACA,IAED,uBAAwB,CACvB,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,sBAAuB,CACtB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,gCAAiC,CAChC,IACA,KAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,KAIR,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B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","file":"static/js/main.7088ab83.chunk.js","sourcesContent":["var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t150,\n\t\t7\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t151,\n\t\t8\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t152,\n\t\t9\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t153,\n\t\t19\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t154,\n\t\t20\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t155,\n\t\t45\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t156,\n\t\t21\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t157,\n\t\t22\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t158,\n\t\t23\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t159,\n\t\t24\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t160,\n\t\t46\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t161,\n\t\t12\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t162,\n\t\t25\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t163,\n\t\t47\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t164,\n\t\t48\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t165,\n\t\t26\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t166,\n\t\t27\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t167,\n\t\t28\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t168,\n\t\t29\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t169,\n\t\t30\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t170,\n\t\t10\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t171,\n\t\t16\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t172,\n\t\t11\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t173,\n\t\t31\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t174,\n\t\t32\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t175,\n\t\t33\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t176,\n\t\t13\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t177,\n\t\t18\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t178,\n\t\t49\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t179,\n\t\t34\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t180,\n\t\t35\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t181,\n\t\t36\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t182,\n\t\t37\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t183,\n\t\t50\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t184,\n\t\t15\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t185,\n\t\t51\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t186,\n\t\t38\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t187,\n\t\t17\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t188,\n\t\t39\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t189,\n\t\t40\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t190,\n\t\t41\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t191,\n\t\t14\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t192,\n\t\t52\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 101;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t193,\n\t\t67\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 103;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./pwa-action-sheet.entry.js\": [\n\t\t197,\n\t\t59\n\t],\n\t\"./pwa-camera-modal-instance.entry.js\": [\n\t\t198,\n\t\t60\n\t],\n\t\"./pwa-camera-modal.entry.js\": [\n\t\t199,\n\t\t61\n\t],\n\t\"./pwa-camera.entry.js\": [\n\t\t200,\n\t\t62\n\t],\n\t\"./pwa-toast.entry.js\": [\n\t\t201,\n\t\t63\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 147;\nmodule.exports = webpackAsyncContext;","import { useState, useEffect } from \"react\";\r\nimport { useCamera } from '@ionic/react-hooks/camera';\r\nimport { useFilesystem, base64FromPath } from '@ionic/react-hooks/filesystem';\r\nimport { useStorage } from '@ionic/react-hooks/storage';\r\nimport { isPlatform } from '@ionic/react';\r\nimport { CameraResultType, CameraSource, CameraPhoto, Capacitor, FilesystemDirectory } from \"@capacitor/core\";\r\nimport { Plugins } from '@capacitor/core';\r\n\r\nconst { Filesystem } = Plugins;\r\n\r\nconst PHOTO_STORAGE = \"photos\";\r\n\r\nexport function usePhotoGallery() {\r\n\r\n  const [photo, setPhoto] = useState<Photo>();\r\n  const { getPhoto } = useCamera();\r\n  const { deleteFile, readFile, writeFile } = useFilesystem();\r\n  const { get, set } = useStorage();\r\n\r\n  useEffect(() => {\r\n\r\n\r\n  }, [get, readFile]);\r\n  \r\n\r\n  const takePhoto = async (): Promise<Photo> => {\r\n    // Access camera photo\r\n    const cameraPhoto = await getPhoto({\r\n      resultType: CameraResultType.Uri,\r\n      source: CameraSource.Camera,\r\n      quality: 25\r\n    });\r\n    // Create filename based on date\r\n    const fileName = new Date().getTime() + '.jpeg';\r\n    // Save image\r\n    const savedFileImage = await savePicture(cameraPhoto, fileName);\r\n    // Set image into state\r\n    setPhoto(savedFileImage);\r\n    // Store Image to storage\r\n    set(PHOTO_STORAGE, JSON.stringify(savedFileImage));\r\n    // return result\r\n    return savedFileImage;\r\n  };\r\n\r\n  const convertBlobToBase64 = async(blob: Blob): Promise<string>  => {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.onerror = reject;\r\n      reader.onload = () => resolve(reader.result as string);\r\n      reader.readAsDataURL(blob);\r\n    });\r\n  }\r\n\r\n  const takePhotoFromGalerie = async(): Promise<Photo> => {\r\n      // Access galerie photo\r\n      const cameraPhoto = await getPhoto({\r\n        resultType: CameraResultType.Uri,\r\n        source: CameraSource.Photos,\r\n        quality: 25\r\n      });\r\n      // Create filename based on date\r\n      const fileName = new Date().getTime() + '.jpeg';\r\n      // Save image\r\n      const savedFileImage = await savePicture(cameraPhoto, fileName);\r\n      // Set image into state\r\n      setPhoto(savedFileImage);\r\n      // Store Image to storage\r\n      set(PHOTO_STORAGE, JSON.stringify(savedFileImage));\r\n      // return result\r\n      return savedFileImage;\r\n  }\r\n\r\n  const savePicture = async (photo: CameraPhoto, fileName: string): Promise<Photo> => {\r\n    let base64Data: string;\r\n    // \"hybrid\" will detect Cordova or Capacitor;\r\n    if (isPlatform('hybrid')) {\r\n      const file = await readFile({\r\n        path: photo.path!\r\n      });\r\n      base64Data = file.data;\r\n    } else {\r\n      base64Data = await base64FromPath(photo.webPath!);\r\n    }\r\n    const savedFile = await writeFile({\r\n      path: fileName,\r\n      data: base64Data,\r\n      directory: FilesystemDirectory.Data\r\n    });\r\n\r\n    if (isPlatform('hybrid')) {\r\n      // Display the new image by rewriting the 'file://' path to HTTP\r\n      // Details: https://ionicframework.com/docs/building/webview#file-protocol\r\n      return {\r\n        filepath: savedFile.uri,\r\n        webviewPath: Capacitor.convertFileSrc(savedFile.uri), \r\n      };\r\n    }\r\n    else {\r\n      // Use webPath to display the new image instead of base64 since it's \r\n      // already loaded into memory\r\n      return {\r\n        filepath: fileName,\r\n        webviewPath: photo.webPath,\r\n        data: base64Data\r\n      };\r\n    }\r\n  };\r\n\r\n\r\n  // const download = async(path:string) => {\r\n  //   const base64Data = await _readAsBase64(path);\r\n  //   const fileName = `${new Date().getTime()}.jpeg`;\r\n  //   // const image = await Filesystem.writeFile({\r\n  //   //   path: fileName,\r\n  //   //   data: base64Data,\r\n  //   //   directory: FilesystemDirectory.Documents\r\n  //   // });\r\n  //   return base64Data;\r\n  // }\r\n  // const _readAsBase64 = async(url: string): Promise<string> => {\r\n  //   const response = await fetch(url);\r\n  //   const blob = await response.blob();\r\n  //   return await _convertBlobToBase64(blob);\r\n  // }\r\n  // const _convertBlobToBase64 = async(blob: Blob): Promise<string> => {\r\n  //   return new Promise((resolve, reject) => {\r\n  //     const reader = new FileReader();\r\n  //     reader.onerror = () => reject();\r\n  //     reader.onload = () => resolve(reader.result as string);\r\n  //     reader.readAsDataURL(blob);\r\n  //   });\r\n  // }\r\n\r\n  return {\r\n    photo,\r\n    takePhoto,\r\n    takePhotoFromGalerie,\r\n    convertBlobToBase64\r\n  };\r\n}\r\n\r\nexport interface Photo {\r\n  filepath: string;\r\n  webviewPath?: string;\r\n  data?: string;\r\n}","import React, { Dispatch, SetStateAction, useEffect, useState } from \"react\";\r\nimport {MapContainer, TileLayer, Marker, Popup} from \"react-leaflet\";\r\nimport { GeogramPosition } from \"../../model/GeogramPosition\";\r\nimport 'leaflet/dist/leaflet.css';\r\nimport './LocationMap.css'\r\n\r\nconst LocationMap: React.FC<{location: GeogramPosition}> = ({location}) => {\r\n\r\n  return (\r\n    <MapContainer center={[location.coords.latitude, location.coords.longitude]} zoom={13} scrollWheelZoom={false} style={{height: \"20vh\", width: \"100vh\"}}>\r\n    <TileLayer\r\n      attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n      url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n    />\r\n    <Marker position={[location.coords.latitude, location.coords.longitude]}>\r\n      <Popup>\r\n        Current Position.\r\n      </Popup>\r\n    </Marker>\r\n  </MapContainer>\r\n    );\r\n};\r\n\r\nexport default LocationMap;\r\n","import firebase from \"firebase\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyCuOUn1kd_QKs91UYx2Pv015QYAwNfpkWg\",\r\n    authDomain: \"geogram-4906f.firebaseapp.com\",\r\n    projectId: \"geogram-4906f\",\r\n    storageBucket: \"geogram-4906f.appspot.com\",\r\n    messagingSenderId: \"293875577588\",\r\n    appId: \"1:293875577588:web:d286bacade6e4850bfa4a1\"\r\n};\r\n// Configure\r\nlet fb = firebase.initializeApp(firebaseConfig);\r\nlet db = fb.firestore();\r\n\r\n// AUTH //\r\nexport const auth = fb.auth();\r\n\r\nexport default firebase;\r\n\r\n\r\n// [START auth_state_listener]\r\nauth.onAuthStateChanged((user: any) => {\r\n    if (user) {\r\n        var uid: any = user.uid;\r\n        localStorage.setItem(\"uid\", uid);\r\n        console.log(\"RES:\",auth)\r\n    } else {\r\n        localStorage.removeItem(\"uid\");\r\n    }\r\n});\r\n// [END auth_state_listener]\r\n\r\n\r\nexport { db, fb };\r\n\r\n","/* eslint-disable react/jsx-no-undef */\r\nimport {\r\n  IonButton,\r\n  IonCol,\r\n  IonContent,\r\n  IonFab,\r\n  IonFabButton,\r\n  IonGrid,\r\n  IonHeader,\r\n  IonIcon,\r\n  IonImg,\r\n  IonInput,\r\n  IonItem,\r\n  IonLabel,\r\n  IonPage,\r\n  IonRow,\r\n  IonTextarea,\r\n  IonTitle,\r\n  IonToast,\r\n  IonToolbar,\r\n  isPlatform,\r\n} from \"@ionic/react\";\r\nimport { useCamera } from \"@ionic/react-hooks/camera\";\r\nimport { camera } from \"ionicons/icons\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport { Photo, usePhotoGallery } from \"../../hooks/usePhotoGallery\";\r\nimport { useFilesystem, base64FromPath } from \"@ionic/react-hooks/filesystem\";\r\nimport {\r\n  FilesystemDirectory,\r\n  FilesystemEncoding,\r\n  Plugins,\r\n} from \"@capacitor/core\";\r\nimport { GeogramPosition } from \"../../model/GeogramPosition\";\r\nimport LocationMap from \"../../components/LocationMap/LocationMap\";\r\nimport axios from \"axios\";\r\nimport { db } from \"../../helper/firebase\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { Redirect } from \"react-router\";\r\nimport { useStorage } from \"@ionic/react-hooks/storage\";\r\nimport { UserContext } from \"../..\";\r\n\r\nconst { Geolocation, Filesystem } = Plugins;\r\n\r\nconst Upload: React.FC<any> = (props) => {\r\n  const user = useContext(UserContext);\r\n\r\n  const { get } = useStorage();\r\n  const { deleteFile, readFile, writeFile } = useFilesystem();\r\n  const { convertBlobToBase64 } = usePhotoGallery();\r\n\r\n  // image provided by props\r\n  const [image, setImage] = useState<Photo>();\r\n\r\n  // Form data\r\n  const [title, setTitle] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n\r\n  // Geoinformation\r\n  const [location, setLocation] = useState<GeogramPosition>();\r\n  const [position, setPosition] = useState(\"\");\r\n\r\n  // Toast message\r\n  const [toast, setToast] = useState(\"\");\r\n\r\n  // Redirect\r\n  const [redirect, setRedirect] = useState(\"\");\r\n\r\n  // Debug\r\n  const [log, setLog] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (props.location.state !== undefined) {\r\n      setImage(props.location.state.image);\r\n    }\r\n\r\n    // get current geolocation\r\n    Geolocation.getCurrentPosition().then((location) => {\r\n      setLocation({\r\n        coords: {\r\n          accuracy: location.coords.accuracy,\r\n          altitude: location.coords.altitude,\r\n          altitudeAccuracy: location.coords.altitudeAccuracy,\r\n          heading: location.coords.heading,\r\n          latitude: location.coords.latitude,\r\n          longitude: location.coords.longitude,\r\n          speed: location.coords.speed,\r\n        },\r\n        timestamp: location.timestamp,\r\n      });\r\n      // reverse geolocating\r\n      axios\r\n        .get(\r\n          `https://api.opencagedata.com/geocode/v1/json?q=${location?.coords.latitude}+${location?.coords.longitude}&key=bb44e70b618844faba7cb23b580419e0`\r\n        )\r\n        .then((res) => {\r\n          setPosition(res.data.results[0].formatted);\r\n          setLocation((state: any) => {\r\n            return {\r\n              ...state,\r\n              position: res.data.results[0].formatted,\r\n            };\r\n          });\r\n        });\r\n    });\r\n\r\n    //disable set Loading\r\n    props.setLoading(false);\r\n  }, [props.location.state]);\r\n\r\n  const upload = async () => {\r\n    props.setLoading(true);\r\n\r\n    if (location === undefined) {\r\n      setLocation({\r\n        coords: {\r\n          accuracy: 0,\r\n          altitude: 0,\r\n          altitudeAccuracy: 0,\r\n          heading: 0,\r\n          latitude: 0,\r\n          longitude: 0,\r\n          speed: 0,\r\n        },\r\n        timestamp: Date.now(),\r\n      });\r\n    }\r\n\r\n    if (title !== \"\" && description !== \"\" && image !== undefined) {\r\n      if (image.webviewPath !== undefined) {\r\n        let file: any;\r\n        // get image data when on android or ios\r\n        if (isPlatform(\"android\") || isPlatform(\"ios\")) {\r\n          file = {\r\n            ...file,\r\n            data: (await base64FromPath(image.webviewPath!))\r\n              .toString()\r\n              .split(\",\")[1],\r\n          };\r\n        } else {\r\n          file = await Filesystem.readFile({\r\n            path: image.filepath,\r\n            directory: FilesystemDirectory.Data,\r\n            encoding: FilesystemEncoding.UTF8,\r\n          });\r\n        }\r\n\r\n        let res: any = await axios.post(\r\n          `${process.env.REACT_APP_IMAGE_SERVER_URL}/upload1`,\r\n          { data: file.data }\r\n        );\r\n\r\n        if (res.data.file !== undefined) {\r\n          db.collection(\"users\")\r\n            .doc(user?.uid)\r\n            .get()\r\n            .then((item) => {\r\n              let imageId: string = uuidv4();\r\n\r\n              db.collection(\"images\")\r\n                .doc(imageId)\r\n                .set({\r\n                  id: imageId,\r\n                  timestamp: Date.now(),\r\n                  user: item.data()?.username || user?.email,\r\n                  location: location,\r\n                  url: `${process.env.REACT_APP_IMAGE_SERVER_URL}/${res.data.file}`,\r\n                  title: title,\r\n                  description: description,\r\n                })\r\n                .then((res) => {\r\n                  setToast(\"Successfully added item to firebase\");\r\n\r\n                  // Set back everything\r\n                  setTitle(\"\");\r\n                  setDescription(\"\");\r\n                  setImage(undefined);\r\n                  setLocation(undefined);\r\n\r\n                  setTimeout(() => {\r\n                    setRedirect(\"explore\");\r\n                    props.setLoading(false);\r\n                  }, 1000);\r\n                })\r\n                .catch((err) =>\r\n                  setToast(\"Error while adding data to firebase\")\r\n                );\r\n            });\r\n        } else {\r\n          setToast(\r\n            \"Error while adding data to image server: \" +\r\n              process.env.REACT_APP_IMAGE_SERVER_URL\r\n          );\r\n        }\r\n      }\r\n\r\n      // wait for api\r\n      // cleanup of input fields\r\n    } else {\r\n      if (title === \"\") {\r\n        setToast(\"Please fill out the title field!\");\r\n      } else if (description === \"\") {\r\n        setToast(\"Please fill out the description field!\");\r\n      } else {\r\n        setToast(\"Error occured!\");\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonTitle>Upload</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent fullscreen>\r\n        <IonHeader collapse=\"condense\">\r\n          <IonToolbar>\r\n            <IonTitle size=\"large\">Upload</IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n\r\n        {/* Upload Form with image view */}\r\n        {image && (\r\n          <>\r\n            <IonImg src={image.webviewPath} />\r\n            <IonGrid>\r\n              <IonRow>\r\n                <IonCol size=\"12\">\r\n                  <IonItem>\r\n                    <IonLabel position=\"floating\">Title</IonLabel>\r\n                    <IonInput\r\n                      type=\"text\"\r\n                      value={title}\r\n                      onIonChange={(e) => {\r\n                        setTitle(e.detail.value!);\r\n                      }}\r\n                    />\r\n                  </IonItem>\r\n                </IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol size=\"12\">\r\n                  <IonItem>\r\n                    <IonLabel position=\"floating\">Description</IonLabel>\r\n                    <IonTextarea\r\n                      value={description}\r\n                      onIonChange={(e) => {\r\n                        setDescription(e.detail.value!);\r\n                      }}\r\n                    />\r\n                  </IonItem>\r\n                </IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol size=\"12\">\r\n                  Current Position: Latitude:{\" \"}\r\n                  {location?.coords.latitude.toString()}, Longitude:{\" \"}\r\n                  {location?.coords.longitude.toString()}\r\n                </IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol size=\"12\">City: {position}</IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol size=\"12\">\r\n                  {location && <LocationMap location={location} />}\r\n                </IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol>\r\n                  <IonButton\r\n                    expand=\"block\"\r\n                    shape=\"round\"\r\n                    fill=\"outline\"\r\n                    color=\"primary\"\r\n                    onClick={upload}\r\n                  >\r\n                    Submit\r\n                  </IonButton>\r\n                </IonCol>\r\n                <IonCol>\r\n                  <IonButton\r\n                    expand=\"block\"\r\n                    shape=\"round\"\r\n                    fill=\"outline\"\r\n                    color=\"danger\"\r\n                    onClick={() => {\r\n\r\n                      // Set back everything\r\n                      setTitle(\"\");\r\n                      setDescription(\"\");\r\n                      setImage(undefined);\r\n                      setLocation(undefined);\r\n                      setRedirect(\"explore\");\r\n                      \r\n                    }}\r\n                  >\r\n                    Cancel\r\n                  </IonButton>\r\n                </IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol size=\"12\">\r\n                  <IonItem>\r\n                    <IonLabel position=\"floating\">Log</IonLabel>\r\n                    <IonTextarea value={log} />\r\n                  </IonItem>\r\n                </IonCol>\r\n              </IonRow>\r\n            </IonGrid>\r\n          </>\r\n        )}\r\n\r\n        {/* Toast */}\r\n        <IonToast\r\n          isOpen={toast !== \"\"}\r\n          onDidDismiss={() => setToast(\"\")}\r\n          message={toast}\r\n          duration={1500}\r\n        />\r\n        {/* Redirect */}\r\n        {redirect !== \"\" && <Redirect to={`/${redirect}`}></Redirect>}\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Upload;\r\n","import {\r\n  IonActionSheet\r\n} from \"@ionic/react\";\r\nimport { cameraOutline, closeOutline, imageOutline } from \"ionicons/icons\";\r\nimport React, { Dispatch, SetStateAction, useState } from \"react\";\r\nimport { Redirect } from \"react-router\";\r\nimport { Photo, usePhotoGallery } from \"../../hooks/usePhotoGallery\";\r\n\r\n\r\nconst ProfilePicSelectionModal: React.FC<{active: boolean, setShowActionSheet: Dispatch<SetStateAction<boolean>>, setLoading: Dispatch<SetStateAction<boolean>>}> = ({active, setShowActionSheet, setLoading}) => {\r\n\r\n  const [selectedRoute, setSelectedRoute] = useState(\"\");\r\n  const [image, setImage] = useState<Photo>();\r\n  \r\n  const { takePhoto, takePhotoFromGalerie } = usePhotoGallery();\r\n\r\n  return (\r\n      <>\r\n\r\n        {\r\n            selectedRoute === \"profile-pic\" && <Redirect to={{\r\n                pathname: \"/profile-pic\",\r\n                state: { image }\r\n            }}/>\r\n        }\r\n\r\n        <IonActionSheet\r\n            isOpen={active}\r\n            onDidDismiss={() => setShowActionSheet(false)}\r\n            buttons={[\r\n            {\r\n                text: \"Camera\",\r\n                icon: cameraOutline,\r\n                handler: () => {\r\n                    takePhoto()\r\n                    .then(image => {\r\n                        // User took image\r\n                        setLoading(true);\r\n                        setImage(image);\r\n                        setSelectedRoute(\"profile-pic\")\r\n                    })\r\n                    .catch(err => {\r\n                        // User Aborted Camera\r\n                        console.log(err)\r\n                    })\r\n                },\r\n            },\r\n            {\r\n                text: \"Galerie\",\r\n                icon: imageOutline,\r\n                handler: () => {\r\n                    takePhotoFromGalerie()\r\n                    .then(image => {\r\n                        setLoading(true)\r\n                        setImage(image);\r\n                        setSelectedRoute(\"profile-pic\");\r\n                    })\r\n                },\r\n            },\r\n            {\r\n                text: \"Close\",\r\n                icon: closeOutline,\r\n                handler: () => {\r\n                setShowActionSheet(false)\r\n                },\r\n            }\r\n            ]}\r\n        ></IonActionSheet>\r\n      </>\r\n  );\r\n};\r\n\r\nexport default ProfilePicSelectionModal;\r\n","import { auth, db } from \"../../helper/firebase\";\r\nimport { User } from \"../../model/User\";\r\n\r\n//Check Username\r\nexport async function checkUsername(userName: any): Promise<boolean> {\r\n   \r\n  var usernameCheck = db.collection(\"users\");\r\n\r\n  const data = await usernameCheck.get();\r\n  let typedDocs: User[] = [];\r\n  data.docs.forEach((doc: any) => typedDocs.push(doc.data().username));\r\n  var len = typedDocs.length;\r\n  let currentUsername:string = \"\";\r\n\r\n  await db.collection(\"users\")\r\n                  .where(\"email\", \"==\", auth.currentUser?.email)\r\n                  .get()\r\n                  .then((querySnapshot) => {\r\n                    querySnapshot.forEach((doc) => {\r\n                      currentUsername = doc.data().username;\r\n                    })\r\n                  });\r\n \r\n  for (var i = 0; i < len; i++) {\r\n    if ((typedDocs[i] === userName && !(currentUsername == userName)) || userName == \"\") {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\n","import {\r\n  IonContent,\r\n  IonHeader,\r\n  IonPage,\r\n  IonTitle,\r\n  IonToolbar,\r\n  IonItem,\r\n  IonAvatar,\r\n  IonImg,\r\n  IonLabel,\r\n  IonGrid,\r\n  IonRow,\r\n  IonCol,\r\n  IonButton,\r\n  IonModal,\r\n  IonButtons,\r\n  IonInput,\r\n  IonTextarea,\r\n  IonAlert,\r\n} from \"@ionic/react\";\r\nimport React, { Dispatch, SetStateAction, useContext, useEffect, useState } from \"react\";\r\nimport ProfilePicSelectionModal from \"../../components/ProfilePicSelectionModal/ProfilePicSelectionModal\";\r\nimport { auth, db } from \"../../helper/firebase\";\r\nimport { checkUsername } from \"./checkUsername\";\r\n\r\nconst Profile: React.FC<{ setLoading: Dispatch<SetStateAction<boolean>> }> = ({setLoading}) => {\r\n\r\n  // modal to change profile picture\r\n  const [profileSelectionModal, setProfileSelectionModal] = useState(false);\r\n\r\n  const [EditProfile, setEditProfile] = useState<boolean>(false);\r\n  const [username, setUsername] = useState<string>();\r\n  const [firstName, setFirstName] = useState<string>();\r\n  const [lastName, setLastName] = useState<string>();\r\n  const [email, setEmail] = useState<string>();\r\n  const [bio, setBio] = useState<string>();\r\n  const [showAlert, setShowAlert] = useState<boolean>(false);\r\n  const [verified, setVerified] = useState<string>(\"\");\r\n  const [profilepic, setProfilepic] = useState(undefined)\r\n\r\n  const [errorUsernameLabel, setErrorUsernameLabel] = useState<string>(\"\");\r\n  const [errorUsernameText, setErrorUsernameText] = useState<string>(\"\");\r\n\r\n  //const [isUsernameCorrect, setUsernameCorrect] = useState<boolean>(true);\r\n  let isUsernameCorrect: boolean = true;\r\n\r\n  const [errorEmailLabel, setErrorEmailLabel] = useState<string>(\"\");\r\n  const [errorEmailText, setErrorEmailText] = useState<string>(\"\");\r\n\r\n  const [isEmailCorrect, setEmailCorrect] = useState<boolean>(true);\r\n\r\n  useEffect(() => {\r\n    db.collection(\"users\")\r\n      .where(\"email\", \"==\", auth.currentUser?.email)\r\n      .get()\r\n      .then((querySnapshot) => {\r\n        querySnapshot.forEach((doc) => {\r\n          setProfilepic(doc.data().profilepic);\r\n          setUsername(doc.data().username);\r\n          setEmail(doc.data().email);\r\n          setFirstName(doc.data().userFirstName);\r\n          setLastName(doc.data().userLastName);\r\n          setBio(doc.data().biography);\r\n\r\n        });\r\n      });\r\n  }, [EditProfile]);\r\n\r\n  useEffect(() => {\r\n    if (auth.currentUser?.emailVerified) {\r\n      setVerified(\"none\");\r\n    } else {\r\n      setVerified(\"\");\r\n    }\r\n  });\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonTitle>Profile</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent fullscreen>\r\n        <IonGrid>\r\n          <IonRow>\r\n            <IonCol>\r\n              <IonItem>\r\n                <IonAvatar\r\n                  slot=\"start\"\r\n                  style={{ height: \"100px\", width: \"100px\" }}\r\n                  onClick={() => {\r\n                    setProfileSelectionModal(true);\r\n                  }}\r\n                >\r\n                  <IonImg src={ profilepic ? profilepic : \"https://im-coder.com/images4/15590312779219.png\" } />\r\n                </IonAvatar>\r\n\r\n                <ProfilePicSelectionModal\r\n                  active={profileSelectionModal}\r\n                  setShowActionSheet={setProfileSelectionModal}\r\n                  setLoading={setLoading}\r\n                />\r\n\r\n                <IonGrid>\r\n                  <IonRow>\r\n                    <IonCol style={{ textAlign: \"center\" }}>14</IonCol>\r\n                    <IonCol style={{ textAlign: \"center\" }}>3</IonCol>\r\n                  </IonRow>\r\n                  <IonRow>\r\n                    <IonCol style={{ textAlign: \"center\" }}>Likes</IonCol>\r\n                    <IonCol style={{ textAlign: \"center\" }}>Beiträge</IonCol>\r\n                  </IonRow>\r\n                </IonGrid>\r\n              </IonItem>\r\n            </IonCol>\r\n          </IonRow>\r\n          <IonRow>\r\n            <IonCol>\r\n              <IonItem>\r\n                <IonGrid style={{ paddingLeft: \"0px\" }}>\r\n                  <IonRow>\r\n                    <IonCol>\r\n                      <IonLabel style={{ fontSize: \"20px\" }}>\r\n                        {username}\r\n                      </IonLabel>\r\n                    </IonCol>\r\n                  </IonRow>\r\n                  <IonRow>\r\n                    <IonCol>\r\n                      <IonLabel\r\n                        className=\"ion-text-wrap\"\r\n                        style={{ fontSize: \"15px\" }}\r\n                      >\r\n                        {bio}\r\n                      </IonLabel>\r\n                    </IonCol>\r\n                  </IonRow>\r\n                </IonGrid>\r\n              </IonItem>\r\n            </IonCol>\r\n          </IonRow>\r\n          <IonRow>\r\n            <IonCol style={{ textAlign: \"center\" }}>\r\n              <IonButton\r\n                shape=\"round\"\r\n                fill=\"outline\"\r\n                color=\"primary\"\r\n                onClick={() => setEditProfile(true)}\r\n              >\r\n                Edit Profile\r\n              </IonButton>\r\n            </IonCol>\r\n            <IonCol style={{ textAlign: \"center\", display: String(verified) }}>\r\n              <IonButton\r\n                shape=\"round\"\r\n                fill=\"outline\"\r\n                color=\"danger\"\r\n                onClick={async () => {\r\n                  setShowAlert(true);\r\n                  await auth.currentUser?.sendEmailVerification();\r\n                }}\r\n              >\r\n                Verify Email\r\n              </IonButton>\r\n            </IonCol>\r\n          </IonRow>\r\n        </IonGrid>\r\n        <IonAlert\r\n          isOpen={showAlert}\r\n          onDidDismiss={() => setShowAlert(false)}\r\n          cssClass=\"my-custom-class\"\r\n          header={\"Verify E-Mail\"}\r\n          message={\"Email was sent to you to verify your email.\"}\r\n          buttons={[\"OK\"]}\r\n        />\r\n        <IonModal isOpen={EditProfile}>\r\n          <IonHeader>\r\n            <IonToolbar>\r\n              <IonButtons slot=\"end\">\r\n                <IonButton\r\n                  color=\"primary\"\r\n                  onClick={() => {\r\n                    setEditProfile(false);\r\n                    setErrorEmailLabel(\"\");\r\n                    setErrorEmailText(\"\");\r\n                    setErrorUsernameLabel(\"\");\r\n                    setErrorUsernameText(\"\");\r\n                  }}\r\n                >\r\n                  Close\r\n                </IonButton>\r\n              </IonButtons>\r\n              <IonTitle>Edit Profile</IonTitle>\r\n            </IonToolbar>\r\n          </IonHeader>\r\n          <IonContent fullscreen>\r\n            <IonItem>\r\n              <IonLabel color={errorUsernameLabel} position=\"floating\">\r\n                Username\r\n              </IonLabel>\r\n              <IonInput\r\n                color={errorUsernameText}\r\n                value={username}\r\n                type=\"text\"\r\n                onIonChange={async (e) => setUsername(e.detail.value!)}\r\n              ></IonInput>\r\n            </IonItem>\r\n            <IonItem>\r\n              <IonLabel position=\"floating\">First Name</IonLabel>\r\n              <IonInput\r\n                value={firstName}\r\n                type=\"text\"\r\n                onIonChange={(e) => setFirstName(e.detail.value!)}\r\n              ></IonInput>\r\n            </IonItem>\r\n            <IonItem>\r\n              <IonLabel position=\"floating\">Last Name</IonLabel>\r\n              <IonInput\r\n                value={lastName}\r\n                type=\"text\"\r\n                onIonChange={(e) => setLastName(e.detail.value!)}\r\n              ></IonInput>\r\n            </IonItem>\r\n            <IonItem>\r\n              <IonLabel color={errorEmailLabel} position=\"floating\">\r\n                E-Mail\r\n              </IonLabel>\r\n              <IonInput\r\n                color={errorEmailText}\r\n                value={email}\r\n                type=\"email\"\r\n                onIonChange={(e) => setEmail(e.detail.value!)}\r\n              ></IonInput>\r\n            </IonItem>\r\n            <IonItem>\r\n              <IonLabel position=\"stacked\">Biography</IonLabel>\r\n              <IonTextarea\r\n                value={bio}\r\n                onIonChange={(e) => setBio(e.detail.value!)}\r\n              ></IonTextarea>\r\n            </IonItem>\r\n            <IonGrid>\r\n              <IonRow>\r\n                <IonCol style={{ textAlign: \"center\" }}>\r\n                  <IonButton\r\n                    expand=\"block\"\r\n                    shape=\"round\"\r\n                    fill=\"outline\"\r\n                    color=\"primary\"\r\n                    onClick={() => {\r\n                      setEditProfile(false);\r\n                      setErrorEmailLabel(\"\");\r\n                      setErrorEmailText(\"\");\r\n                      setErrorUsernameLabel(\"\");\r\n                      setErrorUsernameText(\"\");\r\n                    }}\r\n                  >\r\n                    Cancel\r\n                  </IonButton>\r\n                </IonCol>\r\n                <IonCol style={{ textAlign: \"center\" }}>\r\n                  <IonButton\r\n                    expand=\"block\"\r\n                    shape=\"round\"\r\n                    fill=\"outline\"\r\n                    color=\"primary\"\r\n                    onClick={async () => {\r\n                      isUsernameCorrect = true;\r\n                      setEmailCorrect(true);\r\n\r\n                      const data = {\r\n                        username: username,\r\n                        userFirstName: firstName,\r\n                        userLastName: lastName,\r\n                        email: email,\r\n                        biography: bio,\r\n                      };\r\n\r\n                      await checkUsername(username)\r\n                        .then(async (check) => {\r\n                          if (check) {\r\n                            setErrorUsernameLabel(\"danger\");\r\n                            setErrorUsernameText(\"danger\");\r\n                            isUsernameCorrect = false;\r\n                          } else {\r\n                            setErrorUsernameLabel(\"\");\r\n                            setErrorUsernameText(\"\");\r\n                            isUsernameCorrect = true;\r\n                          }\r\n                        })\r\n                        .then(async () => {\r\n                          if (email != auth.currentUser?.email) {\r\n                            await auth.currentUser\r\n                              ?.updateEmail(String(email))\r\n                              .then(async function () {\r\n                                console.log(\"Email-Update successfull!\");\r\n                                setEmailCorrect(true);\r\n                                await auth.currentUser\r\n                                  ?.sendEmailVerification()\r\n                                  .then(async function () {\r\n                                    console.log(\"Send Email successfull!\");\r\n                                    setErrorEmailLabel(\"\");\r\n                                    setErrorEmailText(\"\");\r\n                                    if (isUsernameCorrect) {\r\n                                      setErrorUsernameLabel(\"\");\r\n                                      setErrorUsernameText(\"\");\r\n                                      await db\r\n                                        .collection(\"users\")\r\n                                        .doc(auth.currentUser?.uid)\r\n                                        .set(data);\r\n                                      setEditProfile(false);\r\n                                    }\r\n                                  })\r\n                                  .catch(function (error) {\r\n                                    console.log(\"Send Email ERROR!\");\r\n                                  });\r\n                              })\r\n                              .catch(function (error) {\r\n                                console.log(\"Email-Update ERROR!\");\r\n                                setErrorEmailLabel(\"danger\");\r\n                                setErrorEmailText(\"danger\");\r\n                                setEmailCorrect(false);\r\n                              });\r\n                          } else if (isUsernameCorrect) {\r\n                            setErrorUsernameLabel(\"\");\r\n                            setErrorUsernameText(\"\");\r\n                            setErrorEmailLabel(\"\");\r\n                            setErrorEmailText(\"\");\r\n                            await db\r\n                              .collection(\"users\")\r\n                              .doc(auth.currentUser?.uid)\r\n                              .set(data);\r\n                            setEditProfile(false);\r\n                          }\r\n                        });\r\n                    }}\r\n                  >\r\n                    Save\r\n                  </IonButton>\r\n                </IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol style={{ textAlign: \"center\" }}>\r\n                  <IonButton\r\n                    shape=\"round\"\r\n                    fill=\"outline\"\r\n                    color=\"danger\"\r\n                    onClick={() => auth.signOut()}\r\n                  >\r\n                    Logout\r\n                  </IonButton>\r\n                </IonCol>\r\n              </IonRow>\r\n            </IonGrid>\r\n          </IonContent>\r\n        </IonModal>\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import {\r\n  IonActionSheet\r\n} from \"@ionic/react\";\r\nimport { cameraOutline, closeOutline, imageOutline } from \"ionicons/icons\";\r\nimport React, { Dispatch, SetStateAction, useState } from \"react\";\r\nimport { Redirect } from \"react-router\";\r\nimport { Photo, usePhotoGallery } from \"../../hooks/usePhotoGallery\";\r\n\r\n\r\nconst UploadSelectionModal: React.FC<{active: boolean, setShowActionSheet: Dispatch<SetStateAction<boolean>>, setLoading: Dispatch<SetStateAction<boolean>>}> = ({active, setShowActionSheet, setLoading}) => {\r\n\r\n  const [selectedRoute, setSelectedRoute] = useState(\"\");\r\n  const [image, setImage] = useState<Photo>();\r\n  \r\n  const { takePhoto, takePhotoFromGalerie } = usePhotoGallery();\r\n\r\n  return (\r\n      <>\r\n\r\n        {\r\n            selectedRoute === \"upload\" && <Redirect to={{\r\n                pathname: \"/upload\",\r\n                state: { image }\r\n            }}/>\r\n        }\r\n\r\n        <IonActionSheet\r\n            isOpen={active}\r\n            onDidDismiss={() => setShowActionSheet(false)}\r\n            buttons={[\r\n            {\r\n                text: \"Camera\",\r\n                icon: cameraOutline,\r\n                handler: () => {\r\n                    takePhoto()\r\n                    .then(image => {\r\n                        // User took image\r\n                        setLoading(true);\r\n                        setImage(image);\r\n                        setSelectedRoute(\"upload\")\r\n                    })\r\n                    .catch(err => {\r\n                        // User Aborted Camera\r\n                        console.log(err)\r\n                    })\r\n                },\r\n            },\r\n            {\r\n                text: \"Galerie\",\r\n                icon: imageOutline,\r\n                handler: () => {\r\n                    takePhotoFromGalerie()\r\n                    .then(image => {\r\n                        setLoading(true)\r\n                        setImage(image);\r\n                        setSelectedRoute(\"upload\");\r\n                    })\r\n                },\r\n            },\r\n            {\r\n                text: \"Close\",\r\n                icon: closeOutline,\r\n                handler: () => {\r\n                setShowActionSheet(false)\r\n                },\r\n            }\r\n            ]}\r\n        ></IonActionSheet>\r\n      </>\r\n  );\r\n};\r\n\r\nexport default UploadSelectionModal;\r\n","function degreesToRadians(degrees: number) {\r\n  return (degrees * Math.PI) / 180;\r\n}\r\n\r\nexport function distanceInKm(lat1: number, lon1: number, lat2: number, lon2: number) {\r\n  var earthRadiusKm = 6371;\r\n\r\n  var dLat = degreesToRadians(lat2 - lat1);\r\n  var dLon = degreesToRadians(lon2 - lon1);\r\n\r\n  lat1 = degreesToRadians(lat1);\r\n  lat2 = degreesToRadians(lat2);\r\n\r\n  var a =\r\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n    Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);\r\n  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n  return earthRadiusKm * c;\r\n}","import {\r\n  IonCard,\r\n  IonCardContent,\r\n  IonCardHeader,\r\n  IonCardSubtitle,\r\n  IonCardTitle,\r\n  IonIcon,\r\n  IonImg,\r\n  IonItem,\r\n  IonLabel,\r\n  IonText,\r\n} from \"@ionic/react\";\r\nimport { pin } from \"ionicons/icons\";\r\nimport React from \"react\";\r\nimport { Image } from \"../../model/Image\";\r\n\r\ninterface ContainerProps {\r\n  image: Image;\r\n}\r\n\r\nconst ExploreCard: React.FC<ContainerProps> = ({ image }) => {\r\n  return (\r\n    <IonCard className=\"my-ion-card\">\r\n      {/* Coordinated */}\r\n      <IonItem>\r\n        <IonIcon icon={pin} slot=\"start\" />\r\n        <IonLabel>\r\n          {image.location.position\r\n            ? image.location.position\r\n            : image.location.coords.latitude +\r\n              \" \" +\r\n              image.location.coords.longitude}\r\n        </IonLabel>\r\n      </IonItem>\r\n\r\n      {/* Distance */}\r\n      {image.distance ? (\r\n        <IonItem>\r\n          <IonLabel>\r\n            {`${image.distance\r\n              .toString()\r\n              .slice(0, 4)} km away from you`}\r\n          </IonLabel>\r\n        </IonItem>\r\n      ) : (\r\n        <IonItem>\r\n          <IonLabel>{`Near you`}</IonLabel>\r\n        </IonItem>\r\n      )}\r\n\r\n      <IonCardHeader>\r\n        <IonCardSubtitle>{image.user}</IonCardSubtitle>\r\n        <IonCardTitle>{image.title}</IonCardTitle>\r\n      </IonCardHeader>\r\n\r\n      <IonCardContent>\r\n        <IonImg src={image.url}></IonImg>\r\n        <br />\r\n        <IonText style={{ fontSize: \"large\" }}>{image.description}</IonText>\r\n      </IonCardContent>\r\n    </IonCard>\r\n  );\r\n};\r\n\r\nexport default ExploreCard;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  IonContent,\r\n  IonHeader,\r\n  IonPage,\r\n  IonTitle,\r\n  IonToolbar,\r\n  IonSearchbar,\r\n  IonChip,\r\n  IonLabel,\r\n  IonListHeader,\r\n  IonRow,\r\n  IonCol,\r\n  IonGrid,\r\n  IonImg,\r\n  IonPopover,\r\n} from \"@ionic/react\";\r\nimport { db } from \"../../helper/firebase\";\r\nimport { Image } from \"../../model/Image\";\r\nimport { GeolocationPosition, Plugins } from \"@capacitor/core\";\r\nimport { distanceInKm } from \"../../hooks/evaluateDistance\";\r\nimport ExploreCard from \"../../components/ExploreCard/ExploreCard\";\r\nimport \"./Search.css\";\r\n\r\nconst { Geolocation } = Plugins;\r\n\r\nconst Search: React.FC = () => {\r\n  const [filter, setFilter] = useState(\"Location\");\r\n  const [images, setImages] = useState<Array<Image>>([]);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const [popPic, setPopPic] = useState<Image>();\r\n  // Geoinformation\r\n  const [location, setLocation] = useState<GeolocationPosition>();\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      // push location to state\r\n      setLocation(await Geolocation.getCurrentPosition());\r\n\r\n      console.log(\"Initial load...\");\r\n\r\n      setImages(await fetchImages());\r\n    })();\r\n  }, []);\r\n\r\n  async function fetchImages(): Promise<Image[]> {\r\n    // fetch images from firebase\r\n    const ref = db.collection(\"images\");\r\n    const data = await ref.get();\r\n\r\n    // load images to typed docs\r\n    let t: Image[] = [];\r\n    data.docs.forEach((doc: any) => t.push(doc.data()));\r\n    t.forEach((element: Image) => {\r\n      if (location !== undefined && element.distance == undefined) {\r\n        element.distance = distanceInKm(\r\n          location?.coords.latitude,\r\n          location?.coords.longitude,\r\n          element.location.coords.latitude,\r\n          element.location.coords.longitude\r\n        );\r\n      }\r\n    });\r\n\r\n    return t;\r\n  }\r\n\r\n  function filterItems(searchText: string) {\r\n    console.log(\"filtering\", searchText);\r\n\r\n    if (searchText === \"\" || searchText === null || searchText === undefined) {\r\n      fetchImages().then((res) => {\r\n        setImages(res);\r\n      });\r\n    } else if (filter === \"Location\") {\r\n      fetchImages().then((res) => {\r\n        let i: Image[] = [];\r\n        res.forEach((image) => {\r\n          if (image.location.position?.includes(searchText)) {\r\n            i.push(image);\r\n          }\r\n        });\r\n        setImages(i);\r\n      });\r\n    } else if (filter === \"Title\") {\r\n      fetchImages().then((res) => {\r\n        let i: Image[] = [];\r\n        res.forEach((image) => {\r\n          if (image.title.includes(searchText)) {\r\n            i.push(image);\r\n          }\r\n        });\r\n        setImages(i);\r\n      });\r\n    } else if (filter === \"User\") {\r\n      fetchImages().then((res) => {\r\n        let i: Image[] = [];\r\n        res.forEach((image) => {\r\n          if (image.user.includes(searchText)) {\r\n            i.push(image);\r\n          }\r\n        });\r\n        setImages(i);\r\n      });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonTitle>Search</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent fullscreen>\r\n        <IonSearchbar\r\n          onIonChange={(e) => {\r\n            filterItems((e.target as HTMLInputElement).value);\r\n          }}\r\n          showCancelButton=\"never\"\r\n        ></IonSearchbar>\r\n\r\n        <IonListHeader>Filter: {filter}</IonListHeader>\r\n        <IonChip\r\n          style={\r\n            filter === \"Location\"\r\n              ? { backgroundColor: \"lightgray\", color: \"black\" }\r\n              : {}\r\n          }\r\n          onClick={(e) => {\r\n            setFilter(\"Location\");\r\n          }}\r\n        >\r\n          <IonLabel>Location</IonLabel>\r\n        </IonChip>\r\n        <IonChip\r\n          style={\r\n            filter === \"User\"\r\n              ? { backgroundColor: \"lightgray\", color: \"black\" }\r\n              : {}\r\n          }\r\n          onClick={(e) => {\r\n            setFilter(\"User\");\r\n          }}\r\n        >\r\n          <IonLabel>User</IonLabel>\r\n        </IonChip>\r\n        <IonChip\r\n          style={\r\n            filter === \"Title\"\r\n              ? { backgroundColor: \"lightgray\", color: \"black\" }\r\n              : {}\r\n          }\r\n          onClick={(e) => {\r\n            setFilter(\"Title\");\r\n          }}\r\n        >\r\n          <IonLabel>Title</IonLabel>\r\n        </IonChip>\r\n\r\n        <IonGrid>\r\n          <IonRow>\r\n            {images.map((p: Image) => {\r\n              return (\r\n                <IonCol size=\"4\">\r\n                  <IonImg\r\n                    onClick={(e) => {\r\n                      setShowPopup(true);\r\n                      setPopPic(p);\r\n                    }}\r\n                    src={p.url}\r\n                    style={{\r\n                      objectFit: \"cover\",\r\n                      height: \"100%\",\r\n                      width: \"100%\",\r\n                    }}\r\n                  ></IonImg>\r\n                  <p\r\n                    style={{\r\n                      position: \"absolute\",\r\n                      bottom: \"-10px\",\r\n                      right: \"10px\",\r\n                      backgroundColor: \"rgba(0,0,0,0.5)\",\r\n                      borderRadius: \"5px\",\r\n                    }}\r\n                  >\r\n                    {p.distance?.toPrecision(4)}\r\n                    km\r\n                  </p>\r\n                </IonCol>\r\n              );\r\n            })}\r\n          </IonRow>\r\n        </IonGrid>\r\n        <IonPopover\r\n          cssClass=\"my-pop-over\"\r\n          backdropDismiss={true}\r\n          showBackdrop={false}\r\n          isOpen={showPopup}\r\n          onDidDismiss={(e) => setShowPopup(false)}\r\n        >\r\n          {popPic && <ExploreCard image={popPic} />}\r\n        </IonPopover>\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n","\r\nexport async function presentAlert(message:any) {\r\n    const alert = document.createElement('ion-alert'); \r\n    alert.message = message;\r\n    alert.buttons = ['OK'];\r\n  \r\n    document.body.appendChild(alert);\r\n    await alert.present();\r\n  \r\n    const { role } = await alert.onDidDismiss();\r\n    console.log('onDidDismiss resolved with role', role);\r\n  }\r\n\r\n  export async function presentAlertWithHeader(message:any, header:any) {\r\n    const alert = document.createElement('ion-alert'); \r\n    alert.header = header;\r\n    alert.message = message;\r\n    alert.buttons = ['OK'];\r\n  \r\n    document.body.appendChild(alert);\r\n    await alert.present();\r\n  \r\n    const { role } = await alert.onDidDismiss();\r\n    console.log('onDidDismiss resolved with role', role);\r\n  }","import { db } from \"../helper/firebase\";\r\nimport { User } from \"../model/User\";\r\n\r\n\r\n//Check Username\r\nexport async function checkUsername(userName: any): Promise<boolean> {\r\n   \r\n  var usernameCheck = db.collection(\"users\");\r\n\r\n  const data = await usernameCheck.get();\r\n  let typedDocs: User[] = [];\r\n  data.docs.forEach((doc: any) => typedDocs.push(doc.data().username));\r\n  var len = typedDocs.length; \r\n \r\n  for (var i = 0; i < len; i++) {\r\n    if (typedDocs[i] === userName) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\n","import { auth, db } from \"../../helper/firebase\";\r\nimport { presentAlert } from \"../alert\";\r\nimport { checkUsername } from \"../checkUsername\";\r\n\r\nexport async function signInWithUsernameAndPassword(\r\n  username: any,\r\n  password: any\r\n): Promise<any> {\r\n  \r\n  if (await checkUsername(username)) {\r\n    await db.collection(\"users\")\r\n      .where(\"username\", \"==\", username)\r\n      .get()\r\n      .then((querySnapshot) => {\r\n        querySnapshot.forEach(async (doc) => {\r\n         await auth\r\n            .signInWithEmailAndPassword(doc.data().email, password)\r\n            .catch((err) => presentAlert(\"Your Login credentials are incorrect\"));\r\n        });\r\n      });\r\n  } else {\r\n    await auth\r\n      .signInWithEmailAndPassword(username, password)\r\n      .catch((err) => presentAlert(\"Your Login credentials are incorrect\"));\r\n  }\r\n}\r\n","import { auth } from \"../../helper/firebase\";\r\nimport { presentAlert } from \"../alert\";\r\nimport { checkUsername } from \"../checkUsername\";\r\nimport { signInWithUsernameAndPassword } from \"./signInWithUsernameAndPassword\";\r\n\r\n\r\nexport async function checkLogin(username: any, password: any) {\r\n    \r\n    if (username.length === 0) presentAlert(\"Email or Username Required\");\r\n    else if (password.length === 0) presentAlert(\"Password Required\");   \r\n    else {\r\n        await signInWithUsernameAndPassword(username, password);      \r\n     }    \r\n}","import {\r\n  IonPage,\r\n  IonHeader,\r\n  IonToolbar,\r\n  IonTitle,\r\n  IonContent,\r\n  IonInput,\r\n  IonButton,\r\n  IonItem,\r\n  IonLabel,\r\n  IonIcon,\r\n  IonGrid,\r\n  IonAlert,\r\n  IonRouterLink,\r\n} from \"@ionic/react\";\r\nimport { \r\n  logInOutline  \r\n} from \"ionicons/icons\";\r\nimport React, { useCallback, useState } from \"react\";\r\nimport \"./Login.css\";\r\nimport { auth } from \"../../helper/firebase\";\r\n\r\nimport \"firebase/auth\";\r\nimport { checkLogin } from \"../../hooks/login/checkLogin\";\r\nimport { emailVerified } from \"../../hooks/register/emailVerify\";\r\n\r\nconst Login: React.FC = () => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");  \r\n  const [alertPasswordForgotenText, setalertPasswordForgotenText] = useState(\r\n    false\r\n  );  \r\n\r\n  const onUsernameNameChange = useCallback((e) => setUsername(e.detail?.value), []);\r\n  const onPasswordChange = useCallback((e) => setPassword(e.detail?.value), []);\r\n\r\n  const onLoginClick = useCallback(async () => {\r\n    \r\n    await checkLogin(username, password);   \r\n  \r\n\r\n  }, [username, password]);\r\n\r\n  \r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>          \r\n          <IonTitle>Login</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n\r\n      <IonContent fullscreen>\r\n        <IonGrid>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\">Email or Username</IonLabel>\r\n            <IonInput\r\n              onIonChange={onUsernameNameChange}\r\n              value={username}\r\n              class=\"input\"\r\n              type=\"text\"\r\n            ></IonInput>\r\n          </IonItem>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\">Password</IonLabel>\r\n            <IonInput\r\n              onIonChange={onPasswordChange}\r\n              value={password}\r\n              type=\"password\"\r\n            ></IonInput>\r\n          </IonItem>\r\n          <br />\r\n          <div className=\"LogInButton\">\r\n            <IonButton onClick={onLoginClick} expand=\"block\">\r\n              Login\r\n              <IonIcon icon={logInOutline} />\r\n            </IonButton>\r\n          </div>\r\n          <br />\r\n          <br />\r\n          <br />\r\n          <div className=\"LogInButton\">\r\n            <IonRouterLink routerLink={\"/register\"}>\r\n              CREATE A NEW ACCOUNT\r\n            </IonRouterLink>\r\n          </div>\r\n          <br />\r\n          <div className=\"LogInButton\">\r\n            <IonRouterLink onClick={() => setalertPasswordForgotenText(true)}>\r\n              I FORGOT MY PASSWORD\r\n            </IonRouterLink>\r\n          </div>\r\n        </IonGrid>\r\n      </IonContent>    \r\n      <IonAlert\r\n        isOpen={alertPasswordForgotenText}\r\n        onDidDismiss={() => setalertPasswordForgotenText(false)}\r\n        message={\"Please Type In your Email\"}\r\n        inputs={[\r\n          {\r\n            name: \"emailPasswordForgoten\",\r\n            type: \"email\",\r\n            placeholder: \"Email\",\r\n          },\r\n        ]}\r\n        buttons={[\r\n          {\r\n            text: \"Send\",\r\n            handler: (data) => {\r\n              auth.sendPasswordResetEmail(data.emailPasswordForgoten);\r\n            },\r\n          },\r\n        ]}\r\n      />\r\n    </IonPage>\r\n  );\r\n};\r\nexport default Login;\r\n","export enum PasswordCheckStrength {\r\n    Short,\r\n    Common,\r\n    Weak,\r\n    Ok,\r\n    Strong,\r\n};\r\n\r\n// Object to check password strengths and various properties\r\nexport class PasswordCheckService {\r\n\r\n    // Expected length of all passwords\r\n    public static get MinimumLength(): number {\r\n        return 5;\r\n    }\r\n\r\n    // Regex to check for a common password string - all based on 5+ length passwords\r\n    private commonPasswordPatterns = /passw.*|12345.*|09876.*|qwert.*|asdfg.*|zxcvb.*|footb.*|baseb.*|drago.*/;\r\n\r\n    //\r\n    // Checks if the given password matches a set of common password\r\n    //\r\n    public isPasswordCommon(password: string): boolean {\r\n        return this.commonPasswordPatterns.test(password);\r\n    }\r\n\r\n    //\r\n    // Returns the strength of the current password\r\n    //\r\n    public checkPasswordStrength(password: string): PasswordCheckStrength {\r\n\r\n        // Build up the strenth of our password\r\n        let numberOfElements = 0;\r\n        numberOfElements = /.*[a-z].*/.test(password) ? ++numberOfElements : numberOfElements;      // Lowercase letters\r\n        numberOfElements = /.*[A-Z].*/.test(password) ? ++numberOfElements : numberOfElements;      // Uppercase letters\r\n        numberOfElements = /.*[0-9].*/.test(password) ? ++numberOfElements : numberOfElements;      // Numbers\r\n        numberOfElements = /[^a-zA-Z0-9]/.test(password) ? ++numberOfElements : numberOfElements;   // Special characters (inc. space)\r\n\r\n        // Assume we have a poor password already\r\n        let currentPasswordStrength = PasswordCheckStrength.Short;\r\n\r\n        // Check then strenth of this password using some simple rules\r\n        if (password === null || password.length < PasswordCheckService.MinimumLength) {\r\n            currentPasswordStrength = PasswordCheckStrength.Short;\r\n        } else if (this.isPasswordCommon(password) === true) {\r\n            currentPasswordStrength = PasswordCheckStrength.Common;\r\n        } else if (numberOfElements === 0 || numberOfElements === 1 || numberOfElements === 2) {\r\n            currentPasswordStrength = PasswordCheckStrength.Weak;\r\n        } else if (numberOfElements === 3) {\r\n            currentPasswordStrength = PasswordCheckStrength.Ok;\r\n        } else {\r\n            currentPasswordStrength = PasswordCheckStrength.Strong;\r\n        }\r\n\r\n        // Return the strength of this password\r\n        return currentPasswordStrength;\r\n    }\r\n}","import { auth } from \"../../helper/firebase\";\r\nimport { presentAlert } from \"../alert\";\r\n\r\nexport async function emailVerified(): Promise<boolean> { \r\n    \r\n   \r\n  if (auth.currentUser?.emailVerified) {       \r\n    return true;\r\n  } else {       \r\n    return false;\r\n  }  \r\n}\r\n\r\nexport async function sendEmailVerify() {\r\n    auth.currentUser?.sendEmailVerification();    \r\n}","import { auth, db } from \"../../helper/firebase\";\r\nimport { presentAlert } from \"../alert\";\r\nimport { sendEmailVerify } from \"./emailVerify\";\r\n\r\n\r\n\r\n\r\nexport async function register(\r\n  password: any,\r\n  email: any,\r\n  userFirstName: any,\r\n  userLastName: any,\r\n  userName: any\r\n): Promise<any> {\r\n\r\n  await  auth\r\n    .createUserWithEmailAndPassword(email, password)\r\n    .then(async (userCredential) => {\r\n      var user = userCredential.user;\r\n\r\n      sendEmailVerify();    \r\n      const date: Date = new Date();\r\n\r\n      const data = {\r\n        username: userName,\r\n        userFirstName: userFirstName,\r\n        userLastName: userLastName,\r\n        email: email,       \r\n      };\r\n      await db.collection(\"users\")\r\n        .doc(auth.currentUser?.uid)\r\n        .set(data)\r\n        .catch((err) => presentAlert(err.message));\r\n    })    \r\n    .catch((err) => presentAlert(err.message));    \r\n  return \"\";\r\n}\r\n","import { presentAlert } from \"../alert\";\r\nimport { checkUsername } from \"../checkUsername\";\r\nimport { register } from \"./register\";\r\n\r\nexport async function checkRegister(\r\n  confirmPassword: any,\r\n  password: any,\r\n  email: any,\r\n  userFirstName: any,\r\n  userLastName: any,\r\n  userName: any\r\n): Promise<any> {\r\n  if (userName.length === 0) presentAlert(\"Username Required\");\r\n  else if (await checkUsername(userName)) presentAlert(\"Username already taken\");\r\n  else if (userFirstName.length === 0) presentAlert(\"Firstname Required\");\r\n  else if (userLastName.length === 0) presentAlert(\"Secondname Required\");\r\n  else if (email.length === 0) presentAlert(\"Email Required\");\r\n  else if (password.length === 0) presentAlert(\"Password Required\");\r\n  else if (password.length < 6) presentAlert(\"Password to short\");\r\n  else if (confirmPassword !== password) presentAlert(\"Password don't match\");\r\n  else {\r\n    await register(password, email, userFirstName, userLastName, userName);   \r\n  }\r\n}\r\n","import {\r\n  IonPage,\r\n  IonHeader,\r\n  IonToolbar,\r\n  IonTitle,\r\n  IonContent,\r\n  IonButtons,\r\n  IonButton,\r\n  IonIcon,\r\n  IonInput,\r\n  IonItem,\r\n  IonLabel,\r\n  IonGrid,\r\n  IonAlert,  \r\n} from \"@ionic/react\";\r\nimport { chevronBackOutline, personAddOutline } from \"ionicons/icons\";\r\nimport React, { useCallback, useState } from \"react\";\r\nimport { db, auth } from \"../../helper/firebase\";\r\nimport \"./Register.css\";\r\nimport \"firebase/auth\";\r\nimport { PasswordCheckService } from \"../../hooks/pw-check\";\r\n\r\nimport { User } from \"../../model/User\";\r\nimport { PasswordCheckStrength } from \"../../hooks/pw-check\";\r\nimport { checkUsername } from \"../../hooks/checkUsername\";\r\nimport { checkRegister } from \"../../hooks/register/checkRegister\";\r\nimport { presentAlertWithHeader } from \"../../hooks/alert\";\r\n\r\nconst Register: React.FC = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [userFirstName, setuserFirstName] = useState(\"\");\r\n  const [userLastName, setuserLastName] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [userName, setUserName] = useState(\"\");\r\n  const [alertText, setAlertText] = useState(\"\");\r\n  const [alertEmailVerify, setalertEmailVerify] = useState(false);\r\n  const [pwStrength, setpwStrength] = useState(PasswordCheckStrength.Short);\r\n\r\n  let checker: PasswordCheckService = new PasswordCheckService();\r\n\r\n  const onEmailNameChange = useCallback((e) => setEmail(e.detail?.value), []);\r\n  const onPasswordChange = useCallback((e) => {\r\n    setPassword(e.detail?.value);\r\n    setpwStrength(checker.checkPasswordStrength(e.detail?.value));\r\n  }, []);\r\n\r\n  const checkPw = () => {\r\n    setpwStrength(checker.checkPasswordStrength(\"tst_pw12\"));\r\n  };\r\n\r\n  const onConfirmPasswordChange = useCallback(\r\n    (e) => setConfirmPassword(e.detail?.value),\r\n    []\r\n  );\r\n  const onFirstNameChange = useCallback(\r\n    (e) => setuserFirstName(e.detail?.value),\r\n    []\r\n  );\r\n  const onLastNameChange = useCallback(\r\n    (e) => setuserLastName(e.detail?.value),\r\n    []\r\n  );\r\n  const onUsernameChange = useCallback((e) => setUserName(e.detail?.value), []);\r\n\r\n  const onDismiss = useCallback(() => setAlertText(\"\"), []);\r\n\r\n  const onSignUpClick = useCallback(async () => {\r\n    var alertMessage = await checkRegister(\r\n      confirmPassword,\r\n      password,\r\n      email,\r\n      userFirstName,\r\n      userLastName,\r\n      userName\r\n    );\r\n\r\n    if(auth.currentUser){\r\n    presentAlertWithHeader(\"Please verify your email address to finish signing up for Geogram\", \"Thank you for signing in.\");\r\n    }\r\n    \r\n  }, [confirmPassword, password, email, userFirstName, userLastName, userName]);\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonButtons slot=\"start\">\r\n            <IonButton color=\"primary\" routerLink=\"/login\">\r\n              <IonIcon icon={chevronBackOutline} />\r\n            </IonButton>\r\n          </IonButtons>\r\n          <IonTitle>Register</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n\r\n      <IonContent fullscreen>\r\n        <IonGrid>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\">Username</IonLabel>\r\n            <IonInput\r\n              onIonChange={onUsernameChange}\r\n              type=\"text\"\r\n              value={userName}\r\n            ></IonInput>\r\n          </IonItem>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\">First Name</IonLabel>\r\n            <IonInput\r\n              onIonChange={onFirstNameChange}\r\n              type=\"text\"\r\n              value={userFirstName}\r\n            ></IonInput>\r\n          </IonItem>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\">Second Name</IonLabel>\r\n            <IonInput\r\n              onIonChange={onLastNameChange}\r\n              type=\"text\"\r\n              value={userLastName}\r\n            ></IonInput>\r\n          </IonItem>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\">Email</IonLabel>\r\n            <IonInput\r\n              onIonChange={onEmailNameChange}\r\n              type=\"email\"\r\n              value={email}\r\n            ></IonInput>\r\n          </IonItem>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\">Password {pwStrength}</IonLabel>\r\n            <IonInput\r\n              onIonChange={onPasswordChange}\r\n              type=\"password\"\r\n              value={password}\r\n            ></IonInput>\r\n          </IonItem>\r\n          <br />\r\n          <IonItem>\r\n            <IonLabel position=\"floating\">Confirm Password </IonLabel>\r\n            <IonInput\r\n              onIonChange={onConfirmPasswordChange}\r\n              value={confirmPassword}\r\n              type=\"password\"\r\n            ></IonInput>\r\n          </IonItem>\r\n          <br />\r\n          <div className=\"SignInButton\">\r\n            <IonButton onClick={onSignUpClick}>\r\n              Register\r\n              <IonIcon icon={personAddOutline} />\r\n            </IonButton>\r\n          </div>\r\n        </IonGrid>\r\n        {/* <IonAlert\r\n          isOpen={alertText.length > 0}\r\n          onDidDismiss={onDismiss}\r\n          message={alertText}\r\n          buttons={[\"OK\"]}\r\n        />\r\n        <IonAlert\r\n          isOpen={alertEmailVerify}\r\n          onDidDismiss={() => setalertEmailVerify(false)}\r\n          header={\"Thank you for signing in.\"}\r\n          message={\r\n            \"Please verify your email address to finish signing up for Geogram\"\r\n          }\r\n          buttons={[\"OK\"]}\r\n        /> */}\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","import { Image } from \"../model/Image\";\r\n\r\nexport function sortImageArray(a: Image, b: Image): number {\r\n  if (a.distance !== undefined && b.distance !== undefined) {\r\n    if (a.distance > b.distance) {\r\n      return 1;\r\n    } else if (a.distance < b.distance) {\r\n      return -1;\r\n    } else {\r\n      if (a.location.timestamp < b.location.timestamp) {\r\n        return -1;\r\n      } else if (a.location.timestamp > b.location.timestamp) {\r\n        return 1;\r\n      }\r\n    }\r\n  }\r\n  return 0;\r\n}\r\n","/* eslint-disable react/jsx-no-undef */\r\nimport {\r\n  IonButton,\r\n  IonCol,\r\n  IonContent,\r\n  IonFab,\r\n  IonFabButton,\r\n  IonGrid,\r\n  IonHeader,\r\n  IonIcon,\r\n  IonImg,\r\n  IonInput,\r\n  IonItem,\r\n  IonLabel,\r\n  IonPage,\r\n  IonRow,\r\n  IonTextarea,\r\n  IonTitle,\r\n  IonToast,\r\n  IonToolbar,\r\n} from \"@ionic/react\";\r\nimport axios from \"axios\";\r\nimport { list } from \"ionicons/icons\";\r\nimport { Image } from \"../model/Image\";\r\nimport { distanceInKm } from \"./evaluateDistance\";\r\nimport { sortImageArray } from \"./sortImageArray\";\r\n\r\nexport function evaluateLocation(\r\n  range: number,\r\n  images: Image[],\r\n  lat: number,\r\n  long: number\r\n): Image[] {\r\n  let pictures: Image[] = [];\r\n  console.log(range);\r\n\r\n  images.forEach((image) => {\r\n    let distance: number = distanceInKm(\r\n      lat,\r\n      long,\r\n      image.location.coords.latitude,\r\n      image.location.coords.longitude\r\n    );\r\n    image.distance = distance;\r\n\r\n    if (distance <= range) {\r\n      pictures.push(image);\r\n    }\r\n  });\r\n\r\n  pictures = pictures.sort((a, b) => {\r\n    return sortImageArray(a, b);\r\n  });\r\n\r\n  console.log(pictures);\r\n\r\n  return pictures;\r\n}\r\n","import {\r\n  IonContent,\r\n  IonHeader,\r\n  IonPage,\r\n  IonTitle,\r\n  IonToolbar,\r\n  IonItem,\r\n  IonIcon,\r\n  IonLabel,\r\n  IonRefresher,\r\n  IonRefresherContent,\r\n  IonText,\r\n  IonPopover,\r\n  IonList,\r\n  IonListHeader,\r\n  IonRange,\r\n} from \"@ionic/react\";\r\nimport { Dispatch, SetStateAction, useEffect, useState } from \"react\";\r\nimport { GeolocationPosition, Plugins } from \"@capacitor/core\";\r\nimport { funnel } from \"ionicons/icons\";\r\nimport React from \"react\";\r\nimport { RefresherEventDetail } from \"@ionic/core\";\r\nimport { Image } from \"../../model/Image\";\r\nimport { db } from \"../../helper/firebase\";\r\nimport { sortImageArray } from \"../../hooks/sortImageArray\";\r\nimport { evaluateLocation } from \"../../hooks/evaluateLocation\";\r\nimport ExploreCard from \"../../components/ExploreCard/ExploreCard\";\r\n\r\nconst { Geolocation } = Plugins;\r\n\r\nconst Explore: React.FC<{ setLoading: Dispatch<SetStateAction<boolean>> }> = ({\r\n  setLoading,\r\n}) => {\r\n  // Geoinformation\r\n  const [location, setLocation] = useState<GeolocationPosition | undefined>();\r\n\r\n  //images to display\r\n  const [images, setImages] = useState<Array<Image>>([]);\r\n\r\n  //filter\r\n  const [filter, setFilter] = useState(15);\r\n\r\n  //popup\r\n  const [showPopup, setShowPopup] = useState<{\r\n    open: boolean;\r\n    event: Event | undefined;\r\n  }>({\r\n    open: false,\r\n    event: undefined,\r\n  });\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      // push location to state\r\n      setLocation(await Geolocation.getCurrentPosition());\r\n\r\n      console.log(\"Initial load...\");\r\n\r\n      setImages(await fetchImages());\r\n    })();\r\n  }, []);\r\n\r\n  async function fetchImages(i?: number): Promise<Image[]> {\r\n    // fetch images from firebase\r\n    const ref = db.collection(\"images\");\r\n    const data = await ref.get();\r\n\r\n    // load images to typed docs\r\n    let t: Image[] = [];\r\n    data.docs.forEach((doc: any) => t.push(doc.data()));\r\n\r\n    // sort image array\r\n    t = t.sort((a, b) => {\r\n      return sortImageArray(a, b);\r\n    });\r\n\r\n    if (location !== undefined) {\r\n      if (i) {\r\n        t = evaluateLocation(\r\n          i,\r\n          t,\r\n          location.coords.latitude,\r\n          location.coords.longitude\r\n        );\r\n      } else {\r\n        t = evaluateLocation(\r\n          filter,\r\n          t,\r\n          location.coords.latitude,\r\n          location.coords.longitude\r\n        );\r\n      }\r\n    }\r\n\r\n    return t;\r\n  }\r\n\r\n  function doRefresh(event: CustomEvent<RefresherEventDetail>) {\r\n    console.log(\"Begin async operation\");\r\n\r\n    fetchImages(filter).then((images) => setImages(images));\r\n\r\n    setTimeout(() => {\r\n      console.log(\"Async operation has ended\");\r\n      event.detail.complete();\r\n    }, 2000);\r\n  }\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonTitle>Explore</IonTitle>\r\n          <IonText\r\n            style={{ marginRight: \"0.25rem\" }}\r\n            slot=\"end\"\r\n            onClick={(e) => setShowPopup({ open: true, event: e.nativeEvent })}\r\n          >\r\n            {filter} km\r\n          </IonText>\r\n          <IonIcon\r\n            style={{ margin: \"0.5rem\" }}\r\n            icon={funnel}\r\n            slot=\"end\"\r\n            onClick={(e) => setShowPopup({ open: true, event: e.nativeEvent })}\r\n          />\r\n          <IonPopover\r\n            isOpen={showPopup.open}\r\n            event={showPopup.event}\r\n            onDidDismiss={(e) =>\r\n              setShowPopup({ open: false, event: undefined })\r\n            }\r\n          >\r\n            <IonList>\r\n              <IonListHeader>Range Filter</IonListHeader>\r\n\r\n              <IonItem>\r\n                <IonRange\r\n                  min={0}\r\n                  max={30}\r\n                  snaps={true}\r\n                  step={1}\r\n                  pin={true}\r\n                  value={filter}\r\n                  onIonChange={(e) => {\r\n                    setFilter(e.detail.value as number);\r\n                    setLoading(true);\r\n                    fetchImages(e.detail.value as number)\r\n                      .then((images) => {\r\n                        setImages(images);\r\n                        setLoading(false);\r\n                      })\r\n                      .catch((e) => setLoading(false));\r\n                  }}\r\n                  onLostPointerCapture={(e) => {\r\n                    setShowPopup({ open: false, event: undefined });\r\n                  }}\r\n                >\r\n                  <IonLabel slot=\"start\">0</IonLabel>\r\n                  <IonLabel slot=\"end\">30</IonLabel>\r\n                </IonRange>\r\n              </IonItem>\r\n            </IonList>\r\n          </IonPopover>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n\r\n      <IonContent fullscreen>\r\n        <IonRefresher\r\n          slot=\"fixed\"\r\n          onIonRefresh={doRefresh}\r\n          pullFactor={0.5}\r\n          pullMin={100}\r\n          pullMax={200}\r\n        >\r\n          <IonRefresherContent></IonRefresherContent>\r\n        </IonRefresher>\r\n        <IonHeader collapse=\"condense\">\r\n          <IonToolbar>\r\n            <IonTitle size=\"large\">Explore</IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        {images.length > 0 &&\r\n          images.map((image, id) => {\r\n            return <ExploreCard key={id} image={image} />;\r\n          })}\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Explore;\r\n","/* eslint-disable react/jsx-no-undef */\r\nimport {\r\n  IonButton,\r\n  IonCol,\r\n  IonContent,\r\n  IonGrid,\r\n  IonHeader,\r\n  IonIcon,\r\n  IonImg,\r\n  IonPage,\r\n  IonRow,\r\n  IonTitle,\r\n  IonToast,\r\n  IonToolbar,\r\n  isPlatform,\r\n} from \"@ionic/react\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport { Photo } from \"../../hooks/usePhotoGallery\";\r\nimport { base64FromPath } from \"@ionic/react-hooks/filesystem\";\r\nimport {\r\n  FilesystemDirectory,\r\n  FilesystemEncoding,\r\n  Plugins,\r\n} from \"@capacitor/core\";\r\nimport { GeogramPosition } from \"../../model/GeogramPosition\";\r\nimport axios from \"axios\";\r\nimport { db } from \"../../helper/firebase\";\r\nimport { Redirect } from \"react-router\";\r\nimport { UserContext } from \"../..\";\r\nimport {\r\n  arrowForward,\r\n  arrowForwardCircle,\r\n  arrowForwardCircleSharp,\r\n} from \"ionicons/icons\";\r\n\r\nconst { Filesystem } = Plugins;\r\n\r\nconst ProfilePic: React.FC<any> = (props) => {\r\n  const user = useContext(UserContext);\r\n\r\n  // image provided by props\r\n  const [image, setImage] = useState<Photo>();\r\n  const [oldImage, setOldImage] = useState<string>(\r\n    \"https://im-coder.com/images4/15590312779219.png\"\r\n  );\r\n\r\n  // Toast message\r\n  const [toast, setToast] = useState(\"\");\r\n\r\n  // Redirect\r\n  const [redirect, setRedirect] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (props.location.state !== undefined) {\r\n      setImage(props.location.state.image);\r\n    }\r\n\r\n    // get old picture from firebase and store it to state\r\n    db.collection(\"users\")\r\n      .doc(user?.uid)\r\n      .get()\r\n      .then((data) => {\r\n        if (data?.data()?.profilepic) {\r\n          setOldImage(data?.data()?.profilepic);\r\n        } else {\r\n          setOldImage(\"https://im-coder.com/images4/15590312779219.png\");\r\n        }\r\n      });\r\n\r\n    //disable set Loading\r\n    props.setLoading(false);\r\n  }, [props.location.state]);\r\n\r\n  const upload = async () => {\r\n    props.setLoading(true);\r\n\r\n    if (image !== undefined) {\r\n      if (image.webviewPath !== undefined) {\r\n        let file: any;\r\n        // get image data when on android or ios\r\n        if (isPlatform(\"android\") || isPlatform(\"ios\")) {\r\n          file = {\r\n            ...file,\r\n            data: (await base64FromPath(image.webviewPath!))\r\n              .toString()\r\n              .split(\",\")[1],\r\n          };\r\n        } else {\r\n          file = await Filesystem.readFile({\r\n            path: image.filepath,\r\n            directory: FilesystemDirectory.Data,\r\n            encoding: FilesystemEncoding.UTF8,\r\n          });\r\n        }\r\n\r\n        let res: any = await axios.post(\r\n          `${process.env.REACT_APP_IMAGE_SERVER_URL}/upload1`,\r\n          { data: file.data }\r\n        );\r\n\r\n        if (res.data.file !== undefined) {\r\n          db.collection(\"users\")\r\n            .doc(user?.uid)\r\n            .get()\r\n            .then((data) => {\r\n              db.collection(\"users\")\r\n                .doc(user?.uid)\r\n                .set(\r\n                  {\r\n                    ...data.data(),\r\n                    profilepic:\r\n                      `${process.env.REACT_APP_IMAGE_SERVER_URL}/` +\r\n                      res.data.file,\r\n                  },\r\n                  { merge: true }\r\n                )\r\n                .then((s) => {\r\n                  setToast(\"Successfully added item to firebase\");\r\n                  setTimeout(() => {\r\n                    setRedirect(\"profile\");\r\n                    props.setLoading(false);\r\n                  }, 100);\r\n                })\r\n                .catch((e) => {\r\n                  console.log(\"Error while changing profile picture\");\r\n                });\r\n            });\r\n        } else {\r\n          setToast(\r\n            \"Error while adding data to image server: \" +\r\n              process.env.REACT_APP_IMAGE_SERVER_URL\r\n          );\r\n        }\r\n      }\r\n\r\n      // wait for api\r\n      // cleanup of input fields\r\n    } else {\r\n      setToast(\"Error occured!\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonTitle>Upload</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent fullscreen>\r\n        <IonHeader collapse=\"condense\">\r\n          <IonToolbar>\r\n            <IonTitle size=\"large\">Upload</IonTitle>\r\n          </IonToolbar>\r\n        </IonHeader>\r\n\r\n        {/* Upload Form with image view */}\r\n        {image && (\r\n          <>\r\n            <IonGrid>\r\n              <IonRow>\r\n                <IonCol>\r\n                  <h1>Change Profile Picture</h1>\r\n                </IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonCol size=\"5\">\r\n                  <IonImg src={oldImage} />\r\n                </IonCol>\r\n                <IonCol\r\n                  size=\"2\"\r\n                  style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"center\",\r\n                    alignItems: \"center\",\r\n                  }}\r\n                >\r\n                  <IonIcon\r\n                    style={{ fontSize: \"3em\" }}\r\n                    icon={arrowForward}\r\n                  ></IonIcon>\r\n                </IonCol>\r\n                <IonCol size=\"5\">\r\n                  <IonImg src={image.webviewPath} />\r\n                </IonCol>\r\n              </IonRow>\r\n              <br />\r\n              <IonRow>\r\n                <IonCol size=\"2\" offset=\"4\">\r\n                  <IonButton\r\n                    expand=\"block\"\r\n                    shape=\"round\"\r\n                    fill=\"outline\"\r\n                    color=\"primary\"\r\n                    onClick={upload}\r\n                  >\r\n                    Submit\r\n                  </IonButton>\r\n                </IonCol>\r\n                <IonCol size=\"2\">\r\n                  <IonButton\r\n                    expand=\"block\"\r\n                    shape=\"round\"\r\n                    fill=\"outline\"\r\n                    color=\"danger\"\r\n                    onClick={() => {\r\n                      setOldImage(\r\n                        \"https://im-coder.com/images4/15590312779219.png\"\r\n                      );\r\n                      setImage(undefined);\r\n                      setRedirect(\"profile\");\r\n                    }}\r\n                  >\r\n                    Cancel\r\n                  </IonButton>\r\n                </IonCol>\r\n              </IonRow>\r\n            </IonGrid>\r\n          </>\r\n        )}\r\n\r\n        {/* Toast */}\r\n        <IonToast\r\n          isOpen={toast !== \"\"}\r\n          onDidDismiss={() => setToast(\"\")}\r\n          message={toast}\r\n          duration={1500}\r\n        />\r\n        {/* Redirect */}\r\n        {redirect !== \"\" && <Redirect to={`/${redirect}`}></Redirect>}\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default ProfilePic;\r\n","import { Redirect, Route } from \"react-router-dom\";\r\nimport React, { useContext, useState } from \"react\";\r\nimport Upload from \"./pages/Upload/Upload\";\r\nimport {\r\n  IonApp,\r\n  IonFab,\r\n  IonFabButton,\r\n  IonIcon,\r\n  IonLabel,\r\n  IonLoading,\r\n  IonRouterOutlet,\r\n  IonTabBar,\r\n  IonTabButton,\r\n  IonTabs,\r\n} from \"@ionic/react\";\r\nimport { IonReactRouter } from \"@ionic/react-router\";\r\nimport {\r\n  arrowForwardCircle,\r\n  cameraOutline,\r\n  cameraSharp,\r\n  ellipse,\r\n  square,\r\n  triangle,\r\n  personCircleOutline,\r\n  search,\r\n  home,\r\n  squareOutline,\r\n} from \"ionicons/icons\";\r\nimport Profile from \"./pages/Profile/Profile\";\r\n\r\n/* Core CSS required for Ionic components to work properly */\r\nimport \"@ionic/react/css/core.css\";\r\n\r\n/* Basic CSS for apps built with Ionic */\r\nimport \"@ionic/react/css/normalize.css\";\r\nimport \"@ionic/react/css/structure.css\";\r\nimport \"@ionic/react/css/typography.css\";\r\n\r\n/* Optional CSS utils that can be commented out */\r\nimport \"@ionic/react/css/padding.css\";\r\nimport \"@ionic/react/css/float-elements.css\";\r\nimport \"@ionic/react/css/text-alignment.css\";\r\nimport \"@ionic/react/css/text-transformation.css\";\r\nimport \"@ionic/react/css/flex-utils.css\";\r\nimport \"@ionic/react/css/display.css\";\r\n\r\n/* Theme variables */\r\nimport \"./theme/variables.css\";\r\n\r\nimport { UserContext } from \".\";\r\nimport UploadSelectionModal from \"./components/UploadSelectionModal/UploadSelectionModal\";\r\nimport Search from \"./pages/Search/Search\";\r\nimport Login from \"./pages/auth/Login\";\r\nimport Register from \"./pages/auth/Register\";\r\nimport Exploration from \"./pages/Exploration/Exploration\";\r\nimport ProfilePic from \"./pages/ProfilePic/ProfilePic\";\r\n\r\nconst PublicRoutes = () => {\r\n  return (\r\n    <IonReactRouter>\r\n      <Route path=\"/login\" component={Login} exact={true} />\r\n      <Route path=\"/register\" component={Register} exact={true} />\r\n      <Route path=\"/\" render={() => <Redirect to=\"/login\" />} />\r\n    </IonReactRouter>\r\n  );\r\n};\r\n\r\nconst PrivateRoutes = () => {\r\n  const [showActionSheet, setShowActionSheet] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  return (\r\n    <IonReactRouter>\r\n      <IonTabs>\r\n        <IonRouterOutlet>\r\n          <Route exact path=\"/explore\">\r\n            <Exploration setLoading={setLoading} />\r\n          </Route>\r\n          <Route exact path=\"/search\">\r\n            <Search />\r\n          </Route>\r\n          <Route path=\"/profile\">\r\n            <Profile setLoading={setLoading} />\r\n          </Route>\r\n          <Route exact path=\"/\">\r\n            <Redirect to=\"/explore\" />\r\n          </Route>\r\n\r\n          <Route\r\n            path=\"/upload\"\r\n            render={(props) => <Upload {...props} setLoading={setLoading} />}\r\n          />\r\n          <Route\r\n            path=\"/profile-pic\"\r\n            render={(props) => <ProfilePic {...props} setLoading={setLoading} />}\r\n          />\r\n\r\n          <Route exact path=\"/login\">\r\n            <Redirect to=\"/explore\" />\r\n          </Route>\r\n          <Route exact path=\"/register\">\r\n            <Redirect to=\"/explore\" />\r\n          </Route>\r\n        </IonRouterOutlet>\r\n        <IonTabBar slot=\"bottom\">\r\n          {/* Explore Tab - Benita */}\r\n          <IonTabButton tab=\"explore\" href=\"/explore\">\r\n            <IonIcon icon={home} />\r\n            <IonLabel>Explore</IonLabel>\r\n          </IonTabButton>\r\n          {/* Search Tab - Benita */}\r\n          <IonTabButton tab=\"search\" href=\"/search\">\r\n            <IonIcon icon={search} />\r\n            <IonLabel>Search</IonLabel>\r\n          </IonTabButton>\r\n          {/* Profile Tab - Jonas */}\r\n          <IonTabButton tab=\"profile\" href=\"/profile\">\r\n            <IonIcon icon={personCircleOutline} />\r\n            <IonLabel>Profile</IonLabel>\r\n          </IonTabButton>\r\n        </IonTabBar>\r\n      </IonTabs>\r\n\r\n      {/* Upload Component - Paul */}\r\n      {true && (\r\n        <>\r\n          <IonFab\r\n            style={{ marginBottom: \"4.5rem\", marginRight: \"0.5rem\" }}\r\n            vertical=\"bottom\"\r\n            horizontal=\"end\"\r\n            slot=\"fixed\"\r\n            onClick={() => {\r\n              setShowActionSheet(true);\r\n            }}\r\n          >\r\n            <IonFabButton>\r\n              <IonIcon md={cameraSharp} ios={cameraOutline} />\r\n            </IonFabButton>\r\n          </IonFab>\r\n          <UploadSelectionModal\r\n            active={showActionSheet}\r\n            setShowActionSheet={setShowActionSheet}\r\n            setLoading={setLoading}\r\n          />\r\n        </>\r\n      )}\r\n\r\n      <IonLoading\r\n        isOpen={loading}\r\n        onDidDismiss={() => setLoading(false)}\r\n        message={\"Please wait...\"}\r\n        duration={5000}\r\n      />\r\n    </IonReactRouter>\r\n  );\r\n};\r\n\r\nconst App: React.FC = () => {\r\n  const user = useContext(UserContext);\r\n\r\n  return <IonApp>{user ? <PrivateRoutes /> : <PublicRoutes />}</IonApp>;\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://cra.link/PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://cra.link/PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://cra.link/PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log('No internet connection found. App is running in offline mode.');\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then((registration) => {\r\n        registration.unregister();\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { defineCustomElements } from '@ionic/pwa-elements/loader';\r\nimport React, { createContext, useEffect, useState } from \"react\";\r\nimport firebase, { auth } from \"./helper/firebase\";\r\ndefineCustomElements(window);\r\n\r\nexport const UserContext = createContext<firebase.User | null>(null);\r\n\r\nexport const UserProvider: React.FC = ({ children }) => {\r\n    const [user, setUser] = useState<firebase.User | null>(null);\r\n    \r\nuseEffect(() => {\r\n    auth.onAuthStateChanged((userAuth) => setUser(userAuth));\r\n}, []);\r\n\r\nreturn  <UserContext.Provider value={user}> {children}    </UserContext.Provider>;\r\n};\r\n\r\n\r\nReactDOM.render(\r\n  <UserProvider>\r\n    <App />\r\n  </UserProvider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://cra.link/PWA\r\nserviceWorkerRegistration.unregister();\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}